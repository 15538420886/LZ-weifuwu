!function(e){function t(r){if(a[r])return a[r].exports;var i=a[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var a={};return t.m=e,t.c=a,t.p="",t(0)}({0:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),a(51),a(50);var i=a(2),n=r(i),o=a(8),s=r(o),l=a(42),u=r(l),d=a(13),c=a(968),p=r(c),h=a(28),f=r(h);if("undefined"!=typeof document){var m=document.getElementById("app"),g=void 0;window.addEventListener("DOMContentLoaded",function(){g=a(52)}),s.default.render(n.default.createElement(d.Router,{onUpdate:function(){window.scrollTo(0,0),g&&g.run()},history:d.browserHistory,routes:p.default}),m)}t.default=function(e,t){var a=(0,d.createMemoryHistory)(),r=a.createLocation(e.path);(0,d.match)({routes:p.default,location:r},function(e,a,r){var i=u.default.renderToString(n.default.createElement(d.RouterContext,r)),o=f.default.rewind(),s='<!DOCTYPE html>\n      <html>\n        <head>\n          <meta charset="utf-8">\n          <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">\n          <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">\n          '+o.title.toString()+"\n          "+o.meta.toString()+'\n          <link rel=icon href=/assets/favicon.ico>\n          <link rel="stylesheet" href="/react_lz.css"/>\n          <link rel="stylesheet" href="/assets/docs.css"/>\n        </head>\n        <body style="width:100%; margin:0;padding:0; background-color:#fefefe">\n          <div id="app" style="width:100%; height:100%">'+i+'</div>\n          <script src="/react_lz.js"></script>\n          <script src="/assets/prism.js" data-manual></script>\n          <script src="/common.js"></script>\n          <script src="/uman.js"></script>\n        </body>\n      </html>';t(null,s)})}},1:function(e,t,a){e.exports=a(10)(1160)},2:function(e,t,a){e.exports=a(10)(1)},3:function(e,t,a){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=a(17),n=a(53),o=a(24);e.exports={initConf:function(e){for(var t in e)try{this[t]=e[t]}catch(e){}console.log(this)},actionFlowNo:1,lzOptions:{},lzOptionsWait:{},loadOptions:function(e,t,a){var r=this.lzOptions[e];if(null!==r&&"undefined"!=typeof r){var n=r[t];return null!==a&&a(null===n||"undefined"==typeof n?[]:n),n}var o=this.lzOptionsWait[e];if(null!==o&&"undefined"!=typeof o)return void o.push({name:t,func:a});o=[{name:t,func:a}],this.lzOptionsWait[e]=o;var s=this,l="";l=this.localDict?"/dict/"+e+".js":this.paramUrl+"app-info/dict?appName="+encodeURI(e),i.getScript(l,function(){var t={};null!==dict&&dict.map(function(e,a){t[e.indexName]=e}),s.lzOptions[appName]=t,o=s.lzOptionsWait[e],o.map(function(e,a){var r=t[e.name];null!==e.func&&e.func(null===r||"undefined"==typeof r?[]:r,e.name)}),s.lzOptionsWait[e]=null})},getOptionName:function(e,t,a,r,i){var n=this.lzOptions[e];if(null===n||"undefined"==typeof n){var o=null,s=this.lzOptionsWait[e];return null!==s&&"undefined"!=typeof s||(o=function(){i.setState({loading:i.state.loading})}),this.loadOptions(e,t,o),a}var l=n[t];if(null!==l&&"undefined"!=typeof l)for(var u=l.codeData.length,d=0;d<u;d++){var c=l.codeData[d];if(c.codeValue===a)return r&&a!==c.codeDesc?a+"-"+c.codeDesc:c.codeDesc}return a},getOptionName2:function(e,t,a){var r="",e=e.split(";");return e.map(function(e,t){var i=e.indexOf("=");if(i>0){var n=e.substr(0,i),o=e.substr(1+i);r=a&&n!==o?n+"-"+o:n}else r=n}),r},findRecordName:function(e,t,a,r){for(var i=t.length,n=0;n<i;n++){var s=t[n];if(s.uuid===e)return void o.findName(r,e,s[a])}o.findName(r,e,e)},sessionID:"",saveSessionID:function(e,t){null!=e.errCode&&""!=e.errCode&&"000000"!=e.errCode||(t.sessionID=e.object.sessionId,window.sessionStorage.setItem("sessionID",t.sessionID))},getSessionID:function(){return""===this.sessionID&&(this.sessionID=window.sessionStorage.getItem("sessionID")),this.sessionID},fz_setCookie:function(e,t,a){var r="";if(a){var i=new Date;i.setTime(i.getTime()+864e5*a),r=";expires="+i.toGMTString()}document.cookie=e+"="+(null==t?"":escape(t))+r+";path=/"},fmtGetUrl:function(e){var t=e.indexOf("corp");if(t>=0)return e;if(void 0===window.loginData)return e;var a=window.loginData.compUser;return null===a||""===a.corpUuid||void 0===a.corpUuid?e:(t=e.indexOf("?"),e=t>=0?e+"&corp="+a.corpUuid:e+"?corp="+a.corpUuid)},ajaxBody:function(e,t,a){if(t.term="web","undefined"!=typeof window.loginData){var r=window.loginData.compUser;t.corp=null===r?"":r.corpUuid}else t.corp="";return{type:"post",url:e,contentType:"application/json; charset=UTF-8",data:JSON.stringify(t),dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}},loginService:function(e,t){var a=this,r=new n(function(r,n){var o={flowNo:"0",term:"web",object:t};i.ajax({type:"post",url:e,contentType:"application/json; charset=UTF-8",data:JSON.stringify(o),dataType:"json",success:function(e,t,r){a.saveSessionID(e,a)},xhrFields:{withCredentials:!0},crossDomain:!0}).done(r).fail(n)});return r},doDeployService:function(e,t){var a=new n(function(a,r){i.ajax({type:"post",url:e,contentType:"application/json; charset=UTF-8",data:JSON.stringify(t),dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0}).done(a).fail(r)});return a},fetch:function(e){var t=new n(function(t,a){i.get(e).done(t).fail(a)});return t},doJsonService:function(e,t){var a=this.ajaxBody(e,t),r=new n(function(e,t){i.ajax(a).done(e).fail(t)});return r},doGetService:function(e){e=this.fmtGetUrl(e);var t=new n(function(t,a){i.get(e).done(t).fail(a)});return t},doRetrieveService:function(e,t,a,r,o){var s={pageRow:r,startPage:a,totalRow:o,object:t},l={flowNo:"0",object:s},u=this.ajaxBody(e,l),d=new n(function(e,t){i.ajax(u).done(e).fail(t)});return d},doTextService:function(e,t,a,r,o){var s={flowNo:"111111",object:"1"},l=this.ajaxBody(e,s),u=new n(function(e,t){i.ajax(l).done(e).fail(t)});return u},doGetRecordService:function(e,t){var a={flowNo:"0",object:t},r=this.ajaxBody(e,a),o=new n(function(e,t){i.ajax(r).done(e).fail(t)});return o},doCreateService:function(e,t){var a={flowNo:"0",object:t},r=this.ajaxBody(e,a),o=new n(function(e,t){i.ajax(r).done(e).fail(t)});return o},doUpdateService:function(e,t){var a={flowNo:"0",object:t},r=this.ajaxBody(e,a),o=new n(function(e,t){i.ajax(r).done(e).fail(t)});return o},doRemoveService:function(e,t){var a={flowNo:"0",object:t},r=this.ajaxBody(e,a),o=new n(function(e,t){i.ajax(r).done(e).fail(t)});return o},doUploadService:function(e,t,a){var r=new FormData,o={flowNo:"0",object:t};if(o.term="web","undefined"!=typeof window.loginData){var s=window.loginData.compUser;o.corp=null===s?"":s.corpUuid}else o.corp="";r.append("reqObject",JSON.stringify(o));var l=0,u=!0,d=!1,c=void 0;try{for(var p,h=a[Symbol.iterator]();!(u=(p=h.next()).done);u=!0){var f=p.value;r.append("file_"+l,f),l++}}catch(e){d=!0,c=e}finally{try{!u&&h.return&&h.return()}finally{if(d)throw c}}var m={type:"post",url:this.fmtGetUrl(e),data:r,dataType:"json",cache:!1,contentType:!1,processData:!1,xhrFields:{withCredentials:!0},crossDomain:!0};return new n(function(e,t){i.ajax(m).done(e).fail(t)})},copyValue:function(e,t){for(var a in e)try{t[a]=e[a]}catch(e){}},deepCopyValue:function(e){var t=e instanceof Array?[]:{};for(var a in e)null!==e[a]?t[a]="object"===r(e[a])?this.deepCopyValue(e[a]):e[a]:t[a]=e[a]=null;return t},compareTo:function(e,t){for(var a in e)try{if(t[a]!==e[a])return!1}catch(e){return!1}for(var a in t)try{if(t[a]!==e[a])return!1}catch(e){return!1}return!0},findRecord:function(e,t){for(var a=e.recordSet.length-1;a>=0;a--)if(e.recordSet[a].uuid===t)return a;return-1},getResErrMsg:function(e){if(void 0!==e&&null!==e){var t=e.responseJSON;if(void 0!==t&&null!==t){var a=t.message;if(void 0!==a&&null!==a)return a}}return"调用服务错误"},recordCreate:function(e,t,a,i){var n=this,o=e;this.doCreateService(a,t).then(function(e){if(null==e.errCode||""==e.errCode||"000000"==e.errCode){if(void 0===i||null===i){var t=r(e.object.list);if("object"===t&&e.object.list.constructor===Array)for(var a=e.object.list.length,n=0;n<a;n++)o.recordSet.push(e.object.list[n]);else o.recordSet.push(e.object)}else i(o,e.object);o.totalRow=o.totalRow+1,o.fireEvent("create","",o)}else o.fireEvent("create","处理错误["+e.errCode+"]["+e.errDesc+"]",o)},function(e){o.fireEvent("create",n.getResErrMsg(e),o)})},recordUpdate:function(e,t,a,r){var i=this,n=e,o=this.findRecord(e,t.uuid);if(o<0)return void n.fireEvent("update","没有找到记录["+t.uuid+"]",n);if(this.compareTo(n.recordSet[o],t))return console.log("数据没有变更"),void n.fireEvent("update","",n);var i=this;this.doUpdateService(a,t).then(function(e){null==e.errCode||""==e.errCode||"000000"==e.errCode?(void 0===r||null===r?i.copyValue(e.object,n.recordSet[o]):r(n,n.recordSet[o],e.object),n.fireEvent("update","",n)):n.fireEvent("update","处理错误["+e.errCode+"]["+e.errDesc+"]",n)},function(e){n.fireEvent("update",i.getResErrMsg(e),n)})},recordDelete:function(e,t,a){console.log(e,t,a);var r=e,i=this.findRecord(e,t);if(i<0)return void r.fireEvent("remove","没有找到记录["+t+"]",r);var n=this;this.doRemoveService(a,t).then(function(e){null==e.errCode||""==e.errCode||"000000"==e.errCode?(r.recordSet.splice(i,1),r.totalRow=r.totalRow-1,r.fireEvent("remove","",r)):r.fireEvent("remove","处理错误["+e.errCode+"]["+e.errDesc+"]",r)},function(e){r.fireEvent("remove",n.getResErrMsg(e),r)})},recordDeleteMore:function(e,t,a){var r=e,i=this.findRecord(e,t);if(i<0)return void r.fireEvent("remove","没有找到记录["+t+"]",r);var n=this;this.doRemoveService(a,t).then(function(e){console.log(e),null==e.errCode||""==e.errCode||"000000"==e.errCode?(r.recordSet.splice(i,1),r.fireEvent("remove","",r)):r.fireEvent("remove","处理错误["+e.errCode+"]["+e.errDesc+"]",r)},function(e){r.fireEvent("remove",n.getResErrMsg(e),r)})},recordRetrieve:function(e,t,a,r,i){var o=this,s=new n(function(n,s){o.doRetrieveService(e,t,a,r,i).then(function(e){record?null==e.errCode||""==e.errCode||"000000"==e.errCode?n(e.object):s("处理错误["+e.errCode+"]["+e.errDesc+"]"):s("查询数据时错误")},function(e){s(JSON.stringify(e))})});return s},selModName:"",selectedApp:null,menuMap:{},getAppMenu:function(e){var t=window.sessionStorage.getItem("loadedMenu");if(null===t||void 0===t||""===t)return null;for(var a=!1,r=t.split(","),i=r.length-1;i>=0;i--)if(e===r[i]){a=!0;break}if(!a)return null;var n=this.menuMap[e];if(void 0!==n&&null!==n)return n;var o=window.sessionStorage.getItem("menu."+e);return void 0!==o&&null!==o?(n=JSON.parse(o),this.menuMap[e]=n,this.selModName=e,window.sessionStorage.setItem("activeMenu",e),n):null},setSelectedApp:function(e){if(this.selectedApp=null,"undefined"!=typeof window.loginData){var t=null,a=window.loginData.compUser;if(null===a){var r=window.loginData.authUser;if("admin"!==r.userName)return;t=[{appCode:"MA"}]}else t=a.appAuthList;if(null!==t){"*"===e.charAt(0)&&(e=e.substr(1));for(var i=t.length,n=0;n<i;n++){var o=t[n];if(o.appCode===e){this.selectedApp=o,window.sessionStorage.setItem("activeApp",e);break}}}}},saveAppMenu:function(e,t){void 0!==t&&null!==t||(t=[]);var a={};t.map(function(e,t){a[e.menuPath]=e.roleName}),this.menuMap[e]=a,window.sessionStorage.setItem("menu."+e,JSON.stringify(a));var r=window.sessionStorage.getItem("loadedMenu");r=null===r||void 0===r||""===r?e:r+","+e,window.sessionStorage.setItem("loadedMenu",r)},setActiveMenuName:function(e){this.selModName=e,window.sessionStorage.setItem("activeMenu",e)},checkMenuPriv:function(e){if(null===this.selectedApp){var t=window.sessionStorage.getItem("activeApp");null!==t&&void 0!==t&&this.setSelectedApp(t);var a=window.sessionStorage.getItem("activeMenu");null!==a&&void 0!==a&&this.getAppMenu(a)}if(""===this.selModName)return 1;var r=this.menuMap[this.selModName];if(void 0===r||null===r)return this.checkRole?0:2;var i=r[e];if(void 0===i||null===i)return this.checkRole?0:2;if(i.indexOf("*")>=0)return 1;if(null===this.selectedApp)return this.checkRole?0:2;var n=window.loginData.compUser;if(null===n&&"MA"===this.selectedApp.appCode){var o=window.loginData.authUser;if("admin"===o.userName)return 1}var s=this.selectedApp.roleList;if(null===s||void 0===s)return this.checkRole?0:2;for(var l=s.split(","),u=l.length-1;u>=0;u--){var d=","+l[u]+",";if(i.indexOf(d)>=0)return 1}return this.checkRole?0:2},checkAppPriv:function(e){if("undefined"==typeof window.loginData)return this.checkRole?0:2;var t=window.loginData.compUser;if(null===t){if("MA"===e){var a=window.loginData.authUser;if("admin"===a.userName)return 1}return this.checkRole?0:2}if("*"===e.charAt(0))return 1;if(null!==t.appAuthList)for(var r=t.appAuthList.length,i=0;i<r;i++){var n=t.appAuthList[i];if(n.appCode===e)return 1}return this.checkRole?0:2},downAppMenu:function(e,t){var a=this,r=new n(function(r,i){var n=a.getAppMenu(e);if(n)return a.setSelectedApp(t),a.setActiveMenuName(e),void r(n);var o=a.authUrl+"fnt-app-menu/appName";a.doCreateService(o,e).then(function(n){null==n.errCode||""==n.errCode||"000000"==n.errCode?(a.saveAppMenu(e,n.object),a.setSelectedApp(t),a.setActiveMenuName(e),r(n.object)):i("下载菜单错误["+n.errCode+"]["+n.errDesc+"]")},function(e){i("下载菜单错误")})});return r}}},4:function(e,t,a){e.exports=a(10)(541)},5:function(e,t,a){e.exports=a(10)(1032)},6:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,a="",r="0123456789ABCDEF";for(t=0;t<=3;t++)a+=r.charAt(e>>8*t+4&15)+r.charAt(e>>8*t&15);return a}function n(e){var t,a=(e.length+8>>6)+1,r=new Array(16*a);for(t=0;t<16*a;t++)r[t]=0;for(t=0;t<e.length;t++)r[t>>2]|=e.charCodeAt(t)<<t%4*8;return r[t>>2]|=128<<t%4*8,r[16*a-2]=8*e.length,r}function o(e,t){var a=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(a>>16);return r<<16|65535&a}function s(e,t){return e<<t|e>>>32-t}function l(e,t,a,r,i,n){return o(s(o(o(t,e),o(r,n)),i),a)}function u(e,t,a,r,i,n,o){return l(t&a|~t&r,e,t,i,n,o)}function d(e,t,a,r,i,n,o){return l(t&r|a&~r,e,t,i,n,o)}function c(e,t,a,r,i,n,o){return l(t^a^r,e,t,i,n,o)}function p(e,t,a,r,i,n,o){return l(a^(t|~r),e,t,i,n,o)}function h(){this.regDate3=/^[1-2]\d{6,7}$/,this.regEmail=/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,this.regPhone=/^((\(\d{1,5}\))|(\d{1,5}\-))?(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(-\d{1,5})?$/,this.regPhones=/^(\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(-\d{1,5})?([,|;](\(0\d{2,3}\)|0\d{2,3}-)?[1-9]\d{6,7}(-\d{1,5})?)*$/,this.regMobile=/^((\(\d{3}\))|(\d{3}\-))?1[34578]\d{9}$/,this.regUrl=/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\':+!]*([^<>\"\"])*$/,this.className=/^([_a-z0-9]+\.)*[A-Z][_A-Za-z0-9]+$/,this.regIdCard15=/^\d{15}(\d{2}[A-Za-z0-9])?$/,this.regIdCard18=/^\d{17}(?:\d|x|X)$/,this.regMoney=/^[-\+]?\d+(\.\d{0,2})?$/,this.regNumber=/^\d+$/,this.regZip=/^[0-9]\d{5}$/,this.regQQ=/^[1-9]\d{3,9}$/,this.regInteger=/^[-\+]?\d+$/,this.regDouble=/^[-\+]?\d+(\.\d+)?$/,this.regEnglish=/^[A-Za-z]+$/,this.regEnglish2=/^[A-Za-z\s]+$/,this.regChinese=/^[\u0391-\uFFE5]+$/,this.regUnSafe=/^(([A-Z]*|[a-z]*|\d*|[-_\~!@#\$%\^&\*\.\(\)\[\]\{\}<>\?\\\/\'\"]*)|.{0,5})$|\s/,this.regNotChar=/^[^`~!@#$%^&*()+=|\\\][\]\{\}:;'\,.<>\/?]{1}[^`~!@$%^&()+=|\\\][\]\{\}:;'\,.<>?]{0,19}$/,this.regChar=/[(\/)(\\)(')(")(<)(>)]/g}function f(e,t,a){var r=/^\d+$/;if(4!=e.length||0==e)return!1;if(!r.test(e))return!1;var i=parseInt(e)%4==0&&parseInt(e)%100!=0||parseInt(e)%400==0;if(!t||0==t)return!1;if(!r.test(t))return!1;var n=parseInt(t,10);if(n>12)return!1;if(!a||0==a)return!1;if(!r.test(a))return!1;var o=[29,31,28,31,30,31,30,31,31,30,31,30,31];return 2==n&&i&&(n=0),!(a>o[n])}function m(e,t){if(e.length!=t.length)return"请按格式【"+t+"】输入日期";for(var a="",r="",i="",n=e.split(""),o=t.split(""),s=n.length,l=0;l<s;l++)if("y"===o[l])a+=n[l];else if("m"===o[l])r+=n[l];else if("d"===o[l])i+=n[l];else if(o[l]!==n[l])return"请按格式【"+t+"】输入日期";return 0==f(a,r,i)?"请输入正确的日期!":""}function g(e){var t=18==e.length?h.regIdCard18:h.regIdCard15;if(0==t.test(e))return"请输入有效的身份证号码!";var a="",r="",i="";if(18==e.length?(a=e.substr(6,4),r=e.substr(10,2),i=e.substr(12,2)):15==e.length&&(a="19"+e.substr(6,2),r=e.substr(8,2),i=e.substr(10,2)),0==f(a,r,i))return"日期的取值范围不正确!";var n=v(e);return null!=n?"请输入有效的身份证号码!":void 0}function v(e){if(18!=e.length)return null;var t=S(e),a=e.substring(17).toUpperCase();return t!=a?t:null}function S(e){for(var t="1,0,X,9,8,7,6,5,4,3,2".split(","),a="7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2".split(","),r=0,i=0;i<17;i++)r+=parseInt(e.substring(i,i+1))*a[i];var n=r%11,o=t[n];return o}function y(e,t){if(t.length>6){var a=t.substr(0,5);if("date:"===a||"date："===a){var r=t.substr(5);return m(e,r)}}if("idcard18"===t){if(18!==e.length)return"请输入18位身份证号码"}else if("idcard"===t&&18!==e.length&&15!==e.length)return"请输入身份证号码";for(var i=M.length-1;i>=0;i--){var n=M[i];if(n.type==t)return n.isValid(e)}return"未知的数据类型["+t+"]"}function C(e){var t,a=348;for(t=32768;t>8;t>>=1)a+=R[e-1900]&t?1:0;return a+w(e)}function w(e){return U(e)?65536&R[e-1900]?30:29:0}function U(e){return 15&R[e-1900]}function E(e,t){return R[e-1900]&65536>>t?30:29}function b(e,t,a){var r,i=0,n=0,o=(Date.UTC(e,t,a)-Date.UTC(1900,0,31))/864e5;for(this.dayCyl=o+40,this.monCyl=14,r=1900;r<2050&&o>0;r++)n=C(r),o-=n,this.monCyl+=12;for(o<0&&(o+=n,r--,this.monCyl-=12),this.year=r,this.yearCyl=r-1864,i=U(r),this.isLeap=!1,r=1;r<13&&o>0;r++)i>0&&r==i+1&&0==this.isLeap?(--r,this.isLeap=!0,n=w(this.year)):n=E(this.year,r),1==this.isLeap&&r==i+1&&(this.isLeap=!1),o-=n,0==this.isLeap&&this.monCyl++;0==o&&i>0&&r==i+1&&(this.isLeap?this.isLeap=!1:(this.isLeap=!0,--r,--this.monCyl)),o<0&&(o+=n,--r,--this.monCyl),this.month=r,this.day=o+1}var x=a(2),N=r(x),k=a(4),A=k.Tree.TreeNode,P=(a(17),["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);e.exports={eMailList:["icerno.com","opssino.com","gmail.com","163.com","qq.com","sina.com","sina.com.cn"],initConf:function(e){for(var t in e)try{this[t]=e[t]}catch(e){}},check:function(e,t,a){var r=""===t||null===t||"undefined"==typeof t;if(e.required===!0&&r)return"请输入【"+e.desc+"】";if(r)return"";if(e.max>0&&t.length>e.max)return"【"+e.desc+"】最多输入【"+e.max+"】个字符";if(e.min>0&&t.length<e.min)return"【"+e.desc+"】至少输入【"+e.max+"】个字符";if(""!==e.dataType&&null!==e.dataType&&"undefined"!=typeof e.dataType){var i=y(t,e.dataType);if(""!==i&&null!==i&&"undefined"!=typeof i)return i}if(null!==e.pattern&&"undefined"!=typeof e.pattern&&0==e.pattern.test(t))return""===e.patternPrompt||null===e.patternPrompt||"undefined"==typeof e.patternPrompt?"请输入正确的内容!":e.patternPrompt;if(""!==e.validator&&null!==e.validator&&"undefined"!=typeof e.validator){var i=e.validator(t,e,a);if(""!==i&&null!==i&&"undefined"!=typeof i)return i}return""},checkDataType:function(e,t){return y(e,t)},setError:function(e,t,a){""===a||null===a||"undefined"==typeof a?(e.state.hints[t+"Status"]="",e.state.hints[t+"Hint"]=""):(e.state.hints[t+"Status"]="error",e.state.hints[t+"Hint"]=N.default.createElement("span",{className:"errorHint"},a))},validator:function(e,t,a){var r=this,i=e.state.validRules;if(0===i.length)return!0;var n=!0;if(""===a||null===a||"undefined"==typeof a)e.state.hints={},i.map(function(a,i){var o=t[a.id];a.whitespace||null==o||(o=o.replace(/(^\s*)|(\s*$)/g,""),t[a.id]=o);var s=r.check(a,o,e);""!==s&&(r.setError(e,a.id,s),n=!1)});else for(var o=i.length-1;o>=0;o--){var s=i[o];if(s.id===a){var l=t[a],u=this.check(s,l,e);this.setError(e,a,u),""!==u?n=!1:"number"===s.dataType&&""!==l&&(t[a]=""+parseInt(l));break}}return n},formValidator:function(e,t){var a=this.validator(e,t);if(!a){var r=e.state.hints;e.setState({hints:r})}return a},formatDate:function(e,t){if(null===e||""===e||"undefined"==typeof e)return"";var a=/^[1-2]\d{6,7}$/;if(!a.test(e))return e;var r=e.substr(0,4),i=e.substr(4,2),n=e.substr(6,2);1==n.length&&(n="0"+n);var o=P[parseInt("1"+i)-101],s=t;return s=s.replace(/YYYY/g,r),s=s.replace(/YY/g,r.substring(2)),s=s.replace(/MM/g,i),s=s.replace(/MON/g,o),s=s.replace(/DD/g,n)},formatMonth:function(e,t){if(null===e||""===e||"undefined"==typeof e)return"";var a=/^[1-2]\d{5}$/;if(!a.test(e))return e;var r=e.substr(0,4),i=e.substr(4,2),n=P[parseInt("1"+i)-101],o=t;return o=o.replace(/YYYY/g,r),o=o.replace(/YY/g,r.substring(2)),o=o.replace(/MM/g,i),o=o.replace(/MON/g,n)},getToday:function(){var e=new Date;return 1e4*e.getFullYear()+100*(e.getMonth()+1)+e.getDate()},getMonth:function(){var e=new Date;return 100*e.getFullYear()+(e.getMonth()+1)},getLunar:function(e,t,a){var r=new b(e,t-1,a),a=""+(100*r.month+r.day);return r.month<10&&(a="0"+a),a},timeDiff:function(e,t){var a=e.substr(0,2)+":"+e.substr(2,2),r=t.substr(0,2)+":"+t.substr(2,2),a=new Date("2017/6/16 "+a).getTime(),r=new Date("2017/6/16 "+r).getTime(),i=r-a,n=i/1e3/60;return{h:Math.floor(n/60),m:n%60,dm:n}},timeDiff2:function(e,t){var a=new Date("2017/6/16 "+e).getTime(),r=new Date("2017/6/16 "+t).getTime(),i=r-a,n=i/1e3/60;return{h:Math.floor(n/60),m:n%60,dm:n}},initTreeNodes:function(e,t){var a=this,r=[],i={};e.map(function(n,o){var s=t(n,e);r.push(s),i[s.key]=s,s.children=[],a.initTreeNode(s,n)}),r.map(function(e,t){""!==e.pid&&(e.pNode=i[e.pid],"undefined"==typeof e.pNode&&(e.pNode=null),null!==e.pNode&&e.pNode.children.push(e))});var n=[],o=[];if(r.map(function(e,t){null===e.pNode&&(""!==e.pid?o.push(e):n.push(e))}),o.length>0){var s={key:"__unknow",pid:"",title:"未关联节点",disableCheckbox:!0,disabled:!1,pNode:null,children:o,object:null};n.push(s),o.map(function(e,t){e.pNode=s})}return r.map(function(e,t){e.isLeaf=0===e.children.length,e.isLeaf&&(e.children=null)}),n},initTreeNodes2:function(e,t,a,r){var i=this;if(0===e.length)return[];var n=[],o={};e.map(function(e,a){var r=t(e);n.push(r),o[r.key]=r,r.children=[],i.initTreeNode(r,e)});var s=[];return a.map(function(e,t){var a=r(e);s.push(a),a.children=null,i.initTreeNode(a,e),a.pNode=o[a.pid],"undefined"==typeof a.pNode&&(a.pNode=null),null!==a.pNode&&a.pNode.children.push(a)}),n},initTreeNodes3:function(e,t,a){var r=this;if(0===e.length)return[];var i=[],n={};return e.map(function(o,s){var l=a(o,e),u=n[l.pid];null!==u&&"undefined"!=typeof u||(u=t(o,e),u.children=[],r.initTreeNode(u,null),i.push(u),n[u.key]=u),r.initTreeNode(l,o),l.pNode=u,l.children=null,u.children.push(l)}),i},initTreeNode:function(e,t){e.object=t,e.pNode=null,null!==e.pid&&"undefined"!=typeof e.pid||(e.pid=""),null!==e.disabled&&"undefined"!=typeof e.disabled||(e.disabled=!1),null!==e.disableCheckbox&&"undefined"!=typeof e.disableCheckbox||(e.disableCheckbox=!1)},prepareTreeNodes:function(e){var t=this;return e.isLeaf||null==e.children?N.default.createElement(A,{title:e.title,key:e.key,disabled:e.disabled,disableCheckbox:e.disableCheckbox,isLeaf:e.isLeaf}):N.default.createElement(A,{title:e.title,key:e.key,disabled:e.disabled,disableCheckbox:e.disableCheckbox,isLeaf:e.isLeaf},e.children.map(function(e,a){return t.prepareTreeNodes(e)}))},getCardMargin:function(e,t){var a=0===t?0:t>1?t:58,r=e.refs.mxgBox;if(null!==r&&"undefined"!=typeof r)for(var i=r.state.hints,n=i.length,o=0;o<n;o++)if(""!==i[o]){a+=26;break}var s={};return s.padding=a+"px 0 0 0",s.margin="-"+a+"px 0 0 0",s},getGridMargin:function(e,t){var a=0===t?0:t>1?t:58,r=e.refs.mxgBox;if(null!==r&&"undefined"!=typeof r)for(var i=r.state.hints,n=i.length,o=0;o<n;o++)if(""!==i[o]){a+=26;break}var s={};return s.padding=a+"px 0 0 0",s.margin="-"+a+"px 0 0 0",s},calcMD5:function(e){var t,a=n(e),r=1732584193,s=-271733879,l=-1732584194,h=271733878;for(t=0;t<a.length;t+=16){var f=r,m=s,g=l,v=h;r=u(r,s,l,h,a[t+0],7,-680876936),h=u(h,r,s,l,a[t+1],12,-389564586),l=u(l,h,r,s,a[t+2],17,606105819),s=u(s,l,h,r,a[t+3],22,-1044525330),r=u(r,s,l,h,a[t+4],7,-176418897),h=u(h,r,s,l,a[t+5],12,1200080426),l=u(l,h,r,s,a[t+6],17,-1473231341),s=u(s,l,h,r,a[t+7],22,-45705983),r=u(r,s,l,h,a[t+8],7,1770035416),h=u(h,r,s,l,a[t+9],12,-1958414417),l=u(l,h,r,s,a[t+10],17,-42063),s=u(s,l,h,r,a[t+11],22,-1990404162),r=u(r,s,l,h,a[t+12],7,1804603682),h=u(h,r,s,l,a[t+13],12,-40341101),l=u(l,h,r,s,a[t+14],17,-1502002290),s=u(s,l,h,r,a[t+15],22,1236535329),r=d(r,s,l,h,a[t+1],5,-165796510),h=d(h,r,s,l,a[t+6],9,-1069501632),l=d(l,h,r,s,a[t+11],14,643717713),s=d(s,l,h,r,a[t+0],20,-373897302),r=d(r,s,l,h,a[t+5],5,-701558691),h=d(h,r,s,l,a[t+10],9,38016083),l=d(l,h,r,s,a[t+15],14,-660478335),s=d(s,l,h,r,a[t+4],20,-405537848),r=d(r,s,l,h,a[t+9],5,568446438),h=d(h,r,s,l,a[t+14],9,-1019803690),l=d(l,h,r,s,a[t+3],14,-187363961),s=d(s,l,h,r,a[t+8],20,1163531501),r=d(r,s,l,h,a[t+13],5,-1444681467),h=d(h,r,s,l,a[t+2],9,-51403784),l=d(l,h,r,s,a[t+7],14,1735328473),s=d(s,l,h,r,a[t+12],20,-1926607734),r=c(r,s,l,h,a[t+5],4,-378558),h=c(h,r,s,l,a[t+8],11,-2022574463),l=c(l,h,r,s,a[t+11],16,1839030562),s=c(s,l,h,r,a[t+14],23,-35309556),r=c(r,s,l,h,a[t+1],4,-1530992060),h=c(h,r,s,l,a[t+4],11,1272893353),l=c(l,h,r,s,a[t+7],16,-155497632),s=c(s,l,h,r,a[t+10],23,-1094730640),r=c(r,s,l,h,a[t+13],4,681279174),h=c(h,r,s,l,a[t+0],11,-358537222),l=c(l,h,r,s,a[t+3],16,-722521979),s=c(s,l,h,r,a[t+6],23,76029189),r=c(r,s,l,h,a[t+9],4,-640364487),h=c(h,r,s,l,a[t+12],11,-421815835),l=c(l,h,r,s,a[t+15],16,530742520),s=c(s,l,h,r,a[t+2],23,-995338651),r=p(r,s,l,h,a[t+0],6,-198630844),h=p(h,r,s,l,a[t+7],10,1126891415),l=p(l,h,r,s,a[t+14],15,-1416354905),s=p(s,l,h,r,a[t+5],21,-57434055),r=p(r,s,l,h,a[t+12],6,1700485571),h=p(h,r,s,l,a[t+3],10,-1894986606),l=p(l,h,r,s,a[t+10],15,-1051523),s=p(s,l,h,r,a[t+1],21,-2054922799),r=p(r,s,l,h,a[t+8],6,1873313359),h=p(h,r,s,l,a[t+15],10,-30611744),l=p(l,h,r,s,a[t+6],15,-1560198380),s=p(s,l,h,r,a[t+13],21,1309151649),r=p(r,s,l,h,a[t+4],6,-145523070),h=p(h,r,s,l,a[t+11],10,-1120210379),l=p(l,h,r,s,a[t+2],15,718787259),s=p(s,l,h,r,a[t+9],21,-343485551),r=o(r,f),s=o(s,m),l=o(l,g),h=o(h,v)}return i(r)+i(s)+i(l)+i(h)},strSort:function(e,t){return e.localeCompare(t)},isMatched:function(e,t){for(var a in e)try{var r=e[a];if(null!==r&&"string"==typeof r&&r.indexOf(t)>=0)return!0}catch(e){}return!1},filter:function(e,t){var a=this;if(null===t||"undefined"==typeof t||""===t)return e;var r=[];return e.map(function(e,i){a.isMatched(e,t)&&r.push(e)}),r},sortTable:function(e,t,a){var r=null;return r=a?function(e,a){var r=e[t],i=a[t];return i.localeCompare(r)}:function(e,a){var r=e[t],i=a[t];return r.localeCompare(i)},e.sort(r)},isIncNumber:function(e){if(null===e||""===e)return!1;for(var t=e.length-1;t>=0;t--){var a=e.charAt(t);if(a>="0"&&a<="9")return!0}return!1},infoMsg:function(e){k.Modal.info({title:"提示",content:e})},succMsg:function(e){k.Modal.success({title:"成功",content:e})},errMsg:function(e){k.Modal.error({title:"错误",content:e})},warnMsg:function(e){k.Modal.warning({title:"警告",content:e})}};var h=new h,M=[{type:"int",isValid:function(e){if(0==h.regInteger.test(e))return"请输入整数!"}},{type:"double",isValid:function(e){if(0==h.regDouble.test(e))return"请输入Double数据，比如：55.069!"}},{type:"money",isValid:function(e){if(0==h.regMoney.test(e))return"请输入金额，比如：2355.00!"}},{type:"email",isValid:function(e){if(0==h.regEmail.test(e))return"请输入电子邮件地址!"}},{type:"idcard",isValid:g},{type:"idcard18",isValid:g},{type:"phone",isValid:function(e){if(0==h.regPhone.test(e))return"请输入电话号码!"}},{type:"phones",isValid:function(e){if(0==h.regPhones.test(e))return"请输入电话号码，[,]分割!"}},{type:"mobile",isValid:function(e){if(0==h.regMobile.test(e))return"请输入手机号码!"}},{type:"zip",isValid:function(e){if(0==h.regZip.test(e))return"请输入六位数字的邮政编码!"}},{type:"url",isValid:function(e){if(0==h.regUrl.test(e.toLowerCase()))return"请输入HTTP地址!"}},{type:"classname",isValid:function(e){if(0==h.className.test(e))return"请输入有效的类名称!"}},{type:"qq",isValid:function(e){if(0==h.regQQ.test(e))return"请输入QQ号!"}},{type:"number",isValid:function(e){if(0==h.regNumber.test(e))return"请输入数字!"}},{type:"汉字",isValid:function(e){if(0==h.regChinese.test(e))return"请输入汉字!"}},{type:"字母",isValid:function(e){if(0==h.regEnglish2.test(e))return"请输入字母或空格!"}}],R=new Array(19416,19168,42352,21717,53856,55632,91476,22176,39632,21970,19168,42422,42192,53840,119381,46400,54944,44450,38320,84343,18800,42160,46261,27216,27968,109396,11104,38256,21234,18800,25958,54432,59984,28309,23248,11104,100067,37600,116951,51536,54432,120998,46416,22176,107956,9680,37584,53938,43344,46423,27808,46416,86869,19872,42448,83315,21200,43432,59728,27296,44710,43856,19296,43748,42352,21088,62051,55632,23383,22176,38608,19925,19152,42192,54484,53840,54616,46400,46496,103846,38320,18864,43380,42160,45690,27216,27968,44870,43872,38256,19189,18800,25776,29859,59984,27480,21952,43872,38613,37600,51552,55636,54432,55888,30034,22176,43959,9680,37584,51893,43344,46240,47780,44368,21977,19360,42416,86390,21168,43312,31060,27296,44368,23378,19296,42726,42208,53856,60005,54576,23200,30371,38608,19415,19152,42192,118966,53840,54560,56645,46496,22224,21938,18864,42359,42160,43600,111189,27936,44448,84835)},7:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(5),s=(r(o),a(1)),l=(a(11),a(34)),u={svcList:n.default.PropTypes.array},d=n.default.createClass({displayName:"ServiceMsg",getInitialState:function(){return{svcMsg:{resName:"",operation:"",errMsg:""},hints:[]}},mixins:[s.listenTo(l,"onServiceComplete")],onServiceComplete:function(e){e.errMsg.indexOf("[AUTH09]")>=0&&window.sessionStorage.removeItem("loginData"),this.setState({svcMsg:e})},componentDidMount:function(){this.clear()},clear:function(){this.state.hints=[];for(var e=this.props.svcList.length,t=0;t<e;t++)this.state.hints.push("")},showError:function(e){var t=this.state.hints,a=t.length;a>0&&(t[0]=e),this.setState({hints:t})},onClose:function(){for(var e=this.state.hints,t=e.length,a=0;a<t;a++)e[a]="";this.setState({hints:e})},render:function(){var e=this.state.svcMsg;if(null!=e&&null!==e.operation&&""!==e.operation){for(var t=e.resName+"/"+e.operation,a=this.props.svcList.length,r=0;r<a;r++)if(this.props.svcList[r]===t){this.state.hints[r]=e.errMsg;break}this.state.svcMsg=null}for(var i="",a=this.state.hints.length,r=0;r<a&&(i=this.state.hints[r],null===i||""===i);r++);return""===i?null:n.default.createElement("div",{"data-show":"true",className:"ant-alert ant-alert-error",style:{textAlign:"left"}},n.default.createElement("i",{className:"anticon anticon-cross-circle ant-alert-icon"}),n.default.createElement("span",{className:"ant-alert-message"},i),n.default.createElement("span",{className:"ant-alert-description"}),n.default.createElement("a",{className:"ant-alert-close-icon",onClick:this.onClose},n.default.createElement("i",{className:"anticon anticon-cross"})))}});d.propTypes=u,e.exports=d},8:function(e,t,a){e.exports=a(10)(12)},9:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=(r(i),a(65)),o=r(n),s=a(6);e.exports=function(e,t){return{toggle:function(){this.beforeClose&&this.state.modal&&this.beforeClose(),this.setState({modal:!this.state.modal})},formatDate:function(e,t){return null!==e&&""!==e&&"undefined"!=typeof e?(0,o.default)(e,"YYYYMMDD"):""},formatMonth:function(e,t){return null!==e&&""!==e&&"undefined"!=typeof e?(0,o.default)(e,"YYYYMM"):""},handleOnChange:function(a){var r=this.state[e];r[a.target.id]=a.target.value;var i=!0;t!==!0&&(i=s.validator(this,r,a.target.id)),i&&this.state.afterChange&&this.state.afterChange(a.target.id,a.target.value),this.setState({loading:this.state.loading})},onRadioChange:function(a){var r=this.state[e],i=""+a.target.value;r[a.target.id]=i;var n=!0;t!==!0&&(n=s.validator(this,r,a.target.id)),n&&this.state.afterChange&&this.state.afterChange(a.target.id,i),this.setState({loading:this.state.loading})},handleCheckBox:function(a){var r=this.state[e],i=a.target.checked?"1":"0";r[a.target.id]=i;var n=!0;t!==!0&&(n=s.validator(this,r,a.target.id)),n&&this.state.afterChange&&this.state.afterChange(a.target.id,i),this.setState({loading:this.state.loading})},handleOnSelected:function(a,r){var i=this.state[e];i[a]=r;var n=!0;t!==!0&&(n=s.validator(this,i,a)),n&&this.state.afterChange&&this.state.afterChange(a,r),this.setState({loading:this.state.loading})},handleOnSelDate:function(a,r,i,n){if(null==n||0==n.length)n="";else{
if(n.length!=r.length)return;for(var o="",l="",u="",d=n.split(""),c=r.split(""),p=d.length,h=0;h<p;h++)if("Y"===c[h])o+=d[h];else if("M"===c[h])l+=d[h];else if("D"===c[h])u+=d[h];else if(c[h]!==d[h])return void console.log("日期错误",a,monthFormat,monthString);n=o+l+u}var f=this.state[e];f[a]=n;var m=!0;t!==!0&&(m=s.validator(this,f,a)),m&&this.state.afterChange&&this.state.afterChange(a,n),this.setState({loading:this.state.loading})},handleOnSelMonth:function(a,r,i,n){if(null==n||0==n.length)n="";else{if(n.length!=r.length)return;for(var o="",l="",u=n.split(""),d=r.split(""),c=u.length,p=0;p<c;p++)if("Y"===d[p])o+=u[p];else if("M"===d[p])l+=u[p];else if(d[p]!==u[p])return void console.log("日期错误",a,r,n);n=o+l}var h=this.state[e];h[a]=n;var f=!0;t!==!0&&(f=s.validator(this,h,a)),f&&this.state.afterChange&&this.state.afterChange(a,n),this.setState({loading:this.state.loading})}}}},10:function(e,t){e.exports=react_lz},11:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["showError"]);e.exports=i},12:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=a(2),s=r(o),l=a(4),u=a(3),d=l.Select.Option,c=s.default.createClass({displayName:"DictSelect",getInitialState:function(){return{opts:[],loading:!1}},showOptions:function(e){var t=e.codeData;null!==t&&"undefined"!=typeof t||(t=[]),this.setState({opts:t,loading:!1})},componentWillMount:function(){var e=this.props,t=e.appName,a=e.optName;this.state.loading=!0,u.loadOptions(t,a,this.showOptions)},selectMultiValue:function(e){if(this.props.onSelect){var t=this.props.value,a=t?t.split(","):[];a.push(e),t=a.join(","),this.props.onSelect(t)}},deselectMultiValue:function(e){if(this.props.onSelect){for(var t=this.props.value,a=t?t.split(","):[],r=0;r<a.length;r++)if(a[r]===e){a.splice(r,1);break}t=a.join(","),this.props.onSelect(t)}},render:function(){var e,t=this.props,a=(t.appName,t.optName,t.showCode),r=t.required,o=t.mode,u=t.onSelect,c=t.value,p=i(t,["appName","optName","showCode","required","mode","onSelect","value"]);e=a?this.state.opts.map(function(e,t){return s.default.createElement(d,{key:e.codeValue,value:e.codeValue},e.codeValue,"-",e.codeDesc)}):this.state.opts.map(function(e,t){return s.default.createElement(d,{key:e.codeValue,value:e.codeValue},e.codeDesc)});var h;if("multiple"===o){var f=c?c.split(","):[];h=s.default.createElement(l.Select,n({mode:"multiple",value:f,onSelect:this.selectMultiValue,onDeselect:this.deselectMultiValue},p),e)}else h=r?s.default.createElement(l.Select,n({value:c,onSelect:u},p),e):s.default.createElement(l.Select,n({value:c,onSelect:u},p),s.default.createElement(d,{value:""},"--"),e);return this.state.loading?s.default.createElement(l.Spin,null,h):h}});t.default=c},13:function(e,t,a){e.exports=a(10)(1049)},17:function(e,t,a){e.exports=a(10)(785)},18:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o={toggle:n.default.PropTypes.func,message:n.default.PropTypes.string},s=n.default.createClass({displayName:"ErrorMsg",getInitialState:function(){return{}},onClose:function(e){this.props.toggle()},render:function(){return""===this.props.message?null:n.default.createElement("div",{"data-show":"true",className:"ant-alert ant-alert-error",style:{textAlign:"left"}},n.default.createElement("i",{className:"anticon anticon-cross-circle ant-alert-icon"}),n.default.createElement("span",{className:"ant-alert-message"},this.props.message),n.default.createElement("span",{className:"ant-alert-description"}),"undefined"!=typeof this.props.toggle?n.default.createElement("a",{className:"ant-alert-close-icon",onClick:this.onClose},n.default.createElement("i",{className:"anticon anticon-cross"})):"")}});s.propTypes=o,e.exports=s},22:function(e,t,a){"use strict";var r=a(17),i=a(6),n=a(3);e.exports={loadContext:function(){var e=window.sessionStorage.getItem("loginData");if(null!==e&&"undefined"!=typeof e){var t=window.sessionStorage.getItem("utilConf"),a=window.sessionStorage.getItem("commonConf");if(null!==t&&"undefined"!=typeof t&&null!==a&&"undefined"!=typeof a){var r=JSON.parse(t),o=JSON.parse(a);return n.initConf(r),i.initConf(o),window.loginData=JSON.parse(e),!0}}return!1},downConfig:function(e){var t=e,a="/config.js",o=window.location.href;o.startsWith("https:")&&(a="/config-s.js"),t.setState({loading:!0}),r.getScript(a,function(){n.initConf(utilConf),i.initConf(commonConf),window.sessionStorage.setItem("utilConf",JSON.stringify(utilConf)),window.sessionStorage.setItem("commonConf",JSON.stringify(commonConf)),"单公司"!==i.corpStruct&&t.onConfigLoaded(),t.setState({loading:!1})})},saveLoginData:function(e,t){try{for(var a=null,r=e.compUser.length,i=0;i<r;i++)if(e.compUser[i].corpUuid===t){a=e.compUser[i];break}e.compUser=a,console.log(e),window.loginData=e,window.sessionStorage.setItem("loginData",JSON.stringify(e))}catch(e){console.log(e)}try{window.sessionStorage.setItem("loadedMenu","")}catch(e){console.log(e)}}}},23:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(13),s=a(4),l=(s.Layout.Header,s.Layout.Content,s.Layout.Footer,s.Layout.Sider),u=s.Menu.SubMenu,d=a(3),c={children:n.default.PropTypes.node,navItems:n.default.PropTypes.array,activeNode:n.default.PropTypes.string},p=n.default.createClass({displayName:"LeftMenu",getInitialState:function(){return{collapsed:!1,mode:"inline"}},onCollapse:function(e){this.setState({collapsed:e,mode:e?"vertical":"inline"})},handleClick:function(e){var t=e.key,a="",r=t.indexOf("?");r>0&&(a=t.substring(1+r),t=t.substring(0,r));var i={fromDashboard:!0};if(""!==a){var n=a.split("&");n.map(function(e,t){if(r=e.indexOf("="),r>0){var a=e.substring(0,r),n=e.substring(1+r);i[a]=n}})}o.browserHistory.push({pathname:t,query:i})},render:function(){var e=[],t=this.props.activeNode;return"undefined"!=typeof t&&this.props.navItems.map(function(a,r){"undefined"!=typeof a.childItems&&a.childItems.map(function(r,i){t===r.to&&e.push(a.to)})}),n.default.createElement(s.Layout,{style:{backgroundColor:"#fefefe",height:"100%"}},n.default.createElement(l,{collapsible:!0,collapsed:this.state.collapsed,onCollapse:this.onCollapse,className:"left-side"},n.default.createElement(s.Menu,{theme:"light",mode:this.state.mode,defaultOpenKeys:e,defaultSelectedKeys:[t],onClick:this.handleClick,className:"left-side"},this.props.navItems.map(function(e,t){var a="rgba(0,0,0,.65)",r=d.checkMenuPriv(e.to);if(2===r)a="red";else if(0===r)return null;if("undefined"==typeof e.childItems){var i="file";return"undefined"!=typeof e.icon&&(i=e.icon),n.default.createElement(s.Menu.Item,{key:e.to},n.default.createElement("span",{className:"red"===a?"errorHint":"nav-text"},n.default.createElement(s.Icon,{type:i}),n.default.createElement("span",null,e.name)))}var i="setting";"undefined"!=typeof e.icon&&(i=e.icon);var o=[];return e.childItems.map(function(e,t){var a="rgba(0,0,0,.65)",r=d.checkMenuPriv(e.to);2===r&&(a="red");var i="file";"undefined"!=typeof e.icon&&(i=e.icon),o.push(n.default.createElement(s.Menu.Item,{key:e.to},n.default.createElement("span",{className:"red"===a?"errorHint":"nav-text"},n.default.createElement(s.Icon,{type:i}),n.default.createElement("span",null,e.name))))}),0===o.length?null:n.default.createElement(u,{key:e.to,title:n.default.createElement("span",{style:{color:a}},n.default.createElement(s.Icon,{type:i}),n.default.createElement("span",null,e.name))},o)}))),n.default.createElement("div",{style:{height:"100%",width:"100%",overflowX:"hidden"}},this.props.children))}});p.propTypes=c,e.exports=p},24:function(e,t,a){"use strict";var r=a(1),i=r.createActions([{findName:{sync:!0}}]);e.exports=i},26:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=(r(i),a(17),a(3));e.exports=function(){return{getInitialState:function(){return{__actionName:"",__upUrl:"",__xlsFields:[],__xlsOptList:[],__xlsData:{},__xlsFile:null,__callback:null}},downXlsTempFile:function(e){var t=this;this.state.__actionName="down",this.state.__upUrl="",this.state.__xlsFields=[],this.state.__xlsOptList=[],this.state.__xlsData={},this.state.__xlsFile=null,this.state.__callback=null,e.map(function(e,a){var r=e.opts;if(void 0===r){var i={};n.copyValue(e,i),t.state.__xlsFields.push(i)}else t._addXlsField(e,t)}),this._doDownTempFile()},downXlsTempFile2:function(e,t,a){var r=this;this.state.__actionName="down2",this.state.__upUrl="",this.state.__xlsFields=[],this.state.__xlsOptList=[],this.state.__xlsData=JSON.stringify(t),this.state.__xlsFile=null,this.state.__callback=a,e.map(function(e,t){var a=e.opts;if(void 0===a){var i={};n.copyValue(e,i),r.state.__xlsFields.push(i)}else r._addXlsField(e,r)}),this._doDownTempFile()},uploadXlsFile:function(e,t,a,r,i){var o=this;this.state.__actionName="up",this.state.__upUrl=e,this.state.__xlsFields=[],this.state.__xlsOptList=[],this.state.__xlsData=t,this.state.__xlsFile=r,this.state.__callback=i,a.map(function(e,t){var a=e.opts;if(void 0===a){var r={};n.copyValue(e,r),o.state.__xlsFields.push(r)}else o._addXlsField(e,o)}),this._doUploadFile()},_addXlsField:function(e,t){var a={};a.id=e.id,a.name=e.name,a.title=e.title;var r=e.opts;if("#"!==r.charAt(0))return a.opts=r,void t.state.__xlsFields.push(a);r=r.substr(1);var i=r.indexOf(".");if(i<=0)return void t.state.__xlsFields.push(a);var o=r.substr(0,i),s=r.substr(1+i),l=n.loadOptions(o,s,t._onGetOptions);if(void 0!==l){var u=[];return l.codeData.map(function(e,t){u.push(e.codeValue+"="+e.codeDesc)}),a.opts=u.join(","),void t.state.__xlsFields.push(a)}t.state.__xlsFields.push(a);var d={name:s,field:a};t.state.__xlsOptList.push(d)},_onGetOptions:function(e,t){if(void 0!==t){var a=[];"down"===this.state.__actionName?e.codeData.map(function(e,t){a.push(e.codeDesc)}):"up"===this.state.__actionName&&e.codeData.map(function(e,t){a.push(e.codeValue+"="+e.codeDesc)});var r=!1,i=this.state.__xlsOptList;if(i.map(function(e,i){e.name===t&&null!==e.field&&(r=!0,e.field.opts=a.join(","),e.field=null)}),r){var n=this.state.__actionName;"down"===n||"down2"===n?this._doDownTempFile():"up"===n&&this._doUploadFile()}}},_doDownTempFile:function(){for(var e=this.state.__xlsOptList,t=e.length,a=0;a<t;a++)if(null!==e[a].field)return;var r=JSON.stringify(this.state.__xlsFields);if("down2"===this.state.__actionName)this.state.__callback.downFile(r,this.state.__xlsData);else{var i=n.paramUrl+"xlsx-file/down-temp?param="+encodeURI(r);if(void 0!==window.loginData){var o=window.loginData.compUser;null!==o&&""!==o.corpUuid&&void 0!==o.corpUuid&&(i=i+"&corp="+o.corpUuid)}window.location.href=i}},_doUploadFile:function(){for(var e=this.state.__xlsOptList,t=e.length,a=0;a<t;a++)if(null!==e[a].field)return void console.log("optList[i].field",e[a].field);var r={data:this.state.__xlsData,fields:this.state.__xlsFields},i=this.state.__upUrl,o=[this.state.__xlsFile],s=this.state.__callback;n.doUploadService(i,r,o).then(function(e){var t="",a=null;null==e.errCode||""==e.errCode||"000000"==e.errCode?a=e.object:t="导入数据错误["+e.errCode+"]["+e.errDesc+"]",void 0!==s&&null!==s&&s(t,a)},function(e){var t="上传文件错误";void 0!==s&&null!==s&&s(t,null)})}}}},27:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["retrieveCompUser","initCompUser"]);e.exports=i},28:function(e,t,a){e.exports=a(10)(1025)},29:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=a(2),s=r(o),l=a(5),u=(r(l),a(4)),d=a(1),c=u.Select.Option,p=a(35),h=a(27),f=s.default.createClass({displayName:"CompSelect",getInitialState:function(){return{compSet:{recordSet:[],operation:"",errMsg:""},loading:!1}},mixins:[d.listenTo(p,"onServiceComplete")],onServiceComplete:function(e){this.state.compSet=e,this.setState({loading:!1});var t=this.props.value,a=e.recordSet;if("retrieve"===e.operation&&""===e.errMsg&&a.length>0){var r=window.localStorage.corpUuid;t=void 0===r||""===r?a[0].corpUuid:r,this.props.onLoaded(t)}},loadCorps:function(){void 0!==localStorage.corpUuid&&""!==localStorage.corpUuid&&void 0!==localStorage.userName&&""!==localStorage.userName&&"retrieve"!==this.state.compSet.operation&&(this.setState({loading:!0}),h.initCompUser(localStorage.userName))},loadData:function(e){this.setState({compSet:{recordSet:[],operation:"",errMsg:""},loading:!0}),h.initCompUser(e)},render:function(){var e=this.props,t=e.value,a=i(e,["value"]),r=t,o=this.state.compSet.recordSet,l=(window.localStorage,o.map(function(e,t){return s.default.createElement(c,{key:e.corpUuid,value:e.corpUuid},e.compName)}));l.push(s.default.createElement(c,{key:"#",value:"#"},"个人用户"));var d=null===r||""===r?s.default.createElement(u.Select,n({},a,{placeholder:"选择用户登入的身份"}),l):s.default.createElement(u.Select,n({},a,{value:r}),l);return this.state.loading?s.default.createElement(u.Spin,null,d):d}});e.exports=f},32:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createCompUser","deleteCompUser","updateCompUser","retrieveCompUser","retrieveCompUserPage","initCompUser","getCompUser"]);e.exports=i},33:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(28),s=r(o),l=a(13),u=a(4),d=u.Layout.Header,c=u.Layout.Content,p=(u.Layout.Footer,a(22)),h=a(3),f={children:n.default.PropTypes.node,navItems:n.default.PropTypes.array,activeNode:n.default.PropTypes.string,offsetLeft:n.default.PropTypes.string,home:n.default.PropTypes.string},m=n.default.createClass({displayName:"TopBar",getInitialState:function(){return null},goHome:function(e){var t=this.props.home;null!==t&&"undefined"!=typeof t||(t="/main/DeskPage/"),h.setActiveMenuName(""),"@"===t.charAt(0)?document.location.href=t.substr(1):l.browserHistory.push({pathname:t})},handleMenuClick:function(e){"1"===e.key?l.browserHistory.push({pathname:"/main/passwd/"}):"2"===e.key?document.location.href="/index.html":console.log("handleMenuClick",e)},handleClick:function(e){var t=e.key,a="",r=t.indexOf("?");r>0&&(a=t.substring(1+r),t=t.substring(0,r));var i={fromDashboard:!0};if(""!==a){var n=a.split("&");n.map(function(e,t){if(r=e.indexOf("="),r>0){var a=e.substring(0,r),n=e.substring(1+r);i[a]=n}})}l.browserHistory.push({pathname:t,query:i})},render:function(){if((null===window.loginData||"undefined"==typeof window.loginData)&&!p.loadContext())return l.browserHistory.push({pathname:"/index.html"}),null;var e=n.default.createElement(u.Menu,{onClick:this.handleMenuClick},n.default.createElement(u.Menu.Item,{key:"1"},"修改密码"),n.default.createElement(u.Menu.Item,{key:"2"},"用户签退")),t=this.props.offsetLeft;null!==t&&"undefined"!=typeof t||(t="200px");var a=[this.props.activeNode];return n.default.createElement("div",{style:{width:"100%",height:"100%",padding:"38px 0 0"}},n.default.createElement(s.default,{titleTemplate:"隆正互联 - %s",title:"管理软件",defaultTitle:"管理软件",meta:[{name:"隆正互联"}]}),n.default.createElement(d,{style:{margin:"-38px 0 0",height:"38px",lineHeight:"38px",paddingLeft:"36px",paddingRight:"24px"}},n.default.createElement("div",{style:{float:"left",color:"#EFEFEF"}},"隆正软件"),n.default.createElement(u.Menu,{theme:"dark",mode:"horizontal",defaultSelectedKeys:a,onClick:this.handleClick,style:{lineHeight:"38px",float:"left",paddingLeft:t}},this.props.navItems.map(function(e,t){var a="hsla(0, 0%, 100%, .67)",r=h.checkMenuPriv(e.to);if(2===r)a="red";else if(0===r)return null;var i="file";return"undefined"!=typeof e.icon&&(i=e.icon),n.default.createElement(u.Menu.Item,{key:e.to},n.default.createElement("span",null,n.default.createElement(u.Icon,{type:i}),n.default.createElement("span",{className:"red"===a?"errorHint":"nav-text"},e.name)))})),n.default.createElement("div",{style:{float:"right",color:"#EFEFEF"}},n.default.createElement(u.Icon,{type:"home",onClick:this.goHome,title:"返回主页",style:{padding:"0 8px 0 0",cursor:"pointer"}}),n.default.createElement(u.Dropdown,{overlay:e},n.default.createElement(u.Icon,{type:"setting",style:{cursor:"pointer"}})))),n.default.createElement(c,{style:{width:"100%",height:"100%",padding:"0 0px"}},this.props.children))}});m.propTypes=f,e.exports=m},34:function(e,t,a){"use strict";var r=a(1),i=a(11),n=r.createStore({listenables:[i],init:function(){},onShowError:function(e,t,a){this.trigger({resName:e,operation:t,errMsg:a})}});e.exports=n},35:function(e,t,a){"use strict";var r=a(1),i=a(27),n=a(3),o=a(11),s=r.createStore({listenables:[i],username:"",recordSet:[],init:function(){},getServiceUrl:function(e){return n.authUrl+e},fireEvent:function(e,t,a){a.trigger({username:a.username,recordSet:a.recordSet,operation:e,errMsg:t}),o.showError("comp-user",e,t)},onRetrieveCompUser:function(e){var t=this,a={};a.username=e;var r=this.getServiceUrl("comp-user/get-by-username");n.doGetRecordService(r,a,t.startPage,t.pageRow,t.totalRow).then(function(a){null==a.errCode||""==a.errCode||"000000"==a.errCode?(t.recordSet=a.object.list,t.username=e,t.fireEvent("retrieve","",t)):t.fireEvent("retrieve","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("retrieve","调用服务错误",t)})},onInitCompUser:function(e){return this.recordSet.length>0&&this.username===e?void this.fireEvent("retrieve","",this):void this.onRetrieveCompUser(e)}});e.exports=s},37:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(7)),u=(r(l),a(4),a(3),n.default.createClass({displayName:"LogoutPage",getInitialState:function(){return{loading:!1}},componentDidMount:function(){},render:function(){return n.default.createElement("div",{className:"grid-page"},"用户签退")}}));e.exports=u},38:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(8),l=(r(s),a(5)),u=(r(l),a(4)),d=a(18),c=r(d),p=u.Form.Item,h=a(6),f=a(3),m=o.default.createClass({displayName:"PasswdPage",getInitialState:function(){return{passwd:{oldPasswd:"",newPasswd:"",confirmPad:""},loading:!1,hints:{},errMsg:"",validRules:[]}},componentDidMount:function(){this.state.validRules=[{id:"oldPasswd",desc:"原密码",required:!0,max:"16"},{id:"newPasswd",desc:"新密码",required:!0,max:"16"}]},handleOnChange:function(e){var t=this.state.passwd;t[e.target.id]=e.target.value,h.validator(this,t,e.target.id),this.setState({passwd:t})},clickUpdatePwd:function(e){if(this.state.errMsg="",h.formValidator(this,this.state.passwd)){var t=f.authUrl+"auth-user/update-pwd",a={},r=this.state.passwd.oldPasswd,i=this.state.passwd.newPasswd,n=this.state.passwd.confirmPad;i!=n?h.warnMsg("两次输入需要一致！"):(a.oldPasswd=r,a.newPasswd=i);var o=this;f.doUpdateService(t,a).then(function(e,t,a){null==e.errCode||""==e.errCode||"000000"==e.errCode?h.succMsg("密码修改成功！"):o.showError("处理错误["+e.errCode+"]["+e.errDesc+"]")},function(e,t,a){o.showError("未知错误")})}},showError:function(e){this.setState({errMsg:e})},onDismiss:function(){this.setState({errMsg:""})},render:function(){var e=this.state.errMsg,t=this.state.hints,a="vertical",r="form-item-"+a,n={labelCol:"vertical"==a?null:{span:0},wrapperCol:"vertical"==a?null:{span:24}};return o.default.createElement("div",{style:{width:"100%"}},o.default.createElement("div",{style:{width:"300px",paddingTop:"100px",margin:"0 auto"}},o.default.createElement("div",{style:{width:"100%",height:"40px",lineHeight:"40px",fontSize:"16px",textAlign:"center",marginBottom:"10px"}},"修改密码"),o.default.createElement(u.Form,{layout:a},o.default.createElement(p,i({},n,{label:"",colon:!0,style:{marginBottom:"20px"},help:t.oldPasswdHint,validateStatus:t.oldPasswdStatus}),o.default.createElement(u.Input,{prefix:o.default.createElement(u.Icon,{type:"lock",style:{fontSize:13}}),placeholder:"原密码",type:"text",name:"oldPasswd",id:"oldPasswd",value:this.state.passwd.oldPasswd,onChange:this.handleOnChange})),o.default.createElement(p,i({},n,{label:"",colon:!0,style:{marginBottom:"20px"},className:r,help:t.newPasswdHint,validateStatus:t.newPasswdStatus}),o.default.createElement(u.Input,{prefix:o.default.createElement(u.Icon,{type:"lock",style:{fontSize:13}}),placeholder:"新密码",type:"text",name:"newPasswd",id:"newPasswd",value:this.state.passwd.newPasswd,onChange:this.handleOnChange})),o.default.createElement(p,i({},n,{label:"",colon:!0,style:{marginBottom:"20px"},className:r,help:t.confirmPadHint,validateStatus:t.confirmPadStatus}),o.default.createElement(u.Input,{prefix:o.default.createElement(u.Icon,{type:"lock",style:{fontSize:13}}),placeholder:"确认密码",type:"text",name:"confirmPad",id:"confirmPad",value:this.state.passwd.confirmPad,onChange:this.handleOnChange})),o.default.createElement(p,null,o.default.createElement(c.default,{message:e,toggle:this.onDismiss}),o.default.createElement(u.Button,{key:"btnOK",onClick:this.clickUpdatePwd,size:"large",type:"primary",loading:this.state.loading,style:{width:"100%"}},"确认修改")))))}});e.exports=m},39:function(e,t,a){"use strict";var r=a(57),i=a(41),n=a(60);r.inject();var o={renderToString:i.renderToString,renderToStaticMarkup:i.renderToStaticMarkup,version:n};e.exports=o},40:function(e,t){"use strict";var a={isBatchingUpdates:!1,batchedUpdates:function(e){}};e.exports=a},41:function(e,t,a){"use strict";function r(e,t){var a;try{return f.injection.injectBatchingStrategy(p),a=h.getPooled(t),v++,a.perform(function(){var r=g(e,!0),i=c.mountComponent(r,a,null,l(),m,0);return t||(i=d.addChecksumToMarkup(i)),i},null)}finally{v--,h.release(a),v||f.injection.injectBatchingStrategy(u)}}function i(e){return s.isValidElement(e)?void 0:o("46"),r(e,!1)}function n(e){return s.isValidElement(e)?void 0:o("47"),r(e,!0)}var o=a(44),s=a(49),l=a(55),u=a(56),d=(a(45),a(58)),c=a(54),p=a(40),h=a(59),f=a(46),m=a(48),g=a(47),v=(a(43),0);e.exports={renderToString:i,renderToStaticMarkup:n}},42:function(e,t,a){"use strict";e.exports=a(39)},43:function(e,t,a){e.exports=a(10)(13)},44:function(e,t,a){e.exports=a(10)(14)},45:function(e,t,a){e.exports=a(10)(36)},46:function(e,t,a){e.exports=a(10)(40)},47:function(e,t,a){e.exports=a(10)(468)},48:function(e,t,a){e.exports=a(10)(473)},49:function(e,t,a){e.exports=a(10)(48)},50:function(e,t,a){e.exports=a(10)(761)},51:function(e,t,a){e.exports=a(10)(762)},52:function(e,t,a){e.exports=a(10)(784)},53:function(e,t,a){e.exports=a(10)(799)},54:function(e,t,a){e.exports=a(10)(82)},55:function(e,t,a){e.exports=a(10)(966)},56:function(e,t,a){e.exports=a(10)(976)},57:function(e,t,a){e.exports=a(10)(977)},58:function(e,t,a){e.exports=a(10)(982)},59:function(e,t,a){e.exports=a(10)(988)},60:function(e,t,a){e.exports=a(10)(990)},61:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=(a(13),n.default.createClass({displayName:"IndexPage",getInitialState:function(){return null},render:function(){return console.log(this.props.location),n.default.createElement("div",null,n.default.createElement("h1",null,"404 - Not Found"))}}));e.exports=o},65:function(e,t,a){e.exports=a(10)(3)},66:function(e,t,a){"use strict";var r=a(1),i=a(32),n=a(3),o=a(11),s=r.createStore({listenables:[i],deptUuid:"",filter:{},recordSet:[],startPage:0,pageRow:0,totalRow:0,init:function(){},getServiceUrl:function(e){return n.authUrl+e},fireEvent:function(e,t,a){a.trigger({deptUuid:a.deptUuid,filter:a.filter,recordSet:a.recordSet,startPage:a.startPage,pageRow:a.pageRow,totalRow:a.totalRow,operation:e,errMsg:t}),o.showError("comp-user",e,t)},onRetrieveCompUser:function(e){var t=e.deptUuid,a=this,r=this.getServiceUrl("comp-user/retrieve");n.doRetrieveService(r,e,a.startPage,a.pageRow,a.totalRow).then(function(r){null==r.errCode||""==r.errCode||"000000"==r.errCode?(a.recordSet=r.object.list,a.startPage=r.object.startPage,a.pageRow=r.object.pageRow,a.totalRow=r.object.totalRow,a.deptUuid=t,a.filter=e,a.fireEvent("retrieve","",a)):a.fireEvent("retrieve","处理错误["+r.errCode+"]["+r.errDesc+"]",a)},function(e){a.fireEvent("retrieve","调用服务错误",a)})},onRetrieveCompUserPage:function(e,t,a){this.startPage=t,this.pageRow=a,this.onRetrieveCompUser(e)},onInitCompUser:function(e,t,a){return this.recordSet.length>0&&n.compareTo(this.filter,e)?void this.fireEvent("retrieve","",this):(this.totalRow=0,void this.onRetrieveCompUserPage(e,t,a))},onCreateCompUser:function(e){var t=this.getServiceUrl("comp-user/create");n.recordCreate(this,e,t)},onUpdateCompUser:function(e){var t=this.getServiceUrl("comp-user/update");n.recordUpdate(this,e,t)},onDeleteCompUser:function(e){var t=this.getServiceUrl("comp-user/remove");n.recordDelete(this,e,t)},fireEvent2:function(e,t,a){a.trigger({corpUser:e,operation:"find",errMsg:t}),o.showError("comp-user","find",t)},onGetCompUser:function(e,t){var a=this,r={};r.username=t;var i=this.getServiceUrl("comp-user/get-by-username");n.doGetRecordService(i,r).then(function(t){if(null==t.errCode||""==t.errCode||"000000"==t.errCode){for(var r="",i=null,n=t.object.list,o=n.length,s=0;s<o;s++){var l=n[s];if(l.corpUuid===e){i=l,r="用户已经存在";break}}a.fireEvent2(i,r,a)}else a.fireEvent2(null,"处理错误["+t.errCode+"]["+t.errDesc+"]",a)},function(e){a.fireEvent2(null,"调用服务错误",a)})}});e.exports=s},73:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createUserGroup","deleteUserGroup","updateUserGroup","retrieveUserGroup","retrieveUserGroupPage","initUserGroup"]);e.exports=i},74:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createAuthUser","updateAuthUser","getAuthUser"]);e.exports=i},78:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=a(2),s=r(o),l=a(4),u={children:s.default.PropTypes.node,caption:s.default.PropTypes.string,toolbar:s.default.PropTypes.object,dataSource:s.default.PropTypes.array,rowKey:s.default.PropTypes.string,title:s.default.PropTypes.string,rowStyle:s.default.PropTypes.object,loading:s.default.PropTypes.bool,activeNode:s.default.PropTypes.string,render:s.default.PropTypes.func,onClick:s.default.PropTypes.func},d=s.default.createClass({displayName:"LeftList",getInitialState:function(){return{current:this.props.activeNode,onClick:this.props.onClick}},componentWillReceiveProps:function(e){this.state.current=e.activeNode},handleClick:function(e,t,a){null!==this.state.onClick&&"undefined"!=typeof this.state.onClick&&(this.setState({current:t}),this.state.onClick(e))},crtNode:function(e,t,a,r){var i=null===t||"undefined"==typeof t?e.uuid:e[t],n=i===this.state.current?"ant-menu-item-selected ant-menu-item":"ant-menu-item-active ant-menu-item";return s.default.createElement("li",{className:n,id:i,key:i,onClick:this.handleClick.bind(this,e,i),style:{paddingLeft:"20px",height:"30px",lineHeight:"30px"}},s.default.createElement(l.Icon,{type:"play-circle-o"}),e[a])},render:function(){var e=this,t=this.props,a=(t.children,t.caption),r=t.toolbar,o=t.width,u=t.dataSource,d=t.rowKey,c=t.rowText,p=t.rowStyle,h=(t.activeNode,t.render,t.onClick,t.loading),f=i(t,["children","caption","toolbar","width","dataSource","rowKey","rowText","rowStyle","activeNode","render","onClick","loading"]);if(null===u||"undefined"==typeof u){var m=s.default.createElement("div",{className:"left-list",style:{flex:"0 0 "+o,width:o}},r,s.default.createElement("div",null,"暂时无数据"));return s.default.createElement("div",n({style:{display:"flex",height:"100%"}},f),h?s.default.createElement(l.Spin,{style:{minHeight:"200px"}},m):m,s.default.createElement("div",{style:{width:"100%"}},this.props.children))}var m=s.default.createElement("ul",{className:"ant-menu ant-menu-inline ant-menu-light ant-menu-root"},u.map(function(t,a){return e.crtNode(t,d,c,p)}));return s.default.createElement("div",n({style:{display:"flex",height:"100%"}},f),s.default.createElement("div",{className:"left-list",style:{flex:"0 0 "+o,width:o,overflowY:"auto"}},r,null===a||"undefined"==typeof a?null:s.default.createElement("div",{className:"ant-menu-item-group-title"},a),h?s.default.createElement(l.Spin,{style:{minHeight:"200px"}},m):m),s.default.createElement("div",{style:{width:"100%",height:"100%",overflowX:"hidden"}},this.props.children))}});d.propTypes=u,e.exports=d},93:function(e,t,a){"use strict";var r=a(1),i=a(73),n=a(3),o=a(11),s=r.createStore({listenables:[i],corpUuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,init:function(){},getServiceUrl:function(e){return n.authUrl+e},fireEvent:function(e,t,a){a.trigger({compUser:a.compUser,corpUuid:a.corpUuid,recordSet:a.recordSet,startPage:a.startPage,pageRow:a.pageRow,totalRow:a.totalRow,operation:e,errMsg:t}),o.showError("user-group",e,t)},onRetrieveUserGroup:function(e,t){var a=this,r={};r.corpUuid=e;var i=this.getServiceUrl("user-group/retrieve");n.doRetrieveService(i,r,a.startPage,a.pageRow,a.totalRow).then(function(t){null==t.errCode||""==t.errCode||"000000"==t.errCode?(a.recordSet=t.object.list,a.startPage=t.object.startPage,a.pageRow=t.object.pageRow,a.totalRow=t.object.totalRow,a.corpUuid=e,a.fireEvent("retrieve","",a)):a.fireEvent("retrieve","处理错误["+t.errCode+"]["+t.errDesc+"]",a)},function(e){a.fireEvent("retrieve","调用服务错误",a)})},onRetrieveUserGroupPage:function(e,t,a){this.startPage=t,this.pageRow=a,this.onRetrieveUserGroup(e)},onInitUserGroup:function(e){return this.recordSet.length>0&&this.corpUuid===e?void this.fireEvent("retrieve","",this):void this.onRetrieveUserGroup(e)},onCreateUserGroup:function(e){var t=this.getServiceUrl("user-group/create");n.recordCreate(this,e,t)},onUpdateUserGroup:function(e){var t=this.getServiceUrl("user-group/update");n.recordUpdate(this,e,t)},onDeleteUserGroup:function(e){var t=this.getServiceUrl("user-group/remove");n.recordDelete(this,e,t)}});e.exports=s},94:function(e,t,a){"use strict";var r=a(1),i=a(74),n=a(3),o=a(11),s=r.createStore({listenables:[i],authUser:{},init:function(){},getServiceUrl:function(e){return n.authUrl+e},fireEvent:function(e,t,a){a.trigger({authUser:a.authUser,operation:e,errMsg:t}),o.showError("auth-user",e,t)},onGetAuthUser:function(e,t){var a=this,r={};r.idType=e,r.idCode=t;var i=this.getServiceUrl("auth-user/get-by-idCode");n.doGetRecordService(i,r).then(function(e){null==e.errCode||""==e.errCode||"000000"==e.errCode?(a.authUser=e.object,a.fireEvent("find","",a)):a.fireEvent("find","处理错误["+e.errCode+"]["+e.errDesc+"]",a)},function(e){a.fireEvent("find","调用服务错误",a)})},onCreateAuthUser:function(e){var t=this,a=this.getServiceUrl("auth-user/create");n.doCreateService(a,e).then(function(e){null==e.errCode||""==e.errCode||"000000"==e.errCode?(t.authUser=e.object,t.fireEvent("create","",t)):t.fireEvent("create","处理错误["+e.errCode+"]["+e.errDesc+"]",t)},function(e){t.fireEvent("create","调用服务错误",t)})},onUpdateAuthUser:function(e){var t=this,a=this.getServiceUrl("auth-user/update");n.doUpdateService(a,e).then(function(e){null==e.errCode||""==e.errCode||"000000"==e.errCode?(t.authUser=e.object,t.fireEvent("update","",t)):t.fireEvent("update","处理错误["+e.errCode+"]["+e.errDesc+"]",t)},function(e){t.fireEvent("update","调用服务错误",t)})}});e.exports=s},103:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createFntAppRole","deleteFntAppRole","updateFntAppRole","retrieveFntAppRole","initFntAppRole"]);e.exports=i},104:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);
return a}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=a(2),s=r(o),l=a(5),u=(r(l),a(4)),d=a(1),c=u.Select.Option,p=a(93),h=a(73),f=s.default.createClass({displayName:"CompUserSelect",getInitialState:function(){return{compUserSet:{recordSet:[],errMsg:"",operation:""},loading:!1}},mixins:[d.listenTo(p,"onServiceComplete")],onServiceComplete:function(e){"retrieve"===e.operation&&(this.state.compUserSet=e,this.setState({loading:!1}))},componentDidMount:function(){this.state.compUserSet={recordSet:[],errMsg:"",operation:""},this.setState({loading:!0});var e=this.props.corpUuid;e&&h.initUserGroup(e)},render:function(){var e=this.props,t=(e.required,i(e,["required"]),this.state.compUserSet.recordSet),a=t.map(function(e,t){return s.default.createElement(c,{key:e.uuid,value:e.groupName},e.groupName)});a.push(s.default.createElement(c,{key:"*",value:"*"},"所有用户"));var r=s.default.createElement(u.Select,n({mode:"multiple",style:{width:"100%"}},this.props),a);return this.state.loading?s.default.createElement(u.Spin,null,r):r}});t.default=f},119:function(e,t,a){"use strict";var r=a(1),i=a(103),n=a(3),o=a(11),s=r.createStore({listenables:[i],appUuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,init:function(){},getServiceUrl:function(e){return n.authUrl+e},fireEvent:function(e,t,a){a.trigger({appUuid:a.appUuid,recordSet:a.recordSet,startPage:a.startPage,pageRow:a.pageRow,totalRow:a.totalRow,operation:e,errMsg:t}),o.showError("fnt_app_role",e,t)},onRetrieveFntAppRole:function(e){var t=this,a={};a.appUuid=e;var r=this.getServiceUrl("fnt_app_role/get-by-appuuid");n.doRetrieveService(r,a,t.startPage,t.pageRow,t.totalRow).then(function(a){null==a.errCode||""==a.errCode||"000000"==a.errCode?(t.recordSet=a.object.list,t.startPage=a.object.startPage,t.pageRow=a.object.pageRow,t.totalRow=a.object.totalRow,t.appUuid=e,t.fireEvent("retrieve","",t)):t.fireEvent("retrieve","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("retrieve","调用服务错误",t)})},onInitFntAppRole:function(e){return this.recordSet.length>0&&this.appUuid===e?void this.fireEvent("retrieve","",this):void this.onRetrieveFntAppRole(e)},onCreateFntAppRole:function(e){var t=this.getServiceUrl("fnt_app_role/create");n.recordCreate(this,e,t)},onUpdateFntAppRole:function(e){var t=this.getServiceUrl("fnt_app_role/update");n.recordUpdate(this,e,t)},onDeleteFntAppRole:function(e){var t=this.getServiceUrl("fnt_app_role/remove");n.recordDelete(this,e,t)}});e.exports=s},128:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createFntApp","deleteFntApp","updateFntApp","retrieveFntApp","initFntApp"]);e.exports=i},138:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=r(s),u=a(4),d=a(12),c=r(d),p=a(104),h=r(p),f=a(1),m=u.Form.Item,g=(u.Select.Option,a(6)),v=a(66),S=a(32),y=o.default.createClass({displayName:"CompUserPage",getInitialState:function(){return{compUserSet:{operation:"",errMsg:""},hints:{},validRules:[]}},componentDidMount:function(){this.state.validRules=[]},clear:function(e,t){this.state.hints={}},handleOnChange:function(e){var t=this.props.compUser;t[e.target.id]=e.target.value,g.validator(this,t,e.target.id),this.setState({compUserSet:this.state.compUserSet})},handleOnSelected:function(e,t,a){var r=this.props.compUser;r[e]=t,g.validator(this,r,e),this.setState({compUserSet:this.state.compUserSet})},onClickSave:function(){return!!g.formValidator(this,this.props.compUser)&&(S.createCompUser(this.props.compUser),!0)},selectCompUser:function(e){var t=this.props.compUser,a=t.userGroup?t.userGroup.split(","):[];a.push(e),t.userGroup=a.join(","),this.setState({loading:this.state.loading})},deSelectCompUser:function(e){for(var t=this.props.compUser,a=t.userGroup.split(","),r=0;r<a.length;r++)if(a[r]===e){a.splice(r,1);break}t.userGroup=a.join(","),this.setState({loading:this.state.loading})},render:function(){var e="horizontal",t="form-item-"+e,a={labelCol:"vertical"==e?null:{span:4},wrapperCol:"vertical"==e?null:{span:20}},r=this.props.corpUuid,n=this.props.compUser.userGroup?this.props.compUser.userGroup.split(","):[],s=this.state.hints;return o.default.createElement(u.Form,{layout:e},o.default.createElement(m,i({},a,{label:"用户名",colon:!0,className:t,help:s.userNameHint,validateStatus:s.userNameStatus}),o.default.createElement(u.Input,{type:"text",name:"userName",id:"userName",readOnly:"true",value:this.props.compUser.userName,onChange:this.handleOnChange})),o.default.createElement(m,i({},a,{label:"用户姓名",colon:!0,className:t,help:s.perNameHint,validateStatus:s.perNameStatus}),o.default.createElement(u.Input,{type:"text",name:"perName",id:"perName",readOnly:"true",value:this.props.compUser.perName,onChange:this.handleOnChange})),o.default.createElement(m,i({},a,{label:"用户类型",colon:!0,className:t,help:s.userTypeHint,validateStatus:s.userTypeStatus}),o.default.createElement(c.default,{name:"userType",id:"userType",appName:"用户管理",optName:"用户类型",value:this.props.compUser.userType,onSelect:this.handleOnSelected.bind(this,"userType")})),o.default.createElement(m,i({},a,{label:"员工编号",colon:!0,className:t,help:s.userCodeHint,validateStatus:s.userCodeStatus}),o.default.createElement(u.Input,{type:"text",name:"userCode",id:"userCode",value:this.props.compUser.userCode,onChange:this.handleOnChange})),o.default.createElement(m,i({},a,{label:"职务",colon:!0,className:t,help:s.userTitleHint,validateStatus:s.userTitleStatus}),o.default.createElement(u.Input,{type:"text",name:"userTitle",id:"userTitle",value:this.props.compUser.userTitle,onChange:this.handleOnChange})),o.default.createElement(m,i({},a,{label:"用户组",colon:!0,className:t,help:s.userGroupHint,validateStatus:s.userGroupStatus}),o.default.createElement(h.default,{corpUuid:r,name:"userGroup",id:"userGroup",value:n,onSelect:this.selectCompUser,onDeselect:this.deSelectCompUser})))}});l.default.onClass(y,f.connect(v,"compUserSet")),t.default=y},139:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=(r(s),a(12)),u=r(l),d=a(4),c=a(1),p=a(6),h=d.Form.Item,f=(d.Select.Option,a(94)),m=a(74),g=a(66),v=a(32),S=o.default.createClass({displayName:"FindUserPage",getInitialState:function(){return{authUserSet:{authUser:{},errMsg:""},loading:!1,btnNext:!1,isExist:!1,hints:{},validRules:[],lastIdType:"",lastIdCode:""}},mixins:[c.listenTo(f,"onAuthUserComplete"),c.listenTo(g,"onCompUserComplete")],onAuthUserComplete:function(e){if("find"===e.operation){var t=this.props.authUser;this.state.lastIdType=t.idType,this.state.lastIdCode=t.idCode,"staff"!==this.props.from&&"out"!==this.props.from&&(t.email="",t.phoneno="",t.userName="",t.perName=""),this.state.isExist=!1;var a=e.authUser;if(null!==a&&"undefined"!=typeof a){var r=a.userId;""!==r&&null!==r&&"undefined"!=typeof r&&(this.state.isExist=!0)}if(this.state.isExist)"staff"!==this.props.from&&"out"!==this.props.from||t.perName!==a.perName&&p.warnMsg("用户已经存在，但是姓名不一致["+t.perName+"]["+a.perName+"]"),t.email=a.email,t.phoneno=a.phoneno,t.passwd=a.passwd,""===e.errMsg&&(t.userName=a.userName,t.perName=a.perName);else{var i=t.idType;"电子邮箱"===i?t.email=t.idCode:"手机号"===i&&(t.phoneno=t.idCode),t.passwd="11111111"}this.setState({loading:this.state.isExist,authUserSet:e}),this.state.isExist&&v.getCompUser(this.props.corpUuid,a.userName)}},onCompUserComplete:function(e){"find"===e.operation&&this.setState({loading:!1})},componentDidMount:function(){this.state.validRules=[{id:"idCode",desc:"身份内容",required:!0,max:64},{id:"userName",desc:"用户名",required:!0,max:24},{id:"passwd",desc:"密码",required:!0},{id:"perName",desc:"用户姓名",required:!0,max:32},{id:"phoneno",desc:"电话",required:!0,dataType:"mobile",max:32},{id:"email",desc:"电子邮箱",required:!0,dataType:"email",max:32}],"staff"!==this.props.from&&"out"!==this.props.from||this.findAuthUser()},clear:function(){this.state.hints={},this.state.lastIdType="",this.state.lastIdCode=""},handleOnChange:function(e){var t=this.props.authUser;t[e.target.id]=e.target.value,p.validator(this,t,e.target.id),this.setState({authUserSet:this.state.authUserSet})},handleOnSelected:function(e,t,a){var r=this.props.authUser;r[e]=t,this.findAuthUser()||this.setState({authUserSet:this.state.authUserSet})},onIdCodeFinished:function(e){this.findAuthUser()},findAuthUser:function(){if(this.state.lastIdType!==this.props.authUser.idType||this.state.lastIdCode!==this.props.authUser.idCode){this.state.authUserSet.authUser={},this.state.authUserSet.errMsg="",this.state.btnNext=!1;var e=this.props.authUser,t=e.idType,a=e.idCode;return""!==t&&null!==t&&"undefined"!=typeof t&&(""!==a&&null!==a&&"undefined"!=typeof a&&("身份证"===t?this.state.validRules[0].dataType="idcard18":"电子邮箱"===t?this.state.validRules[0].dataType="email":"手机号"===t?this.state.validRules[0].dataType="mobile":this.state.validRules[0].dataType="",p.validator(this,e,"idCode")?(this.setState({loading:!0}),this.state.btnNext=!0,m.getAuthUser(t,a),!0):(this.setState({authUserSet:this.state.authUserSet}),!0)))}},onClickSave:function(){return this.state.btnNext?this.state.isExist?1:p.formValidator(this,this.props.authUser)?(m.createAuthUser(this.props.authUser),2):0:(p.setError(this,"idCode","请输入身份信息"),0)},render:function(){var e="horizontal",t="form-item-"+e,a={labelCol:"vertical"==e?null:{span:4},wrapperCol:"vertical"==e?null:{span:20}},r=this.state.hints,n=o.default.createElement(d.Form,{layout:e},o.default.createElement(h,i({},a,{label:"身份类型",required:!0,colon:!0,className:t,help:r.idTypeHint,validateStatus:r.idTypeStatus}),o.default.createElement(u.default,{name:"idType",id:"idType",appName:"用户管理",optName:"身份类型",value:this.props.authUser.idType,onSelect:this.handleOnSelected.bind(this,"idType")})),o.default.createElement(h,i({},a,{label:"身份内容",required:!0,colon:!0,className:t,help:r.idCodeHint,validateStatus:r.idCodeStatus}),o.default.createElement(d.Input,{type:"text",name:"idCode",id:"idCode",value:this.props.authUser.idCode,onChange:this.handleOnChange,onBlur:this.onIdCodeFinished})),o.default.createElement(h,i({},a,{label:"用户名",required:!0,colon:!0,className:t,help:r.userNameHint,validateStatus:r.userNameStatus}),o.default.createElement(d.Input,{type:"text",name:"userName",id:"userName",value:this.props.authUser.userName,onChange:this.handleOnChange})),o.default.createElement(h,i({},a,{label:"用户姓名",required:!0,colon:!0,className:t,help:r.perNameHint,validateStatus:r.perNameStatus}),o.default.createElement(d.Input,{type:"text",name:"perName",id:"perName",value:this.props.authUser.perName,onChange:this.handleOnChange})),o.default.createElement(h,i({},a,{label:"电话",required:!0,colon:!0,className:t,help:r.phonenoHint,validateStatus:r.phonenoStatus}),o.default.createElement(d.Input,{type:"text",name:"phoneno",id:"phoneno",value:this.props.authUser.phoneno,onChange:this.handleOnChange})),o.default.createElement(h,i({},a,{label:"电子邮箱",required:!0,colon:!0,className:t,help:r.emailHint,validateStatus:r.emailStatus}),o.default.createElement(d.Input,{type:"text",name:"email",id:"email",value:this.props.authUser.email,onChange:this.handleOnChange})),this.state.isExist?null:o.default.createElement(h,i({},a,{label:"密码",required:!0,colon:!0,className:t,help:r.passwdHint,validateStatus:r.passwdStatus}),o.default.createElement(d.Input,{type:"text",name:"passwd",id:"passwd",value:this.props.authUser.passwd,onChange:this.handleOnChange})));return this.state.loading?o.default.createElement(d.Spin,{tip:"检查用户是否已经存在..."},n):n}});t.default=S},157:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createAppAuth","deleteAppAuth","updateAppAuth","retrieveAppAuth","initAppAuth","getUserByUuid"]);e.exports=i},158:function(e,t,a){"use strict";function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var i,n=a(1),o=a(128),s=a(3),l=a(11),u=n.createStore((i={listenables:[o],uuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,init:function(){},getServiceUrl:function(e){return s.authUrl+e},fireEvent:function(e,t,a){a.trigger({uuid:a.uuid,recordSet:a.recordSet,startPage:a.startPage,pageRow:a.pageRow,totalRow:a.totalRow,operation:e,errMsg:t}),l.showError("fnt-app",e,t)},onRetrieveFntApp:function(e){var t=this,a={};a.uuid=e;var r=this.getServiceUrl("fnt-app/retrieve");s.doRetrieveService(r,a,t.startPage,t.pageRow,t.totalRow).then(function(a){null==a.errCode||""==a.errCode||"000000"==a.errCode?(t.recordSet=a.object.list,t.startPage=a.object.startPage,t.pageRow=a.object.pageRow,t.totalRow=a.object.totalRow,t.uuid=e,t.fireEvent("retrieve","",t)):t.fireEvent("retrieve","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("retrieve","调用服务错误",t)})},onRetrieveFntAppPage:function(e,t,a){var r=this;r.startPage=t,r.pageRow=a;var i={};i.uuid=e;var n=this.getServiceUrl("fnt-app/retrieve");s.doRetrieveService(n,i,r.startPage,r.pageRow,r.totalRow).then(function(t){null==t.errCode||""==t.errCode||"000000"==t.errCode?(r.recordSet=t.object.list,r.startPage=t.object.startPage,r.pageRow=t.object.pageRow,r.totalRow=t.object.totalRow,r.uuid=e,r.fireEvent("retrieve","",r)):r.fireEvent("retrieve","处理错误["+t.errCode+"]["+t.errDesc+"]",r)},function(e){r.fireEvent("retrieve","调用服务错误",r)})}},r(i,"onRetrieveFntAppPage",function(e,t,a){this.startPage=t,this.pageRow=a,this.onRetrieveFntApp(e)}),r(i,"onInitFntApp",function(e){return this.recordSet.length>0&&this.uuid===e?void this.fireEvent("retrieve","",this):void this.onRetrieveFntApp(e)}),r(i,"onCreateFntApp",function(e){var t=this.getServiceUrl("fnt-app/create");s.recordCreate(this,e,t)}),r(i,"onUpdateFntApp",function(e){var t=this.getServiceUrl("fnt-app/update");s.recordUpdate(this,e,t)}),r(i,"onDeleteFntApp",function(e){var t=this.getServiceUrl("fnt-app/remove");s.recordDelete(this,e,t)}),i));e.exports=u},205:function(e,t,a){"use strict";var r=a(1),i=a(157),n=a(3),o=(a(6),a(11)),s=r.createStore({listenables:[i],filter:null,object:null,startPage:0,pageRow:0,totalRow:0,compUser:null,init:function(){},getServiceUrl:function(e){return n.authUrl+e},fireEvent:function(e,t,a){a.trigger({filter:a.filter,object:a.object,compUser:a.compUser,operation:e,errMsg:t}),o.showError("app-auth1",e,t)},onRetrieveAppAuth:function(e){var t=this,a=this.getServiceUrl("app-auth1/retrieve");n.doRetrieveService(a,e,t.startPage,t.pageRow,t.totalRow).then(function(a){null==a.errCode||""==a.errCode||"000000"==a.errCode?(t.object=a.object,t.filter=e,t.fireEvent("retrieve","",t)):t.fireEvent("retrieve","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("retrieve","调用服务错误",t)})},onInitAppAuth:function(e){return this.object&&n.compareTo(this.filter,e)?void this.fireEvent("retrieve","",this):void this.onRetrieveAppAuth(e)},onCreateAppAuth:function(e){var t=this,a=this.getServiceUrl("app-auth1/create");n.doCreateService(a,e).then(function(a){null==a.errCode||""==a.errCode||"000000"==a.errCode?(t.object=a.object,t.filter=e,null!==t.compUser&&(null===t.compUser.appAuthList&&(t.compUser.appAuthList=[]),t.compUser.appAuthList.push(t.object)),t.fireEvent("create","",t)):t.fireEvent("create","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("create","调用服务错误",t)})},onUpdateAppAuth:function(e){var t=this,a=this.getServiceUrl("app-auth1/update");n.doUpdateService(a,e).then(function(a){if(null==a.errCode||""==a.errCode||"000000"==a.errCode){if(t.object=a.object,t.filter=e,null!==t.compUser)for(var r=t.object.appUuid,i=t.compUser.appAuthList.length,o=0;o<i;o++)if(t.compUser.appAuthList[o].appUuid===r){n.copyValue(t.object,t.compUser.appAuthList[o]);break}t.fireEvent("update","",t)}else t.fireEvent("update","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("update","调用服务错误",t)})},onDeleteAppAuth:function(e){var t=this,a=this.getServiceUrl("app-auth1/remove");n.doRemoveService(a,e).then(function(a){if(null==a.errCode||""==a.errCode||"000000"==a.errCode){if(null!==t.compUser&&null!==t.compUser.appAuthList)for(var r=e.appUuid,i=t.compUser.appAuthList.length,n=0;n<i;n++)if(t.compUser.appAuthList[n].appUuid===r){t.compUser.appAuthList.splice(n,1);break}t.object=null,t.filter=e,t.fireEvent("delete","",t)}else t.fireEvent("delete","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("delete","调用服务错误",t)})},onGetUserByUuid:function(e){var t=this;this.compUser=null;var a=this.getServiceUrl("comp-user/get-by-uuid");n.doGetRecordService(a,e).then(function(e){if(null==e.errCode||""==e.errCode||"000000"==e.errCode){if(t.compUser=e.object,null!==t.compUser.appAuthList)for(var a=t.compUser.appAuthList.length,r=a-1;r>=0;r--)null===t.compUser.appAuthList[r]&&t.compUser.appAuthList.splice(r,1);t.fireEvent("find","",t)}else t.fireEvent("find","处理错误["+e.errCode+"]["+e.errDesc+"]",t)},function(e){t.fireEvent("find","调用服务错误",t)})}});e.exports=s},208:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createUserPriv","deleteUserPriv","updateUserPriv","retrieveUserPriv","retrieveUserPrivPage","initUserPriv"]);e.exports=i},244:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createAuthDept","deleteAuthDept","updateAuthDept","retrieveAuthDept","retrieveAuthDeptPage","initAuthDept"]);e.exports=i},282:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),n=r(i);t.default=function(){return n.default.createElement("div",null,n.default.createElement("h1",null,"û���ҵ�ҳ��"))}},306:function(e,t,a){"use strict";var r=a(1),i=a(244),n=a(3),o=a(11),s=r.createStore({listenables:[i],corpUuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,init:function(){},getServiceUrl:function(e){return n.authUrl+e},fireEvent:function(e,t,a){a.trigger({corpUuid:a.corpUuid,recordSet:a.recordSet,startPage:a.startPage,pageRow:a.pageRow,totalRow:a.totalRow,operation:e,errMsg:t}),o.showError("auth-dept",e,t)},onRetrieveAuthDept:function(e){var t=this,a={};a.corpUuid=e,n.doRetrieveService(n.authUrl+"auth-dept/get-by-corpUuid",a,t.startPage,t.pageRow,t.totalRow).then(function(a){null==a.errCode||""==a.errCode||"000000"==a.errCode?(t.recordSet=a.object.list,t.startPage=a.object.startPage,t.pageRow=a.object.pageRow,t.totalRow=a.object.totalRow,t.corpUuid=e,t.fireEvent("retrieve","",t)):t.fireEvent("retrieve","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("retrieve","调用服务错误",t)})},onInitAuthDept:function(e){return this.recordSet.length>0&&this.corpUuid===e?void this.fireEvent("retrieve","",this):void this.onRetrieveAuthDept(e)},onCreateAuthDept:function(e){var t=this.getServiceUrl("auth-dept/create");n.recordCreate(this,e,t)},onUpdateAuthDept:function(e){var t=this.getServiceUrl("auth-dept/update");n.recordUpdate(this,e,t)},onDeleteAuthDept:function(e){var t=this.getServiceUrl("auth-dept/remove");n.recordDelete(this,e,t)}});e.exports=s},310:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createSuperUser","deleteSuperUser","updateSuperUser","retrieveSuperUser","retrieveSuperUserPage","initSuperUser"]);e.exports=i},311:function(e,t,a){"use strict";var r=a(1),i=a(208),n=a(3),o=a(11),s=r.createStore({listenables:[i],corpUuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,init:function(){},getServiceUrl:function(e){return n.authUrl+e},fireEvent:function(e,t,a){a.trigger({corpUuid:a.corpUuid,recordSet:a.recordSet,startPage:a.startPage,pageRow:a.pageRow,totalRow:a.totalRow,operation:e,errMsg:t}),o.showError("auth-corp-app",e,t)},onRetrieveUserPriv:function(e){var t=this,a={};a.corpUuid=e;var r=this.getServiceUrl("auth-corp-app/get-by-corpUuid");n.doRetrieveService(r,a,t.startPage,t.pageRow,t.totalRow).then(function(a){null==a.errCode||""==a.errCode||"000000"==a.errCode?(t.recordSet=a.object.list,t.startPage=a.object.startPage,t.pageRow=a.object.pageRow,t.totalRow=a.object.totalRow,t.corpUuid=e,t.fireEvent("retrieve","",t)):t.fireEvent("retrieve","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("retrieve","调用服务错误",t)})},onRetrieveUserPrivPage:function(e,t,a){this.startPage=t,this.pageRow=a,this.onRetrieveUserPriv(e)},onInitUserPriv:function(e){return this.recordSet.length>0&&this.corpUuid===e?void this.fireEvent("retrieve","",this):void this.onRetrieveUserPriv(e)},onCreateUserPriv:function(e){var t=this.getServiceUrl("auth-corp-app/batch-create");n.recordCreate(this,e,t)},onUpdateUserPriv:function(e){var t=this.getServiceUrl("auth-corp-app/update");n.recordUpdate(this,e,t)},onDeleteUserPriv:function(e){var t=this.getServiceUrl("auth-corp-app/remove");n.recordDelete(this,e,t)}});e.exports=s},398:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createAuthCorpApp","deleteAuthCorpApp","updateAuthCorpApp","retrieveAuthCorpApp","initAuthCorpApp"]);e.exports=i},402:function(e,t){"use strict";e.exports={userFields:[{id:"A",name:"idType",title:"证件类型",opts:"#用户管理.身份类型"},{id:"B",name:"idCode",title:"证件编号"},{id:"C",name:"userName",title:"用户名"},{id:"D",name:"perName",title:"姓名"},{id:"E",name:"userCode",title:"员工编号"},{id:"F",name:"jobTitle",title:"职位"},{id:"G",name:"userType",title:"用户类型",opts:"#用户管理.用户类型"},{id:"H",name:"phoneno",title:"电话"},{id:"I",name:"email",title:"电子邮箱"},{id:"J",name:"passwd",title:"密码"}]}},404:function(e,t,a){"use strict";var r=a(1),i=a(310),n=a(3),o=a(11),s=r.createStore({listenables:[i],corpUuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,init:function(){},getServiceUrl:function(e){return n.paramUrl+e},fireEvent:function(e,t,a){a.trigger({corpUuid:a.corpUuid,recordSet:a.recordSet,startPage:a.startPage,pageRow:a.pageRow,totalRow:a.totalRow,operation:e,errMsg:t}),o.showError("super-user",e,t)},onRetrieveSuperUser:function(e){var t=this,a={};a.corpUuid=e;var r=this.getServiceUrl("super-user/get-by-corp_uuid");n.doRetrieveService(r,a,t.startPage,t.pageRow,t.totalRow).then(function(a){null==a.errCode||""==a.errCode||"000000"==a.errCode?(t.recordSet=a.object.list,t.startPage=a.object.startPage,t.pageRow=a.object.pageRow,t.totalRow=a.object.totalRow,t.corpUuid=e,t.fireEvent("retrieve","",t)):t.fireEvent("retrieve","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("retrieve","调用服务错误",t)})},onRetrieveSuperUserPage:function(e,t,a){this.startPage=t,this.pageRow=a,this.onRetrieveSuperUser(e)},onInitSuperUser:function(e){return this.recordSet.length>0&&this.corpUuid===e?void this.fireEvent("retrieve","",this):void this.onRetrieveSuperUser(e)},onCreateSuperUser:function(e){var t=this.getServiceUrl("super-user/create");n.recordCreate(this,e,t)},onUpdateSuperUser:function(e){var t=this.getServiceUrl("super-user/update");n.recordUpdate(this,e,t)},onDeleteSuperUser:function(e){var t=this.getServiceUrl("super-user/remove");n.recordDelete(this,e,t)}});e.exports=s},406:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createAppAuth","deleteAppAuth","updateAppAuth","retrieveAppAuth","initAppAuth","getUserByUuid"]);e.exports=i},407:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),n=r(i),o=a(5),s=(r(o),a(7)),l=r(s),u=a(4),d=a(139),c=r(d),p=a(138),h=r(p),f=a(1),m=u.Steps.Step,g=a(66),v=(a(32),a(94)),S=(a(74),[{title:"建立基本信息",content:"建立用户基本信息"},{title:"创建用户",content:"创建公司内部的用户"}]),y=n.default.createClass({displayName:"CreateCompUserPage",getInitialState:function(){return{compUserSet:{errMsg:""},authUserSet:{errMsg:""},loading:!1,current:0,modal:!1,userExist:!1,compUser:{},authUser:{}}},mixins:[f.listenTo(g,"onCompUserComplete"),f.listenTo(v,"onAuthUserComplete")],onAuthUserComplete:function(e){this.state.modal&&0===this.state.current&&("create"===e.operation?""===e.errMsg?(this.state.compUser.userName=this.state.authUser.userName,this.state.compUser.perName=this.state.authUser.perName,this.setState({current:1,loading:!1,authUserSet:e})):this.setState({loading:!1,authUserSet:e}):"find"===e.operation&&(this.refs.mxgBox.clear(),this.setState({userExist:!1})))},onCompUserComplete:function(e){if(this.state.modal)if(1===this.state.current&&"create"===e.operation)""===e.errMsg?this.setState({loading:!1,modal:!1}):this.setState({loading:!1,compUserSet:e});else if(0===this.state.current&&"find"===e.operation){var t="用户已经存在"===e.errMsg;this.setState({userExist:t})}},componentDidMount:function(){},clear:function(e,t){this.state.current=0,this.state.userExist=!1,this.state.compUserSet.errMsg="",this.state.authUserSet.errMsg="";var a=this.state.compUser;a.userName="",a.perName="",a.userCode="",a.userTitle="",a.userType="",a.userGroup="",a.corpUuid=e,a.deptUuid=t;var r=this.state.authUser;r.idType="",r.idCode="",r.userName="",r.perName="",r.phoneno="",r.email="",r.passwd="",r.userStatus="1",r.regType="1",this.state.modal||"undefined"==typeof this.refs.mxgBox||this.refs.mxgBox.clear(),this.refs.firstStepPage&&this.refs.firstStepPage.clear()},onClickSave:function(){if(0===this.state.current){var e=this.refs.firstStepPage.onClickSave();1==e?(this.state.compUser.userName=this.state.authUser.userName,this.state.compUser.perName=this.state.authUser.perName,this.setState({current:1})):2==e&&this.setState({loading:!0})}else{var e=this.refs.compUserPage.onClickSave();e&&this.setState({loading:!0})}},toggle:function(){this.setState({modal:!this.state.modal})},render:function(){var e=this.state.current,t=0===e?"下一步":"保存";return n.default.createElement(u.Modal,{visible:this.state.modal,width:"540px",title:"增加用户",maskClosable:!1,onOk:this.onClickSave,onCancel:this.toggle,footer:[n.default.createElement("div",{key:"footerDiv",style:{display:"block",textAlign:"right"}},n.default.createElement(l.default,{ref:"mxgBox",svcList:["auth-user/create","auth-user/find","comp-user/create","comp-user/find"]}),n.default.createElement(u.Button,{key:"btnOK",type:"primary",size:"large",disabled:this.state.userExist,onClick:this.onClickSave,loading:this.state.loading},t)," ",n.default.createElement(u.Button,{key:"btnClose",size:"large",onClick:this.toggle},"取消"))]},n.default.createElement(u.Steps,{current:e},S.map(function(e){return n.default.createElement(m,{key:e.title,title:e.title})})),n.default.createElement("div",{style:{paddingTop:"20px"}},0===e?n.default.createElement(c.default,{ref:"firstStepPage",authUser:this.state.authUser,corpUuid:this.state.compUser.corpUuid}):n.default.createElement(h.default,{ref:"compUserPage",compUser:this.state.compUser,corpUuid:this.state.compUser.corpUuid})))}});t.default=y},408:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n=a(2),o=r(n),s=a(8),l=(r(s),a(5)),u=(r(l),a(4)),d=a(1),c=u.Checkbox.Group,p=(a(6),a(3)),h=a(119),f=a(103),m=a(205),g=a(157),v=o.default.createClass({displayName:"RoleCheckPage1",getInitialState:function(){return{roleSet:{recordSet:[],errMsg:""},userUuid:"",oldAuth:null,newAuth:{},roleLoading:!1,authLoading:!1,disabled:!0,selected:!1}},mixins:[d.listenTo(h,"onServiceComplete"),d.listenTo(m,"onServiceComplete2")],onServiceComplete:function(e){"retrieve"===e.operation&&(this.state.roleSet=e,this.setState({roleLoading:!1}))},onServiceComplete2:function(e){"find"!==e.operation&&(this.state.oldAuth=e.object,e.object?(p.copyValue(e.object,this.state.newAuth),this.setState({authLoading:!1,selected:!0,disabled:!1})):this.setState({authLoading:!1,selected:!0,disabled:!0}))},componentDidMount:function(){},loadData:function(e,t){t&&(this.setState({roleLoading:!0}),f.initFntAppRole(t));var a=null;if(t&&e&&e.appAuthList)for(var r=e.appAuthList.length,i=0;i<r;i++)if(e.appAuthList[i].appUuid===t){a=e.appAuthList[i];break}var n={};null===a?n={appUuid:t,roleList:""}:p.copyValue(a,n);var o=null!==e&&null!==t;this.setState({oldAuth:a,newAuth:n,userUuid:e.uuid,selected:o,disabled:null===a})},onAllow:function(){this.state.disabled||(this.state.newAuth.roleList=""),this.setState({disabled:!this.state.disabled})},onChange:function(e){this.state.newAuth.roleList=e.join(","),this.setState({authLoading:this.state.authLoading})},onClickSave:function(){this.setState({authLoading:!0});var e={filter:this.state.userUuid,object:{}};p.copyValue(this.state.newAuth,e.object),this.state.oldAuth?this.state.disabled?(e.object=this.state.oldAuth.uuid,e.appUuid=this.state.oldAuth.appUuid,g.deleteAppAuth(e)):g.updateAppAuth(e):this.state.disabled?this.setState({authLoading:!1}):g.createAppAuth(e)},render:function(){var e=this,t=this.state.roleSet.recordSet,a=this.state.newAuth.roleList?this.state.newAuth.roleList.split(","):[],r=t.map(function(t,a){return o.default.createElement("div",null,o.default.createElement(u.Checkbox,{style:{marginLeft:"10px",lineHeight:"30px"},value:t.roleName,disabled:e.state.disabled||!e.state.selected},t.roleName+"("+t.roleDesc+")"))}),n=this.state.roleLoading||this.state.authLoading,s=o.default.createElement("div",null,o.default.createElement(u.Checkbox,{style:{marginLeft:"10px",lineHeight:"30px"},disabled:!this.state.selected,onChange:this.onAllow,checked:!this.state.disabled},"允许使用"),o.default.createElement("div",{style:{border:"1px solid #e2e2e2",minHeight:"300px"}},o.default.createElement(c,{onChange:this.onChange,value:a},r)));return o.default.createElement("div",{style:i({height:"100%",padding:"2px 0 0 8px",borderLeft:" 1px solid #e2e2e2"},"padding","10px")},n?o.default.createElement(u.Spin,null,s):s,o.default.createElement("div",{style:{display:"block",textAlign:"right",margin:"14px 0 0 0"}},o.default.createElement(u.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave,loading:this.state.authLoading,disabled:!this.state.selected},"保存")))}});e.exports=v},409:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=r(s),u=a(4),d=a(12),c=r(d),p=a(7),h=r(p),f=a(104),m=r(f),g=a(1),v=u.Form.Item,S=(u.Select.Option,a(6)),y=a(3),C=a(66),w=a(32),U=o.default.createClass({displayName:"UpdateCompUserPage",getInitialState:function(){return{compUserSet:{operation:"",errMsg:""},modal:!1,compUser:{},hints:{},validRules:[]}},componentDidMount:function(){this.state.validRules=[]},initPage:function(e){this.state.hints={},y.copyValue(e,this.state.compUser),this.state.compUserSet.operation="",this.state.modal||"undefined"==typeof this.refs.mxgBox||this.refs.mxgBox.clear()},handleOnChange:function(e){var t=this.state.compUser;t[e.target.id]=e.target.value,S.validator(this,t,e.target.id),this.setState({compUser:t})},handleOnSelected:function(e,t,a){var r=this.state.compUser;r[e]=t,S.validator(this,r,e),this.setState({compUser:r})},onClickSave:function(){S.formValidator(this,this.state.compUser)&&w.updateCompUser(this.state.compUser)},toggle:function(){this.setState({modal:!this.state.modal})},selectCompUser:function(e){var t=this.state.compUser,a=t.userGroup?t.userGroup.split(","):[];a.push(e),t.userGroup=a.join(","),this.setState({loading:this.state.loading})},deSelectCompUser:function(e){for(var t=this.state.compUser,a=t.userGroup.split(","),r=0;r<a.length;r++)if(a[r]===e){a.splice(r,1);break}t.userGroup=a.join(","),this.setState({loading:this.state.loading})},render:function(){this.state.modal&&"update"===this.state.compUserSet.operation&&""===this.state.compUserSet.errMsg&&(this.state.modal=!1);var e="horizontal",t="form-item-"+e,a={labelCol:"vertical"==e?null:{span:4},wrapperCol:"vertical"==e?null:{
span:20}},r=this.state.compUser.corpUuid,n=this.state.compUser.userGroup?this.state.compUser.userGroup.split(","):[],s=this.state.hints;return o.default.createElement(u.Modal,{visible:this.state.modal,width:"540px",title:"修改用户信息",maskClosable:!1,onOk:this.onClickSave,onCancel:this.toggle,footer:[o.default.createElement("div",{key:"footerDiv",style:{display:"block",textAlign:"right"}},o.default.createElement(h.default,{ref:"mxgBox",svcList:["comp-user/update"]}),o.default.createElement(u.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave},"保存")," ",o.default.createElement(u.Button,{key:"btnClose",size:"large",onClick:this.toggle},"取消"))]},o.default.createElement(u.Form,{layout:e},o.default.createElement(v,i({},a,{label:"用户名",colon:!0,className:t,help:s.userNameHint,validateStatus:s.userNameStatus}),o.default.createElement(u.Input,{type:"text",name:"userName",id:"userName",readOnly:"true",value:this.state.compUser.userName,onChange:this.handleOnChange})),o.default.createElement(v,i({},a,{label:"用户姓名",colon:!0,className:t,help:s.perNameHint,validateStatus:s.perNameStatus}),o.default.createElement(u.Input,{type:"text",name:"perName",id:"perName",readOnly:"true",value:this.state.compUser.perName,onChange:this.handleOnChange})),o.default.createElement(v,i({},a,{label:"用户类型",colon:!0,className:t,help:s.userTypeHint,validateStatus:s.userTypeStatus}),o.default.createElement(c.default,{name:"userType",id:"userType",appName:"用户管理",optName:"用户类型",value:this.state.compUser.userType,onSelect:this.handleOnSelected.bind(this,"userType")})),o.default.createElement(v,i({},a,{label:"员工编号",colon:!0,className:t,help:s.userCodeHint,validateStatus:s.userCodeStatus}),o.default.createElement(u.Input,{type:"text",name:"userCode",id:"userCode",value:this.state.compUser.userCode,onChange:this.handleOnChange})),o.default.createElement(v,i({},a,{label:"职务",colon:!0,className:t,help:s.userTitleHint,validateStatus:s.userTitleStatus}),o.default.createElement(u.Input,{type:"text",name:"userTitle",id:"userTitle",value:this.state.compUser.userTitle,onChange:this.handleOnChange})),o.default.createElement(v,i({},a,{label:"用户组",colon:!0,className:t,help:s.userGroupHint,validateStatus:s.userGroupStatus}),o.default.createElement(m.default,{corpUuid:r,name:"userGroup",id:"userGroup",value:n,onSelect:this.selectCompUser,onDeselect:this.deSelectCompUser}))))}});l.default.onClass(U,g.connect(C,"compUserSet")),t.default=U},410:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(7)),u=r(l),d=a(4),c=a(408),p=r(c),h=a(1),f=a(6),m=(a(3),a(311)),g=a(208),v=a(205),S=a(157),y=a(158),C=a(128),w=n.default.createClass({displayName:"UserPrivPage",getInitialState:function(){return{userPrivSet:{recordSet:[],errMsg:""},loading:!1,appLoading:!1,userLoading:!1,appMap:{},appList:[],userPriv:null,action:"query",compUser:this.props.compUser}},mixins:[h.listenTo(m,"onServiceComplete"),h.listenTo(y,"onLoadAppComplete"),h.listenTo(v,"onLoadUserComplete")],onServiceComplete:function(e){this.setState({loading:!1,userPrivSet:e})},onLoadAppComplete:function(e){var t={};""===e.errMsg&&e.recordSet.map(function(e,a){t[e.uuid]=e}),this.setState({appLoading:!1,appMap:t,appList:e.recordSet})},onLoadUserComplete:function(e){this.setState({userLoading:!1,compUser:e.compUser})},handleQueryClick:function(e){this.setState({loading:!0});var t=window.loginData.compUser,a=null===t?"":t.corpUuid;g.retrieveUserPriv(a)},componentDidMount:function(){this.setState({loading:!0,appLoading:!0,userLoading:!0});var e=window.loginData.compUser,t=null===e?"":e.corpUuid;g.initUserPriv(t),C.initFntApp(),S.getUserByUuid(this.props.compUser.uuid)},handleAppClick:function(e){this.setState({userPriv:e}),this.refs.roleCheck.loadData(this.state.compUser,e.appUuid)},onBack:function(){this.setState({action:"query"})},render:function(){var e=this,t=[],a=this.state.userPrivSet.recordSet,r=null===this.state.userPriv?"":this.state.userPriv.appUuid;a.map(function(a,r){var i=e.state.appMap[a.appUuid];null!==i&&"undefined"!=typeof i&&(a.uuid=i.uuid,a.appCode=i.appCode,a.appName=i.appName,t.push(a))});var i={},o=this.state.compUser;void 0!==o.appAuthList&&null!==o.appAuthList&&o.appAuthList.map(function(e,t){i[e.appUuid]=e});var s=t.map(function(t,a){var r=i[t.uuid],o=void 0===r||null===r?null:n.default.createElement(d.Icon,{type:"check"}),s=null;return s=e.state.userPriv===t?n.default.createElement("span",{style:{color:"#49a9ee"}},t.appCode):t.appCode,n.default.createElement("div",{key:t.uuid,className:"card-div",style:{width:300}},n.default.createElement("div",{className:"ant-card ant-card-bordered",style:{width:"100%"},onClick:e.handleAppClick.bind(e,t),title:"点击修改权限信息"},n.default.createElement("div",{className:"ant-card-head"},n.default.createElement("h3",{className:"ant-card-head-title"},s)),n.default.createElement("div",{className:"ant-card-extra"},o),n.default.createElement("div",{className:"ant-card-body",style:{cursor:"pointer",height:"66px",overflow:"hidden"}},t.appName)))}),l=this.props.compUser,c="query"===this.state.action?"":"none",h=this.state.loading||this.state.appLoading||this.state.userLoading,m=f.getCardMargin(this),g=n.default.createElement("div",{className:"card-page",style:{padding:m.padding,display:c}},n.default.createElement("div",{style:{margin:m.margin}},n.default.createElement(u.default,{ref:"mxgBox",svcList:["auth-corp-app/retrieve","auth-corp-app/remove"]}),n.default.createElement("div",{className:"toolbar-card"},n.default.createElement("div",{style:{float:"left"}},n.default.createElement("div",{style:{paddingTop:"16px",paddingRight:"4px",display:"inline"}},"用户【",l.perName,"】的权限设置")))),h?n.default.createElement(d.Spin,{tip:"正在努力加载数据...",style:{minHeight:"200px"}},s):n.default.createElement("div",{className:"card-body"},s));return n.default.createElement("div",{className:"grid-page",style:{padding:m.padding}},n.default.createElement("div",{style:{margin:m.margin}},n.default.createElement(u.default,{ref:"mxgBox",svcList:["app-auth1/update","app-auth1/create","app-auth1/remove","comp-user/get-by-uuid"]})),n.default.createElement("div",{style:{display:"flex",height:"100%"}},n.default.createElement("div",{className:"left-tree",style:{width:"100%",overflowY:"auto",overflowX:"hidden"}},g),n.default.createElement("div",{className:"left-tree",style:{flex:"0 0 280px",width:"280px",overflowY:"auto",overflowX:"hidden"}},n.default.createElement(p.default,{ref:"roleCheck",appUuid:r,user:o}))))}});e.exports=w},411:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(4)),u=a(407),d=r(u),c=a(409),p=r(c),h=a(26),f=r(h),m=a(402),g=r(m),v=a(1),S=l.Input.Search,y=a(11),C=a(3),w=a(6),U=a(66),E=a(32),b="",x=10,N=n.default.createClass({displayName:"UserTablePage",getInitialState:function(){return{compUserSet:{deptUuid:"",filter:{},recordSet:[],startPage:1,pageRow:10,totalRow:0,errMsg:""},loading:!1,isSysUser:!1,deptName:""}},mixins:[v.listenTo(U,"onServiceComplete"),(0,f.default)()],onServiceComplete:function(e){console.log(e),"find"!==e.operation&&this.setState({loading:!1,compUserSet:e})},handleQueryClick:function(e){this.onChangePage(this.state.compUserSet.startPage)},loadData:function(e,t,a){var r=a?0:1,i=a?0:x;this.state.compUserSet.startPage=r,this.state.compUserSet.pageRow=i,this.state.deptName=t,this.state.isSysUser=a,this.setState({loading:!0});var n={deptUuid:e};null!==b&&""!==b&&(n.userCode=b,n.userName=b,n.perName=b),E.initCompUser(n,r,i)},getCorpUuid:function(){return"sys"===this.props.type?this.props.corpUuid:window.loginData.compUser.corpUuid},componentDidMount:function(){this.onSearch("")},handleOpenCreateWindow:function(e){return""===this.state.compUserSet.deptUuid?void y.showError("comp-user","retrieve","请先选择部门"):(this.refs.createWindow.clear(this.getCorpUuid(),this.state.compUserSet.deptUuid),void this.refs.createWindow.toggle())},onClickUpdate:function(e,t){null!=e&&(this.refs.updateWindow.initPage(e),this.refs.updateWindow.toggle())},onClickPriv:function(e,t){if(null!==e){var a=this.props.onSetPriv;void 0!==a&&null!==a&&a(e)}},onClickDelete:function(e,t){l.Modal.confirm({title:"删除确认",content:"是否删除选中的用户 【"+e.uuid+"】",okText:"确定",cancelText:"取消",onOk:this.onClickDelete2.bind(this,e)})},onClickDelete2:function(e){this.setState({loading:!0}),E.deleteCompUser(e.uuid)},onFilterRecord:function(e){b=e.target.value,this.setState({loading:this.state.loading})},onSearch:function(e){b=e,this.setState({loading:!0}),this.state.compUserSet.startPage=1;var t={corpUuid:this.getCorpUuid()};null!==b&&""!==b&&(t.userCode=b,t.userName=b,t.perName=b),E.initCompUser(t,1,this.state.compUserSet.pageRow)},handleGoBack:function(){var e=this.props.funcBack;null!==e&&"undefined"!=typeof e&&e()},onChangePage:function(e){this.state.compUserSet.startPage=e,this.state.compUserSet.pageRow=x,this.setState({loading:!0});var t={corpUuid:this.getCorpUuid()};null!==b&&""!==b&&(t.userCode=b,t.userName=b,t.perName=b),E.retrieveCompUserPage(t,e,x)},onShowSizeChange:function(e,t){x=t,this.handleQueryClick()},handleTempDown:function(e){this.downXlsTempFile(g.default.userFields)},uploadComplete:function(e){this.setState({loading:!1}),""!==e&&w.infoMsg(e)},beforeUpload:function(e){if(""===this.state.compUserSet.deptUuid)return y.showError("comp-user","retrieve","请先选择部门"),!1;this.setState({loading:!0});var t=C.authUrl+"auth-user/upload-xls",a={corpUuid:this.getCorpUuid(),deptUuid:this.state.compUserSet.deptUuid};return this.uploadXlsFile(t,a,g.default.userFields,e,this.uploadComplete),!1},render:function(){var e,t,a=this;this.state.isSysUser?(e=w.filter(this.state.compUserSet.recordSet,b),t=n.default.createElement(S,{placeholder:"查找记录",style:{width:w.searchWidth},value:b,onChange:this.onFilterRecord})):(e=this.state.compUserSet.recordSet,t=n.default.createElement(S,{placeholder:"用户名或工号",style:{width:w.searchWidth},value:b,onSearch:this.onSearch,onChange:this.onFilterRecord}));var r=[{title:"用户名",dataIndex:"userName",key:"userName",width:100},{title:"用户姓名",dataIndex:"perName",key:"perName",width:100},{title:"员工编号",dataIndex:"userCode",key:"userCode",width:100},{title:"职务",dataIndex:"userTitle",key:"userTitle",width:100},{title:"用户组",dataIndex:"userGroup",key:"userGroup",width:200},{title:"用户类型",dataIndex:"userType",key:"userType",width:90,render:function(e,t){return C.getOptionName("用户管理","用户类型",t.userType,!0,a)}},{title:"",key:"action",width:90,render:function(e,t){return n.default.createElement("span",null,n.default.createElement("a",{href:"#",onClick:a.onClickUpdate.bind(a,t),title:"更新"},n.default.createElement(l.Icon,{type:w.iconUpdate})),n.default.createElement("span",{className:"ant-divider"}),n.default.createElement("a",{href:"#",onClick:a.onClickDelete.bind(a,t),title:"删除"},n.default.createElement(l.Icon,{type:w.iconRemove})),n.default.createElement("span",{className:"ant-divider"}),n.default.createElement("a",{href:"#",onClick:a.onClickPriv.bind(a,t),title:"权限管理"},n.default.createElement(l.Icon,{type:"safety"})))}}],i=this.props.funcBack,o=null!==i&&"undefined"!=typeof i,s="sys"!==this.props.type&&{showQuickJumper:!0,total:this.state.compUserSet.totalRow,pageSize:this.state.compUserSet.pageRow,current:this.state.compUserSet.startPage,size:"large",showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,onChange:this.onChangePage},u="sys"===this.props.type?this.state.compUserSet.totalRow+" 个系统管理员":this.state.compUserSet.totalRow+" 个用户",c=""===this.state.compUserSet.deptUuid,h=[];return"sys"!==this.props.type&&(h.push(n.default.createElement(l.Button,{icon:"download",title:"下载模板",onClick:this.handleTempDown,style:{marginLeft:"4px"}})),h.push(n.default.createElement(l.Upload,{name:"file",action:"/posts/",beforeUpload:this.beforeUpload,disabled:c,style:{marginLeft:"4px"}},n.default.createElement(l.Button,{icon:"upload"})))),n.default.createElement("div",{className:"grid-page",style:{padding:"58px 0 0 0"}},n.default.createElement("div",{style:{margin:"-58px 0 0 0"}},n.default.createElement("div",{className:"toolbar-table"},n.default.createElement("div",{style:{float:"left"}},n.default.createElement("div",{style:{paddingTop:"8px",paddingRight:"8px",display:"inline"}},u),n.default.createElement(l.Button,{icon:w.iconAdd,type:"primary",title:"增加用户",disabled:c,onClick:this.handleOpenCreateWindow}),n.default.createElement(l.Button,{icon:w.iconRefresh,title:"刷新数据",onClick:this.handleQueryClick,style:{marginLeft:"4px"}}),h,o?n.default.createElement(l.Button,{icon:w.iconBack,title:"返回公司管理",onClick:this.handleGoBack,style:{marginLeft:"4px"}}):null),n.default.createElement("div",{style:{textAlign:"right",width:"100%",paddingRight:"2px"}},t))),n.default.createElement("div",{className:"grid-body"},n.default.createElement(l.Table,{columns:r,dataSource:e,rowKey:function(e){return e.userName},loading:this.state.loading,size:"middle",pagination:s,bordered:w.tableBorder})),n.default.createElement(d.default,{ref:"createWindow"}),n.default.createElement(p.default,{ref:"updateWindow"}))}});e.exports=N},613:function(e,t,a){"use strict";var r=a(1),i=r.createActions(["createCorpKey","deleteCorpKey","updateCorpKey","retrieveCorpKey","retrieveCorpKeyPage","initCorpKey"]);e.exports=i},614:function(e,t,a){"use strict";var r=a(1),i=a(398),n=a(3),o=a(11),s=r.createStore({listenables:[i],corpUuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,init:function(){},getServiceUrl:function(e){return n.authUrl+e},fireEvent:function(e,t,a){a.trigger({corpUuid:a.corpUuid,recordSet:a.recordSet,startPage:a.startPage,pageRow:a.pageRow,totalRow:a.totalRow,operation:e,errMsg:t}),o.showError("auth-corp-app",e,t)},onRetrieveAuthCorpApp:function(e){var t=this,a={};a.corpUuid=e;var r=this.getServiceUrl("auth-corp-app/get-by-corpUuid");n.doRetrieveService(r,a,t.startPage,t.pageRow,t.totalRow).then(function(a){null==a.errCode||""==a.errCode||"000000"==a.errCode?(t.recordSet=a.object.list,t.startPage=a.object.startPage,t.pageRow=a.object.pageRow,t.totalRow=a.object.totalRow,t.corpUuid=e,t.fireEvent("retrieve","",t)):t.fireEvent("retrieve","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("retrieve","调用服务错误",t)})},onInitAuthCorpApp:function(e){return this.recordSet.length>0&&this.corpUuid===e?void this.fireEvent("retrieve","",this):void this.onRetrieveAuthCorpApp(e)},onCreateAuthCorpApp:function(e){var t=this.getServiceUrl("auth-corp-app/batch-create");n.recordCreate(this,e,t)},onUpdateAuthCorpApp:function(e){var t=this.getServiceUrl("auth-corp-app/update");n.recordUpdate(this,e,t)},onDeleteAuthCorpApp:function(e){var t=this.getServiceUrl("auth-corp-app/remove");n.recordDelete(this,e,t)}});e.exports=s},615:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(7)),u=r(l),d=a(4),c=a(900),p=r(c),h=a(901),f=r(h),m=a(1),g=d.Input.Search,v=(a(3),a(6)),S=a(306),y=a(244),C="",w=[],U=n.default.createClass({displayName:"DeptPage",getInitialState:function(){return{deptSet:{corpUuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,operation:"",errMsg:""},loading:!1,rootNodes:[],filterValue:"",filterNodes:[]}},mixins:[m.listenTo(S,"onServiceComplete")],onServiceComplete:function(e){this.setState({loading:!1,deptSet:e,rootNodes:[],filterValue:"",filterNodes:[]})},handleQueryClick:function(e){this.state.deptSet.operation="",this.setState({loading:!0}),y.retrieveAuthDept(this.state.deptSet.corpUuid)},componentDidMount:function(){this.setState({loading:!0});var e=window.loginData.compUser,t=null===e?"":e.corpUuid;y.initAuthDept(t)},handleOpenCreateWindow:function(e){this.refs.createWindow.clear(this.state.deptSet.corpUuid,""),this.refs.createWindow.toggle()},onClickAddChild:function(e,t){null!=e&&(this.refs.createWindow.clear(this.state.deptSet.corpUuid,e.uuid),this.refs.createWindow.toggle())},onClickUpdate:function(e,t){null!=e&&(this.refs.updateWindow.initPage(e),this.refs.updateWindow.toggle())},onClickDelete:function(e,t){d.Modal.confirm({title:v.removeTitle,content:"是否删除选中的部门 【"+e.deptCode+"】",okText:v.removeOkText,cancelText:v.removeCancelText,onOk:this.onClickDelete2.bind(this,e)})},onClickDelete2:function(e){this.state.deptSet.operation="",this.setState({loading:!0}),y.deleteAuthDept(e.uuid)},preCrtNode:function(e,t){var a={};return a.key=e.uuid,a.pid=e.puuid,""===e.deptCode||e.deptCode==e.deptName?a.title=e.deptName:a.title=e.deptName+"("+e.deptCode+")",a.deptCode=e.deptCode,a.deptName=e.deptName,a.deptDesc=e.deptDesc,a},onExpandedRowsChange:function(e){w=e},onFilterRecord:function(e){C=e.target.value,this.setState({loading:this.state.loading})},render:function(){var e=this;0===this.state.rootNodes.length&&(this.state.rootNodes=v.initTreeNodes(this.state.deptSet.recordSet,this.preCrtNode),this.state.rootNodes.map(function(e,t){"__unknow"===e.key&&(e.deptCode="未分类")})),""!==C&&this.state.filterValue!==C&&(this.state.filterNodes=v.filter(this.state.deptSet.recordSet,C),this.state.filterValue=C);var t=""!==C?this.state.filterNodes:this.state.rootNodes,a=[{title:"部门代码",dataIndex:"deptCode",key:"deptCode",width:"20%"},{title:"部门名称",dataIndex:"deptName",key:"deptName",width:"30%"},{title:"部门描述",dataIndex:"deptDesc",key:"deptDesc",width:"40%"},{title:"",key:"action",width:"10%",render:function(t,a){return"__unknow"!=a.key?n.default.createElement("span",null,""!==C?null:n.default.createElement("a",{href:"#",onClick:e.onClickAddChild.bind(e,a.object),title:"增加下级部门"},n.default.createElement(d.Icon,{type:v.iconAddChild})),""!==C?null:n.default.createElement("span",{className:"ant-divider"}),n.default.createElement("a",{href:"#",onClick:e.onClickUpdate.bind(e,a.object),title:"修改部门信息"},n.default.createElement(d.Icon,{type:v.iconUpdate})),n.default.createElement("span",{className:"ant-divider"}),n.default.createElement("a",{href:"#",onClick:e.onClickDelete.bind(e,a.object),title:"删除部门"},n.default.createElement(d.Icon,{type:v.iconRemove}))):null}}],r=v.getGridMargin(this);return n.default.createElement("div",{className:"grid-page",style:{padding:r.padding}},n.default.createElement("div",{style:{margin:r.margin}},n.default.createElement(u.default,{ref:"mxgBox",svcList:["auth-dept/retrieve","auth-dept/remove"]}),n.default.createElement("div",{className:"toolbar-table"},n.default.createElement("div",{style:{float:"left"}},n.default.createElement(d.Button,{icon:v.iconAdd,type:"primary",title:"增加部门",onClick:this.handleOpenCreateWindow}),n.default.createElement(d.Button,{icon:v.iconRefresh,title:"刷新数据",onClick:this.handleQueryClick,style:{marginLeft:"4px"}})),n.default.createElement("div",{style:{textAlign:"right",width:"100%",paddingRight:"8px"}},n.default.createElement(g,{placeholder:"查找记录",style:{width:v.searchWidth},value:C,onChange:this.onFilterRecord})))),n.default.createElement("div",{className:"grid-body"},n.default.createElement(d.Table,{columns:a,dataSource:t,rowKey:function(e){return e.key},defaultExpandedRowKeys:w,onExpandedRowsChange:this.onExpandedRowsChange,loading:this.state.loading,pagination:!1,size:"middle",bordered:v.tableBorder})),n.default.createElement(p.default,{ref:"createWindow"}),n.default.createElement(f.default,{ref:"updateWindow"}))}});e.exports=U},626:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(33),s=r(o),l=a(6),u=n.default.createClass({displayName:"UManLayout",getInitialState:function(){return{navItems:[{name:"用户管理",to:"/uman/DeptPage/"}]}},render:function(){return n.default.createElement(s.default,{navItems:this.state.navItems,activeNode:l.uManHome,home:"@/index.html?from=uman",children:this.props.children})}});e.exports=u},627:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(8),l=(r(s),a(5)),u=(r(l),a(13)),d=a(4),c=a(18),p=r(c),h=a(29),f=r(h),m=(a(17),a(1),d.Form.Item),g=a(6),v=a(3),S=a(22),y=(0,u.withRouter)(o.default.createClass({displayName:"LoginPage2",getInitialState:function(){S.loadContext()&&this.props.router.push({pathname:g.uManHome,state:{from:"login"}});var e="";return"单公司"===g.corpStruct&&(e=g.corpUuid),{user:{userName:"",passwd:"",corpUuid:e},loading:!1,isRemember:!0,errMsg:"",hints:{},validRules:[]}},componentDidMount:function(){S.downConfig(this),this.state.validRules=[{id:"userName",desc:"用户名",required:!0,max:24},{id:"passwd",desc:"密码",required:!0,max:16}]},showError:function(e){this.setState({errMsg:e})},onConfigLoaded:function(){void 0!==this.refs.compSelect&&this.refs.compSelect.loadCorps()},clickLogin:function(e){var t=this.state.user.passwd;if(this.state.errMsg="",g.formValidator(this,this.state.user)){var a=v.authUrl+"auth-user/login",r=g.calcMD5(t),i={};i.password=r,i.username=this.state.user.userName;var n=this;this.setState({loading:!0}),v.loginService(a,i).then(function(e,t,a){n.state.loading=!1,null==e.errCode||""==e.errCode||"000000"==e.errCode?n.loginSuccess(e.object):n.showError("处理错误["+e.errCode+"]["+e.errDesc+"]")},function(e,t,a){n.state.loading=!1,n.showError("未知错误")})}},clickQuickLogin:function(e){this.state.user.corpUuid=g.corpUuid;var t=v.authUrl+"auth-user/login",a={};a.password="admin",a.username="admin";var r=this;this.setState({loading:!0}),v.loginService(t,a).then(function(e,t,a){r.state.loading=!1,null==e.errCode||""==e.errCode||"000000"==e.errCode?r.loginSuccess(e.object):r.showError("处理错误["+e.errCode+"]["+e.errDesc+"]")},function(e,t,a){r.state.loading=!1,r.showError("未知错误")})},loginSuccess:function(e){var t=this.state.user.corpUuid;S.saveLoginData(e,t);var a=this;v.downAppMenu("用户管理","HR").then(function(e){a.state.loading=!1,a.props.router.push({pathname:g.uManHome,state:{from:"login"}})},function(e){a.state.loading=!1,a.showError(e)})},handleOnChange:function(e){var t=this.state.user;t[e.target.id]=e.target.value,g.validator(this,t,e.target.id),this.setState({user:t})},handleCheckBox:function(e){var t=e.target.checked;this.setState({isRemember:t})},handleOnSelected:function(e,t,a){var r=this.state.user;r[e]=t,this.setState({user:r})},onUserNameFinished:function(e){"单公司"!==g.corpStruct&&this.refs.compSelect.loadData(this.state.user.userName)},onLoadCamp:function(e){var t=this.state.user;t.corpUuid=e,this.setState({user:t})},onDismiss:function(){this.setState({errMsg:""})},render:function(){var e=this.state.errMsg,t="vertical",a="form-item-"+t,r={labelCol:"vertical"==t?null:{span:0},wrapperCol:"vertical"==t?null:{span:24}},n=this.state.hints,s="单公司"===g.corpStruct?null:o.default.createElement(m,{labelCol:{span:0},wrapperCol:{span:24},colon:!0,style:{marginBottom:"20px"},className:a,help:n.compUuidHint,validateStatus:n.compUuidStatus},o.default.createElement(f.default,{name:"corpUuid",id:"corpUuid",ref:"compSelect",value:this.state.user.corpUuid,onSelect:this.handleOnSelected.bind(this,"corpUuid"),onLoaded:this.onLoadCamp}));return o.default.createElement("div",{style:{width:"100%"}},o.default.createElement("div",{style:{width:"300px",paddingTop:"100px",margin:"0 auto"}},o.default.createElement(d.Form,{layout:t},o.default.createElement(m,i({},r,{label:"",colon:!0,style:{marginBottom:"20px"},help:n.userNameHint,validateStatus:n.userNameStatus}),o.default.createElement(d.Input,{prefix:o.default.createElement(d.Icon,{type:"user",style:{fontSize:13}}),placeholder:"用户名",type:"text",name:"userName",id:"userName",value:this.state.user.userName,onChange:this.handleOnChange,onBlur:this.onUserNameFinished})),o.default.createElement(m,i({},r,{label:"",colon:!0,style:{marginBottom:"20px"},className:a,help:n.passwdHint,validateStatus:n.passwdStatus}),o.default.createElement(d.Input,{prefix:o.default.createElement(d.Icon,{type:"lock",style:{fontSize:13}}),placeholder:"密码",type:"password",name:"passwd",id:"passwd",value:this.state.user.passwd,onChange:this.handleOnChange})),s,o.default.createElement(m,null,o.default.createElement(p.default,{message:e,toggle:this.onDismiss}),o.default.createElement(d.Checkbox,{id:"remember",checked:this.state.isRemember,onChange:this.handleCheckBox},"记住用户名"),o.default.createElement(d.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.clickLogin,style:{width:"100%"},loading:this.state.loading},"登录"),g.resMode?null:o.default.createElement(d.Button,{key:"btnOK1",type:"primary",size:"large",onClick:this.clickQuickLogin,style:{width:"100%",marginTop:"20px"},loading:this.state.loading},"快速登录")))))}}));e.exports=y},628:function(e,t,a){"use strict";var r=a(1),i=a(406),n=a(3),o=(a(6),a(11)),s=r.createStore({listenables:[i],filter:null,object:null,startPage:0,pageRow:0,totalRow:0,userGroup:null,init:function(){},getServiceUrl:function(e){return n.authUrl+e},fireEvent:function(e,t,a){a.trigger({filter:a.filter,object:a.object,userGroup:a.userGroup,operation:e,errMsg:t}),o.showError("appAuth",e,t)},onCreateAppAuth:function(e){var t=this,a=this.getServiceUrl("appAuth/create");n.doCreateService(a,e).then(function(a){null==a.errCode||""==a.errCode||"000000"==a.errCode?(t.object=a.object,t.filter=e,null!==t.userGroup&&(null===t.userGroup.appAuthList&&(t.userGroup.appAuthList=[]),t.userGroup.appAuthList.push(t.object)),t.fireEvent("create","",t)):t.fireEvent("create","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("create","调用服务错误",t)})},onUpdateAppAuth:function(e){var t=this,a=this.getServiceUrl("appAuth/update");n.doUpdateService(a,e).then(function(a){if(null==a.errCode||""==a.errCode||"000000"==a.errCode){if(t.object=a.object,t.filter=e,null!==t.userGroup)for(var r=t.object.appUuid,i=t.userGroup.appAuthList.length,o=0;o<i;o++)if(t.userGroup.appAuthList[o].appUuid===r){n.copyValue(t.object,t.userGroup.appAuthList[o]);break}t.fireEvent("update","",t)}else t.fireEvent("update","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("update","调用服务错误",t)})},onDeleteAppAuth:function(e){var t=this,a=this.getServiceUrl("appAuth/remove");n.doRemoveService(a,e).then(function(a){if(null==a.errCode||""==a.errCode||"000000"==a.errCode){if(null!==t.userGroup&&null!==t.userGroup.appAuthList)for(var r=e.appUuid,i=t.userGroup.appAuthList.length,n=0;n<i;n++)if(t.userGroup.appAuthList[n].appUuid===r){t.userGroup.appAuthList.splice(n,1);break}t.object=null,t.filter=e,t.fireEvent("delete","",t)}else t.fireEvent("delete","处理错误["+a.errCode+"]["+a.errDesc+"]",t)},function(e){t.fireEvent("delete","调用服务错误",t)})},onGetUserByUuid:function(e){var t=this;this.userGroup=null;var a=this.getServiceUrl("user-group/get-by-uuid");n.doGetRecordService(a,e).then(function(e){if(null==e.errCode||""==e.errCode||"000000"==e.errCode){if(t.userGroup=e.object,null!==t.userGroup.appAuthList)for(var a=t.userGroup.appAuthList.length,r=a-1;r>=0;r--)null===t.userGroup.appAuthList[r]&&t.userGroup.appAuthList.splice(r,1);t.fireEvent("find","",t)}else t.fireEvent("find","处理错误["+e.errCode+"]["+e.errDesc+"]",t)},function(e){t.fireEvent("find","调用服务错误",t)})}});e.exports=s},629:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(4)),u=a(1),d=(l.Tree.TreeNode,a(6)),c=a(306),p=a(244),h=[],f=[],m=n.default.createClass({displayName:"DeptTree",getInitialState:function(){return{deptSet:{corpUuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,operation:"",errMsg:""},loading:!1,rootNodes:[],timer:null}},mixins:[u.listenTo(c,"onServiceComplete")],onServiceComplete:function(e){var t=this;"retrieve"===e.operation&&(this.setState({loading:!1,deptSet:e}),1===f.length&&(this.state.timer=setTimeout(function(){t.onSelect2(),clearInterval(t.state.timer)},100)))},componentDidMount:function(){this.state.deptSet.operation="",this.setState({loading:!0}),p.initAuthDept(this.props.corpUuid)},preCrtNode:function(e,t){var a={};return a.key=e.uuid,a.pid=e.puuid,""===e.deptCode||e.deptCode==e.deptName?a.title=e.deptName:a.title=e.deptName+"("+e.deptCode+")",a},onSelect:function(e,t){var a=t.node.props;a.expanded||"undefined"==typeof a.children||h.push(a.eventKey),f=e,this.onSelect2()},onSelect2:function(){var e=null;if(1===f.length)for(var t=this.state.deptSet.recordSet,a=t.length,r=0;r<a;r++)if(t[r].uuid===f[0]){e=t[r];break}this.props.onSelectDept(e)},onExpand:function(e,t){h=e},render:function(){return this.state.loading?n.default.createElement(l.Spin,{tip:"正在努力加载数据..."},n.default.createElement("div",{style:{height:"200px"}})):(this.state.rootNodes=d.initTreeNodes(this.state.deptSet.recordSet,this.preCrtNode),n.default.createElement(l.Tree,{className:"left-tree2",defaultExpandedKeys:h,defaultSelectedKeys:f,onSelect:this.onSelect,onExpand:this.onExpand},this.state.rootNodes.map(function(e,t){return d.prepareTreeNodes(e)})))}});e.exports=m},888:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(8),l=(r(s),a(5)),u=(r(l),a(7)),d=r(u),c=a(4),p=a(889),h=r(p),f=a(890),m=r(f),g=a(1),v=c.Form.Item,S=c.Radio.Group,y=a(891),C=(a(613),o.default.createClass({displayName:"CertPage",getInitialState:function(){return{certSet:{recordSet:[],startPage:0,pageRow:0,totalRow:0,operation:"",errMsg:""},action:"",device:null,loading:!1,corpKey:{},hints:{}}},mixins:[g.listenTo(y,"onServiceComplete")],onServiceComplete:function(e){this.setState({loading:!1,certSet:e})},componentDidMount:function(){console.log(window.loginData.compUser),this.setState({loading:!0}),this.state.corpKey.keyType="0"},onRadioChange:function(e){var t=this.state.corpKey;t[e.target.id]=""+e.target.value,this.setState({corpKey:t})},render:function(){var e="horizontal",t="form-item-"+e,a={labelCol:"vertical"==e?null:{span:6},wrapperCol:"vertical"==e?null:{span:18}},r=this.state.hints,n=o.default.createElement("div",{className:"grid-page",style:{height:"250px"}},o.default.createElement(d.default,{ref:"mxgBox",svcList:["corp-key/retrieve","corp-key/remove"]}),o.default.createElement("div",{style:{width:"400px",paddingTop:"50px",paddingLeft:"100px"}},o.default.createElement("div",{style:{width:"100%",height:"100px",lineHeight:"20px",fontSize:"14px",marginBottom:"50px"}},o.default.createElement("p",null,"企业证书用于创建特权用户，"),o.default.createElement("p",null,"特权用户可以查看所有员工的工资单等敏感数据，"),o.default.createElement("p",null,"因此请妥善保管好密码。"),o.default.createElement("p",null,"证书密码不保存在数据库中，丢失后无法找回！"),o.default.createElement("p",null,"每个企业只能创建一个证书！")),o.default.createElement(v,i({},a,{label:"操作类型",colon:!0,className:t,help:r.keyTypeHint,validateStatus:r.keyTypeStatus}),o.default.createElement(S,{name:"keyType",id:"keyType",onChange:this.onRadioChange,value:this.state.corpKey.keyType},o.default.createElement(c.Radio,{id:"keyType",value:"0"},"创建证书"),o.default.createElement(c.Radio,{id:"keyType",value:"1"},"修改密码"))))),s=null;return"0"===this.state.corpKey.keyType?s=o.default.createElement(h.default,null):"1"===this.state.corpKey.keyType&&(s=o.default.createElement(m.default,null)),o.default.createElement("div",{style:{width:"100%",height:"100%"}},n,s)}}));e.exports=C},889:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=(r(s),a(7)),u=r(l),d=a(18),c=r(d),p=a(4),h=(a(1),p.Form.Item),f=a(6),m=a(6),g=a(3),v=o.default.createClass({displayName:"CreateCertPage",getInitialState:function(){return{certSet:{operation:"",errMsg:""},loading:!1,errMsg:"",cert:{},hints:{},validRules:[]}},componentDidMount:function(){this.state.validRules=[{id:"passwd",desc:"密码",required:!0,max:"0"}],this.clear()},clear:function(e,t,a){this.state.hints={},this.state.cert.uuid="",this.state.cert.passwd="",this.state.loading=!1,this.state.certSet.operation="","undefined"!=typeof this.refs.mxgBox&&this.refs.mxgBox.clear();
},handleOnChange:function(e){var t=this.state.cert;t[e.target.id]=e.target.value,m.validator(this,t,e.target.id),this.setState({cert:t})},clickCreatePwd:function(e){if(this.state.errMsg="",m.formValidator(this,this.state.cert)){var t=g.paramUrl+"corp-key/create",a={},r=this.state.cert.passwd,i=this.state.cert.confirmPad;if(r!=i)return void f.warnMsg("两次输入需要一致！");a.passwd=r,a.corpUuid=window.loginData.compUser.corpUuid,a.corpName=window.loginData.authUser.userName;var n=this;g.doCreateService(t,a).then(function(e,t,a){null==e.errCode||""==e.errCode||"000000"==e.errCode?(n.showError(""),f.succMsg("创建成功！")):n.showError("处理错误["+e.errCode+"]["+e.errDesc+"]")},function(e,t,a){n.showError("未知错误")})}},showError:function(e){this.setState({errMsg:e})},onDismiss:function(){this.setState({errMsg:""})},render:function(){var e=this.state.errMsg,t="horizontal",a="form-item-"+t,r={labelCol:"vertical"==t?null:{span:6},wrapperCol:"vertical"==t?null:{span:18}},n=this.state.hints;return o.default.createElement("div",{className:"grid-page"},o.default.createElement("div",{style:{width:"400px",paddingLeft:"100px"}},o.default.createElement(u.default,{ref:"mxgBox",svcList:["corp-key/create"]}),o.default.createElement(p.Form,{layout:t},o.default.createElement(h,i({},r,{label:"密码",required:!0,colon:!0,style:{marginBottom:"20px"},className:a,help:n.passwdHint,validateStatus:n.passwdStatus}),o.default.createElement(p.Input,{type:"password",name:"passwd",id:"passwd",value:this.state.cert.passwd,onChange:this.handleOnChange})),o.default.createElement(h,i({},r,{label:"确认密码",required:!0,colon:!0,style:{marginBottom:"20px"},className:a,help:n.confirmPadHint,validateStatus:n.confirmPadStatus}),o.default.createElement(p.Input,{style:{zIndex:"99"},type:"password",name:"confirmPad",id:"confirmPad",value:this.state.cert.confirmPad,onChange:this.handleOnChange})),o.default.createElement(h,{style:{textAlign:"right"}},o.default.createElement(c.default,{message:e,toggle:this.onDismiss}),o.default.createElement(p.Button,{key:"btnOK",onClick:this.clickCreatePwd,size:"large",type:"primary"},"提交")))))}});t.default=v},890:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=(r(s),a(7)),u=r(l),d=a(18),c=r(d),p=a(4),h=(a(1),p.Form.Item),f=a(6),m=a(6),g=a(3),v=o.default.createClass({displayName:"UpdateCertPage",getInitialState:function(){return{certSet:{operation:"",errMsg:""},loading:!1,errMsg:"",cert:{},hints:{},validRules:[]}},componentDidMount:function(){this.state.validRules=[{id:"oldPasswd",desc:"原密码",required:!0,max:"0"},{id:"newPasswd",desc:"新密码",required:!0,max:"0"}]},handleOnChange:function(e){var t=this.state.cert;t[e.target.id]=e.target.value,m.validator(this,t,e.target.id),this.setState({cert:t})},clickUpdatePwd:function(e){if(this.state.errMsg="",m.formValidator(this,this.state.cert)){var t=g.paramUrl+"corp-key/update",a={};a.corpUuid=window.loginData.compUser.corpUuid;var r=this.state.cert.oldPasswd,i=this.state.cert.newPasswd,n=this.state.cert.confirmPad;if(i!=n)return void f.warnMsg("两次输入需要一致！");a.oldPasswd=r,a.newPasswd=i;var o=this;g.doUpdateService(t,a).then(function(e,t,a){null==e.errCode||""==e.errCode||"000000"==e.errCode?(o.showError(""),f.succMsg("密码修改成功！")):o.showError("处理错误["+e.errCode+"]["+e.errDesc+"]")},function(e,t,a){o.showError("未知错误")})}},showError:function(e){this.setState({errMsg:e})},onDismiss:function(){this.setState({errMsg:""})},render:function(){var e=this.state.errMsg,t="horizontal",a="form-item-"+t,r={labelCol:"vertical"==t?null:{span:6},wrapperCol:"vertical"==t?null:{span:18}},n=this.state.hints;return o.default.createElement("div",{className:"grid-page"},o.default.createElement("div",{style:{width:"400px",paddingLeft:"100px"}},o.default.createElement(u.default,{ref:"mxgBox",svcList:["corp-key/update"]}),o.default.createElement(p.Form,{layout:t},o.default.createElement(h,i({},r,{label:"原密码",required:!0,colon:!0,style:{marginBottom:"20px"},help:n.oldPasswdHint,validateStatus:n.oldPasswdStatus}),o.default.createElement(p.Input,{type:"password",name:"oldPasswd",id:"oldPasswd",value:this.state.cert.oldPasswd,onChange:this.handleOnChange})),o.default.createElement(h,i({},r,{label:"新密码",required:!0,colon:!0,style:{marginBottom:"20px"},className:a,help:n.newPasswdHint,validateStatus:n.newPasswdStatus}),o.default.createElement(p.Input,{type:"password",name:"newPasswd",id:"newPasswd",value:this.state.cert.newPasswd,onChange:this.handleOnChange})),o.default.createElement(h,i({},r,{label:"确认密码",required:!0,colon:!0,style:{marginBottom:"20px"},className:a,help:n.confirmPadHint,validateStatus:n.confirmPadStatus}),o.default.createElement(p.Input,{type:"password",name:"confirmPad",id:"confirmPad",value:this.state.cert.confirmPad,onChange:this.handleOnChange})),o.default.createElement(h,{style:{textAlign:"right"}},o.default.createElement(c.default,{message:e,toggle:this.onDismiss}),o.default.createElement(p.Button,{key:"btnOK",onClick:this.clickUpdatePwd,size:"large",type:"primary"},"提交")))))}});t.default=v},891:function(e,t,a){"use strict";var r=a(1),i=a(613),n=a(3),o=a(11),s=r.createStore({listenables:[i],corpUuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,init:function(){},getServiceUrl:function(e){return n.paramUrl+e},fireEvent:function(e,t,a){a.trigger({corpUuid:a.corpUuid,recordSet:a.recordSet,startPage:a.startPage,pageRow:a.pageRow,totalRow:a.totalRow,operation:e,errMsg:t}),o.showError("corp-key",e,t)},onCreateCorpKey:function(e){var t=this.getServiceUrl("corp-key/create");n.recordCreate(this,e,t)},onUpdateCorpKey:function(e){var t=this.getServiceUrl("corp-key/update");n.recordUpdate(this,e,t)},onDeleteCorpKey:function(e){var t=this.getServiceUrl("corp-key/remove");n.recordDelete(this,e,t)}});e.exports=s},892:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n=a(2),o=r(n),s=a(8),l=(r(s),a(5)),u=(r(l),a(4)),d=a(1),c=u.Checkbox.Group,p=(a(6),a(3)),h=a(119),f=a(103),m=a(205),g=a(157),v=o.default.createClass({displayName:"RoleCheckPage",getInitialState:function(){return{authSet:{object:null,errMsg:"",operation:""},roleSet:{recordSet:[],errMsg:"",operation:""},auth:{appUuid:"",roleList:""},roleLoading:!1,authLoading:!1,disabled:!0,selected:!1,userUuid:""}},mixins:[d.listenTo(h,"onServiceComplete"),d.listenTo(m,"onServiceComplete2")],onServiceComplete:function(e){"retrieve"===e.operation&&(this.state.roleSet=e,this.setState({roleLoading:!1}))},onServiceComplete2:function(e){this.state.authSet=e,e.object?(p.copyValue(e.object,this.state.auth),this.setState({authLoading:!1,selected:!0,disabled:!1})):this.setState({authLoading:!1,selected:!0,disabled:!0})},componentDidMount:function(){},componentWillReceiveProps:function(e){if(e.appUuid!==this.state.auth.appUuid){this.state.auth={appUuid:"",roleList:""};var t=e.appUuid;t&&(this.state.auth.appUuid=t,this.setState({roleLoading:!0}),f.initFntAppRole(t))}},loadData:function(e){this.state.auth.roleList="",this.setState({authLoading:!0,userUuid:e.uuid});var t={appUuid:this.props.appUuid,uuid:e.uuid};g.initAppAuth(t)},onAllow:function(){this.state.disabled||(this.state.auth.roleList=""),this.setState({disabled:!this.state.disabled})},onChange:function(e){this.state.auth.roleList=e.join(","),this.setState({authLoading:this.state.authLoading})},onClickSave:function(){this.setState({authLoading:!0});var e={filter:this.state.userUuid,object:{}};p.copyValue(this.state.auth,e.object),this.state.authSet.object?this.state.disabled?(e.object=this.state.authSet.object.uuid,g.deleteAppAuth(e)):g.updateAppAuth(e):this.state.disabled?this.setState({authLoading:!1}):g.createAppAuth(e)},render:function(){var e=this,t=this.state.roleSet.recordSet,a=this.state.auth.roleList?this.state.auth.roleList.split(","):[],r=t.map(function(t,a){return o.default.createElement("div",null,o.default.createElement(u.Checkbox,{style:{marginLeft:"10px",lineHeight:"30px"},value:t.roleName,disabled:e.state.disabled||!e.state.selected},t.roleName+"("+t.roleDesc+")"))}),n=this.state.roleLoading||this.state.authLoading,s=o.default.createElement("div",null,o.default.createElement(u.Checkbox,{style:{marginLeft:"10px",lineHeight:"30px"},disabled:!this.state.selected,onChange:this.onAllow,checked:!this.state.disabled},"允许使用"),o.default.createElement("div",{style:{border:"1px solid #e2e2e2",minHeight:"300px"}},o.default.createElement(c,{onChange:this.onChange,value:a},r)));return o.default.createElement("div",{style:i({height:"100%",padding:"2px 0 0 8px",borderLeft:" 1px solid #e2e2e2"},"padding","10px")},n?o.default.createElement(u.Spin,null,s):s,o.default.createElement("div",{style:{display:"block",textAlign:"right",margin:"14px 0 0 0"}},o.default.createElement(u.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave,loading:this.state.authLoading,disabled:!this.state.selected},"保存")))}});e.exports=v},893:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(4)),u=a(1),d=l.Input.Search,c=a(3),p=a(6),h=a(66),f=a(32),m="",g=10,v=n.default.createClass({displayName:"UserTablePage",getInitialState:function(){return{compUserSet:{deptUuid:"",recordSet:[],startPage:1,pageRow:10,totalRow:0,operation:"",errMsg:""},loading:!1,deptName:"",oldIndex:-1}},mixins:[u.listenTo(h,"onServiceComplete")],onServiceComplete:function(e){this.setState({loading:!1,compUserSet:e})},handleQueryClick:function(e){this.onChangePage(this.state.compUserSet.startPage)},componentDidMount:function(){this.onSearch("")},componentWillUnmount:function(){this.state.oldIndex!==-1&&(this.state.compUserSet.recordSet[this.state.oldIndex].isSelect=!1)},loadData:function(e,t,a){var r=a?0:1,i=a?0:g;this.state.compUserSet.operation="",this.state.compUserSet.startPage=r,this.state.compUserSet.pageRow=i,this.setState({loading:!0,oldIndex:-1,deptName:t});var n={corpUuid:window.loginData.compUser.corpUuid};null!==m&&""!==m&&(n.userCode=m,n.userName=m,n.perName=m),f.initCompUser(n,r,i)},onFilterRecord:function(e){m=e.target.value,this.setState({loading:this.state.loading})},onSearch:function(e){m=e,this.setState({loading:!0}),this.state.compUserSet.startPage=1;var t={corpUuid:window.loginData.compUser.corpUuid};null!==m&&""!==m&&(t.userCode=m,t.userName=m,t.perName=m),f.initCompUser(t,1,this.state.compUserSet.pageRow)},onChangePage:function(e){this.state.compUserSet.operation="",this.state.compUserSet.startPage=e,this.state.compUserSet.pageRow=g,this.setState({loading:!0});var t={corpUuid:window.loginData.compUser.corpUuid};null!==m&&""!==m&&(t.userCode=m,t.userName=m,t.perName=m),f.retrieveCompUserPage(t,e,g)},onShowSizeChange:function(e,t){g=t,this.handleQueryClick()},getRowClassName:function(e,t){return e.isSelect?"selected":""},onRowClick:function(e,t,a){this.props.onSelectUser(e);var r=this.state.oldIndex;r>-1&&(this.state.compUserSet.recordSet[r].isSelect=!1),this.state.compUserSet.recordSet[t].isSelect=!0,this.setState({oldIndex:t})},render:function(){var e=this,t=this.state.compUserSet.recordSet,a=[{title:"用户名",dataIndex:"userName",key:"userName",width:100},{title:"用户姓名",dataIndex:"perName",key:"perName",width:100},{title:"员工编号",dataIndex:"userCode",key:"userCode",width:100},{title:"职务",dataIndex:"userTitle",key:"userTitle",width:100},{title:"用户组",dataIndex:"userGroup",key:"userGroup",width:200},{title:"用户类型",dataIndex:"userType",key:"userType",width:90,render:function(t,a){return c.getOptionName("用户管理","用户类型",a.userType,!0,e)}}],r="sys"!==this.props.type&&{showQuickJumper:!0,total:this.state.compUserSet.totalRow,pageSize:this.state.compUserSet.pageRow,current:this.state.compUserSet.startPage,size:"large",showSizeChanger:!0,onShowSizeChange:this.onShowSizeChange,onChange:this.onChangePage};return n.default.createElement("div",{className:"grid-page",style:{padding:"58px 0 0 0"}},n.default.createElement("div",{style:{margin:"-58px 0 0 0"}},n.default.createElement("div",{className:"toolbar-table"},n.default.createElement("div",{style:{textAlign:"right",width:"100%",paddingRight:"2px"}},n.default.createElement(d,{placeholder:"查找记录",style:{width:p.searchWidth},value:m,onSearch:this.onSearch,onChange:this.onFilterRecord})))),n.default.createElement("div",{className:"grid-body"},n.default.createElement(l.Table,{columns:a,dataSource:t,rowKey:function(e){return e.userName},loading:this.state.loading,size:"middle",pagination:r,bordered:p.tableBorder,onRowClick:this.onRowClick,rowClassName:this.getRowClassName})))}});e.exports=v},894:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(13),a(7)),u=r(l),d=a(4),c=a(893),p=r(c),h=a(892),f=r(h),m=a(629),g=(r(m),a(1),d.Form.Item,d.Select.Option,d.Tabs.TabPane),v=a(3),S=a(6),y=n.default.createClass({displayName:"CorpAppAuthPage",getInitialState:function(){return{corpApp:{},loading:!1}},componentDidMount:function(){this.initPage(this.props.corpApp)},componentWillReceiveProps:function(e){this.initPage(e.corpApp)},initPage:function(e){v.copyValue(e,this.state.corpApp),this.setState({loading:!1}),"undefined"!=typeof this.refs.mxgBox&&this.refs.mxgBox.clear()},goBack:function(){this.props.onBack()},onTabChange:function(e){"1"===e&&this.props.onBack()},onSelectDept:function(e){null===e?this.refs.userTable.loadData("",""):this.refs.userTable.loadData(e.uuid,e.deptName)},onSelectUser:function(e){this.refs.roleCheck.loadData(e)},render:function(){var e=window.loginData.compUser,t=null===e?"":e.corpUuid,a=null===this.state.corpApp?"":this.state.corpApp.appUuid,r=S.getGridMargin(this,0);return n.default.createElement("div",{style:{overflow:"hidden",height:"100%",paddingLeft:"4px"}},n.default.createElement(d.Tabs,{defaultActiveKey:"2",onChange:this.onTabChange,tabBarStyle:{paddingLeft:"16px",margin:"-36px 0 0"},style:{width:"100%",height:"100%",padding:"36px 0 0"}},n.default.createElement(g,{tab:"返回",key:"1",style:{width:"100%",height:"100%"}}),n.default.createElement(g,{tab:"权限管理",key:"2",style:{width:"100%",height:"100%"}},n.default.createElement("div",{className:"grid-page",style:{padding:r.padding}},n.default.createElement("div",{style:{margin:r.margin}},n.default.createElement(u.default,{ref:"mxgBox",svcList:["auth-dept/retrieve","comp-user/retrieve","app-auth1/create","app-auth1/retrieve","app-auth1/update","app-auth1/delete"]})),n.default.createElement("div",{style:{display:"flex",height:"100%"}},n.default.createElement("div",{style:{width:"100%"}},n.default.createElement(p.default,{ref:"userTable",corpUuid:t,onSelectUser:this.onSelectUser})),n.default.createElement("div",{className:"left-tree",style:{flex:"0 0 280px",width:"280px",overflowY:"auto",overflowX:"hidden"}},n.default.createElement(f.default,{ref:"roleCheck",appUuid:a})))))))}});e.exports=y},895:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),n=r(i),o=a(5),s=(r(o),a(7)),l=r(s),u=a(9),d=(r(u),a(4)),c=a(1),p=a(6),h=a(614),f=a(398),m=n.default.createClass({displayName:"SelectAppPage",getInitialState:function(){return{corpAppSet:{operation:"",errMsg:""},loading:!1,modal:!1,selectedRows:[],selectedRowKeys:[],corpUuid:"",appList:[]}},mixins:[c.listenTo(h,"onServiceComplete")],onServiceComplete:function(e){this.state.modal&&"create"===e.operation&&(""===e.errMsg?this.setState({modal:!1}):this.setState({loading:!1,corpAppSet:e}))},componentDidMount:function(){},clear:function(e,t,a){var r={};t.map(function(e,t){r[e.appUuid]=e});var i=[];a.map(function(e,t){var a=r[e.uuid];null!==a&&"undefined"!=typeof a||i.push(e)}),this.setState({corpUuid:e,appList:i})},toggle:function(){this.setState({modal:!this.state.modal})},onSelectChange:function(e){this.setState({selectedRowKeys:e})},onClickSave:function(){var e=this,t=[];this.state.selectedRows.map(function(a,r){var i={};i.appUuid=a.uuid,i.corpUuid=e.state.corpUuid,i.appType="1",t.push(i)}),0===t.length&&this.setState({modal:!1}),this.setState({loading:!0}),f.createAuthCorpApp(t)},render:function(){var e=this,t=this.state.appList,a=[{title:"应用名称",dataIndex:"appName",key:"appName",width:140},{title:"应用编号",dataIndex:"appCode",key:"appCode",width:240}],r=this.state.selectedRowKeys,i={selectedRowKeys:r,onChange:this.onSelectChange,onSelectAll:function(t,a,r){e.state.selectedRows=a},onSelect:function(t,a,r){e.state.selectedRows=r}};return n.default.createElement(d.Modal,{visible:this.state.modal,width:"760px",title:"订阅App",maskClosable:!1,onOk:this.onClickSave,onCancel:this.toggle,footer:[n.default.createElement("div",{key:"footerDiv",style:{display:"block",textAlign:"right"}},n.default.createElement(l.default,{ref:"mxgBox",svcList:["auth-corp-app/create"]}),n.default.createElement(d.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave},"订阅")," ",n.default.createElement(d.Button,{key:"btnClose",size:"large",onClick:this.toggle},"取消"))]},n.default.createElement(d.Table,{style:{marginBottom:"10px"},rowSelection:i,columns:a,dataSource:t,rowKey:function(e){return e.uuid},loading:this.state.loading,scroll:{y:320},size:"middle",pagination:!1,bordered:p.tableBorder}))}});t.default=m},896:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(7)),u=r(l),d=a(4),c=a(895),p=r(c),h=a(894),f=r(h),m=a(1),g=a(6),v=(a(3),a(614)),S=a(398),y=a(158),C=a(128),w=n.default.createClass({displayName:"CorpAppPage",getInitialState:function(){return{corpAppSet:{recordSet:[],operation:"",errMsg:""},loading:!1,appLoading:!1,appMap:{},appList:[],corpApp:null,action:"query"}},mixins:[m.listenTo(v,"onServiceComplete"),m.listenTo(y,"onLoadAppComplete")],onServiceComplete:function(e){this.setState({loading:!1,corpAppSet:e})},onLoadAppComplete:function(e){var t={};""===e.errMsg&&e.recordSet.map(function(e,a){t[e.uuid]=e}),this.setState({appLoading:!1,appMap:t,appList:e.recordSet})},handleQueryClick:function(e){this.setState({loading:!0}),this.state.corpAppSet.operation="";var t=window.loginData.compUser,a=null===t?"":t.corpUuid;S.retrieveAuthCorpApp(a)},componentDidMount:function(){this.setState({loading:!0,appLoading:!0});var e=window.loginData.compUser,t=null===e?"":e.corpUuid;S.initAuthCorpApp(t),C.initFntApp()},handleOpenCreateWindow:function(e){var t=window.loginData.compUser;null!==t&&(this.refs.selectAppPage.clear(t.corpUuid,this.state.corpAppSet.recordSet,this.state.appList),this.refs.selectAppPage.toggle())},handleRemoveClick:function(e,t){d.Modal.confirm({title:"删除确认",content:"是否删除选中的APP 【"+e.uuid+"】",okText:"确定",cancelText:"取消",onOk:this.onClickDelete2.bind(this,e)}),t.stopPropagation()},onClickDelete2:function(e){this.setState({loading:!0}),this.state.corpAppSet.operation="",S.deleteAuthCorpApp(e.uuid)},handleAppClick:function(e){this.setState({action:"appRole",corpApp:e})},onBack:function(){this.setState({action:"query"})},render:function(){var e=this,t=[],a=this.state.corpAppSet.recordSet;a.map(function(a,r){var i=e.state.appMap[a.appUuid];null!==i&&"undefined"!=typeof i&&(a.appCode=i.appCode,a.appName=i.appName,t.push(a))});var r=t.map(function(t,a){return n.default.createElement("div",{key:t.uuid,className:"card-div",style:{width:300}},n.default.createElement("div",{className:"ant-card ant-card-bordered",style:{width:"100%"},onClick:e.handleAppClick.bind(e,t),title:"点击修改权限信息"},n.default.createElement("div",{className:"ant-card-head"},n.default.createElement("h3",{className:"ant-card-head-title"},t.appCode)),n.default.createElement("div",{className:"ant-card-extra"},n.default.createElement("a",{href:"#",onClick:e.handleRemoveClick.bind(e,t),title:"删除"},n.default.createElement(d.Icon,{type:g.iconRemove}))),n.default.createElement("div",{className:"ant-card-body",style:{cursor:"pointer",height:"66px",overflow:"hidden"}},t.appName)))}),i="query"===this.state.action?"":"none",o=this.state.loading||this.state.appLoading,s=g.getCardMargin(this),l=n.default.createElement("div",{className:"card-page",style:{padding:s.padding,display:i}},n.default.createElement("div",{style:{margin:s.margin}},n.default.createElement(u.default,{ref:"mxgBox",svcList:["auth-corp-app/retrieve","auth-corp-app/remove"]}),n.default.createElement("div",{className:"toolbar-card"},n.default.createElement("div",{style:{float:"left"}},n.default.createElement("div",{style:{paddingTop:"16px",paddingRight:"4px",display:"inline"}},"已订阅",t.length,"个APP"),n.default.createElement(d.Icon,{type:"plus-circle-o",onClick:this.handleOpenCreateWindow,title:"订阅APP",className:"toolbar-icon",style:{color:"#108ee9"}}),n.default.createElement(d.Icon,{type:"reload",onClick:this.handleQueryClick,title:"刷新数据",className:"toolbar-icon",style:{paddingLeft:"8px"}})))),o?n.default.createElement(d.Spin,{tip:"正在努力加载数据...",style:{minHeight:"200px"}},r):n.default.createElement("div",{className:"card-body"},r),n.default.createElement(p.default,{ref:"selectAppPage"})),c=null;return"appRole"===this.state.action&&(c=n.default.createElement(f.default,{corpApp:this.state.corpApp,onBack:this.onBack})),n.default.createElement("div",{style:{width:"100%",height:"100%"}},l,c)}});e.exports=w},900:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=r(s),u=a(7),d=r(u),c=a(4),p=a(1),h=a(6),f=c.Form.Item,m=(c.Select.Option,a(306)),g=a(244),v=o.default.createClass({displayName:"CreateDeptPage",getInitialState:function(){return{deptSet:{operation:"",errMsg:""},loading:!1,modal:!1,dept:{},hints:{},validRules:[]}},componentDidMount:function(){this.state.validRules=[{id:"deptCode",desc:"部门编号",required:!0,max:64},{id:"deptName",desc:"部门名称",max:128},{id:"deptDesc",desc:"部门描述",max:512}]},toggle:function(){this.setState({modal:!this.state.modal})},clear:function(e,t){this.state.hints={},this.state.dept.deptCode="",this.state.dept.deptName="",this.state.dept.deptDesc="",this.state.dept.corpUuid=e,this.state.dept.puuid=t,this.state.loading=!1,this.state.deptSet.operation="",this.state.modal||"undefined"==typeof this.refs.mxgBox||this.refs.mxgBox.clear()},handleOnChange:function(e){var t=this.state.dept;t[e.target.id]=e.target.value,h.validator(this,t,e.target.id),this.setState({dept:t})},onClickSave:function(){h.formValidator(this,this.state.dept)&&(this.state.deptSet.operation="",this.setState({loading:!0}),g.createAuthDept(this.state.dept))},render:function(){if(this.state.modal&&"create"===this.state.deptSet.operation&&""===this.state.deptSet.errMsg)return this.state.modal=!1,null;this.state.loading&&"create"===this.state.deptSet.operation&&(this.state.loading=!1);var e="vertical",t="form-item-"+e,a={labelCol:"vertical"==e?null:{span:4},wrapperCol:"vertical"==e?null:{span:20}},r=this.state.hints;return o.default.createElement(c.Modal,{visible:this.state.modal,width:"540px",title:"增加部门",maskClosable:!1,onOk:this.onClickSave,onCancel:this.toggle,footer:[o.default.createElement("div",{key:"footerDiv",style:{display:"block",textAlign:"right"}},o.default.createElement(d.default,{ref:"mxgBox",svcList:["auth-dept/create"]}),o.default.createElement(c.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave,loading:this.state.loading},"保存")," ",o.default.createElement(c.Button,{key:"btnClose",size:"large",onClick:this.toggle},"取消"))]},o.default.createElement(c.Form,{layout:e},o.default.createElement(f,i({},a,{label:"部门代码",required:!0,colon:!0,className:t,help:r.deptCodeHint,validateStatus:r.deptCodeStatus}),o.default.createElement(c.Input,{type:"text",name:"deptCode",id:"deptCode",value:this.state.dept.deptCode,onChange:this.handleOnChange})),o.default.createElement(f,i({},a,{label:"部门名称",colon:!0,className:t,help:r.deptNameHint,validateStatus:r.deptNameStatus}),o.default.createElement(c.Input,{type:"text",name:"deptName",id:"deptName",value:this.state.dept.deptName,onChange:this.handleOnChange})),o.default.createElement(f,i({},a,{label:"部门描述",colon:!0,className:t,help:r.deptDescHint,validateStatus:r.deptDescStatus}),o.default.createElement(c.Input,{type:"textarea",name:"deptDesc",id:"deptDesc",value:this.state.dept.deptDesc,onChange:this.handleOnChange,style:{height:"80px"}}))))}});l.default.onClass(v,p.connect(m,"deptSet")),t.default=v},901:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=r(s),u=a(7),d=r(u),c=a(4),p=a(1),h=a(3),f=a(6),m=c.Form.Item,g=(c.Select.Option,a(306)),v=a(244),S=o.default.createClass({displayName:"UpdateDeptPage",getInitialState:function(){return{deptSet:{operation:"",errMsg:""},loading:!1,modal:!1,dept:{},hints:{},validRules:[]}},componentDidMount:function(){this.state.validRules=[{id:"deptCode",desc:"部门编号",required:!0,max:64},{id:"deptName",desc:"部门名称",max:128},{id:"deptDesc",desc:"部门描述",max:512}]},toggle:function(){this.setState({modal:!this.state.modal})},initPage:function(e){this.state.hints={},h.copyValue(e,this.state.dept),this.state.loading=!1,this.state.deptSet.operation="",this.state.modal||"undefined"==typeof this.refs.mxgBox||this.refs.mxgBox.clear()},handleOnChange:function(e){var t=this.state.dept;t[e.target.id]=e.target.value,f.validator(this,t,e.target.id),this.setState({dept:t})},onClickSave:function(){f.formValidator(this,this.state.dept)&&(this.state.deptSet.operation="",this.setState({loading:!0}),v.updateAuthDept(this.state.dept))},render:function(){if(this.state.modal&&"update"===this.state.deptSet.operation&&""===this.state.deptSet.errMsg)return this.state.modal=!1,null;this.state.loading&&"update"===this.state.deptSet.operation&&(this.state.loading=!1);var e="vertical",t="form-item-"+e,a={labelCol:"vertical"==e?null:{span:4},wrapperCol:"vertical"==e?null:{span:20}},r=this.state.hints;return o.default.createElement(c.Modal,{visible:this.state.modal,width:"540px",title:"修改部门信息",maskClosable:!1,onOk:this.onClickSave,onCancel:this.toggle,footer:[o.default.createElement("div",{key:"footerDiv",style:{display:"block",textAlign:"right"}},o.default.createElement(d.default,{ref:"mxgBox",svcList:["auth-dept/update"]}),o.default.createElement(c.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave,loading:this.state.loading},"保存")," ",o.default.createElement(c.Button,{key:"btnClose",size:"large",onClick:this.toggle},"取消"))]},o.default.createElement(c.Form,{layout:e},o.default.createElement(m,i({},a,{label:"部门代码",required:!0,colon:!0,className:t,help:r.deptCodeHint,validateStatus:r.deptCodeStatus}),o.default.createElement(c.Input,{type:"text",name:"deptCode",id:"deptCode",value:this.state.dept.deptCode,onChange:this.handleOnChange})),o.default.createElement(m,i({},a,{label:"部门名称",colon:!0,className:t,help:r.deptNameHint,validateStatus:r.deptNameStatus}),o.default.createElement(c.Input,{type:"text",name:"deptName",id:"deptName",value:this.state.dept.deptName,onChange:this.handleOnChange})),o.default.createElement(m,i({},a,{label:"部门描述",colon:!0,className:t,help:r.deptDescHint,validateStatus:r.deptDescStatus}),o.default.createElement(c.Input,{type:"textarea",name:"deptDesc",id:"deptDesc",value:this.state.dept.deptDesc,onChange:this.handleOnChange,style:{height:"80px"}}))))}});l.default.onClass(S,p.connect(g,"deptSet")),t.default=S},964:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=(r(s),a(7)),u=r(l),d=a(9),c=r(d),p=a(4),h=a(12),f=r(h),m=a(1),g=a(6),v=p.Form.Item,S=(p.Select.Option,a(404)),y=a(310),C=o.default.createClass({displayName:"CreateSuperUserPage",getInitialState:function(){return{superUserSet:{operation:"",errMsg:""},loading:!1,modal:!1,superUser:{},hints:{},validRules:[]}},mixins:[m.listenTo(S,"onServiceComplete"),(0,c.default)("superUser")],onServiceComplete:function(e){this.state.modal&&"create"===e.operation&&(""===e.errMsg?this.setState({modal:!1}):this.setState({loading:!1,superUserSet:e}))},componentDidMount:function(){this.state.validRules=[{id:"userName",desc:"用户名",required:!0,max:"32"},{id:"userType",desc:"访问类型",required:!0,max:"32"},{id:"passwd",desc:"证书密码",required:!0,max:"0"}]},clear:function(e){this.state.hints={},this.state.superUser.uuid="",this.state.superUser.corpUuid=e,this.state.superUser.userName="",this.state.superUser.userType="",this.state.superUser.passwd="",this.state.loading=!1,this.state.superUserSet.operation="",this.state.modal||"undefined"==typeof this.refs.mxgBox||this.refs.mxgBox.clear()},onClickSave:function(){g.formValidator(this,this.state.superUser)&&(this.state.superUserSet.operation="",this.setState({loading:!0}),y.createSuperUser(this.state.superUser))},render:function(){var e="horizontal",t="form-item-"+e,a={labelCol:"vertical"==e?null:{span:6},wrapperCol:"vertical"==e?null:{span:16}},r=this.state.hints;return o.default.createElement(p.Modal,{visible:this.state.modal,width:"540px",title:"增加超级用户",maskClosable:!1,onOk:this.onClickSave,onCancel:this.toggle,footer:[o.default.createElement("div",{key:"footerDiv",style:{display:"block",textAlign:"right"}},o.default.createElement(u.default,{ref:"mxgBox",svcList:["super-user/create"]}),o.default.createElement(p.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave,loading:this.state.loading},"保存")," ",o.default.createElement(p.Button,{key:"btnClose",size:"large",onClick:this.toggle},"取消"))]},o.default.createElement(p.Form,{layout:e},o.default.createElement(v,i({},a,{label:"用户名",required:!0,colon:!0,className:t,help:r.userNameHint,validateStatus:r.userNameStatus}),o.default.createElement(p.Input,{type:"text",name:"userName",id:"userName",value:this.state.superUser.userName,onChange:this.handleOnChange})),o.default.createElement(v,i({},a,{label:"访问类型",required:!0,colon:!0,className:t,help:r.userTypeHint,validateStatus:r.userTypeStatus}),o.default.createElement(f.default,{name:"userType",id:"userType",value:this.state.superUser.userType,appName:"用户管理",optName:"访问类型",onSelect:this.handleOnSelected.bind(this,"userType")})),o.default.createElement(v,i({},a,{label:"企业证书密码",required:!0,colon:!0,style:{marginBottom:"20px"},className:t,help:r.passwdHint,validateStatus:r.passwdStatus}),o.default.createElement(p.Input,{type:"password",name:"passwd",id:"passwd",value:this.state.superUser.passwd,onChange:this.handleOnChange}))))}});t.default=C},965:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=(r(s),a(7)),u=r(l),d=a(9),c=r(d),p=a(4),h=a(12),f=r(h),m=a(1),g=a(6),v=a(3),S=p.Form.Item,y=(p.Select.Option,a(404)),C=a(310),w=o.default.createClass({displayName:"UpdateSuperUserPage",getInitialState:function(){return{superUserSet:{operation:"",errMsg:""},loading:!1,modal:!1,superUser:{},hints:{},validRules:[]}},mixins:[m.listenTo(y,"onServiceComplete"),(0,c.default)("superUser")],onServiceComplete:function(e){var t=this;this.state.modal&&"update"===e.operation&&(""===e.errMsg?(e.recordSet.map(function(e,a){e.uuid===t.state.superUser.uuid&&(e.status=t.state.superUser.status);
}),this.setState({modal:!1,superUserSet:e})):this.setState({loading:!1,superUserSet:e}))},componentDidMount:function(){this.state.validRules=[{id:"passwd",desc:"证书密码",required:!0,max:"0"}]},initPage:function(e){this.state.superUser.passwd="",this.state.hints={},v.copyValue(e,this.state.superUser),this.state.loading=!1,this.state.superUserSet.operation="",this.state.modal||"undefined"==typeof this.refs.mxgBox||this.refs.mxgBox.clear()},onClickSave:function(){g.formValidator(this,this.state.superUser)&&(this.state.superUserSet.operation="",this.setState({loading:!0}),"1"===this.state.superUser.status?this.state.superUser.status="0":this.state.superUser.status="1",C.updateSuperUser(this.state.superUser))},render:function(){var e="horizontal",t="form-item-"+e,a={labelCol:"vertical"==e?null:{span:6},wrapperCol:"vertical"==e?null:{span:16}},r=this.state.hints;return o.default.createElement(p.Modal,{visible:this.state.modal,width:"540px",title:"【启用/禁用】用户",maskClosable:!1,onOk:this.onClickSave,onCancel:this.toggle,footer:[o.default.createElement("div",{key:"footerDiv",style:{display:"block",textAlign:"right"}},o.default.createElement(u.default,{ref:"mxgBox",svcList:["super-user/update"]}),o.default.createElement(p.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave,loading:this.state.loading},"保存")," ",o.default.createElement(p.Button,{key:"btnClose",size:"large",onClick:this.toggle},"取消"))]},o.default.createElement(p.Form,{layout:e},o.default.createElement(S,i({},a,{label:"用户名",required:!1,colon:!0,className:t,help:r.userNameHint,validateStatus:r.userNameStatus}),o.default.createElement(p.Input,{type:"text",name:"userName",id:"userName",value:this.state.superUser.userName,onChange:this.handleOnChange,disabled:!0})),o.default.createElement(S,i({},a,{label:"访问类型",required:!1,colon:!0,className:t,help:r.userTypeHint,validateStatus:r.userTypeStatus}),o.default.createElement(f.default,{name:"userType",id:"userType",value:this.state.superUser.userType,appName:"用户管理",optName:"访问类型",onSelect:this.handleOnSelected.bind(this,"userType"),disabled:!0})),o.default.createElement(S,i({},a,{label:"企业证书密码",required:!0,colon:!0,style:{marginBottom:"20px"},className:t,help:r.passwdHint,validateStatus:r.passwdStatus}),o.default.createElement(p.Input,{type:"password",name:"passwd",id:"passwd",value:this.state.superUser.passwd,onChange:this.handleOnChange}))))}});t.default=w},966:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(7)),u=r(l),d=a(4),c=a(964),p=r(c),h=a(965),f=r(h),m=a(1),g=a(6),v=a(3),S=a(404),y=a(310),C=n.default.createClass({displayName:"SuperUserPage",getInitialState:function(){return{superUserSet:{corpUuid:"",recordSet:[],startPage:0,pageRow:0,totalRow:0,operation:"",errMsg:""},loading:!1}},mixins:[m.listenTo(S,"onServiceComplete")],onServiceComplete:function(e){this.setState({loading:!1,superUserSet:e})},handleQueryClick:function(e){this.setState({loading:!0}),this.state.superUserSet.operation="",y.retrieveSuperUser(this.state.superUserSet.corpUuid)},componentDidMount:function(){this.setState({loading:!0});var e=window.loginData.compUser,t=null===e?"":e.corpUuid;y.initSuperUser(t)},handleOpenCreateWindow:function(e){this.refs.createWindow.clear(this.state.superUserSet.corpUuid),this.refs.createWindow.toggle()},onClickUpdate:function(e,t){null!=e&&(this.refs.updateWindow.initPage(e),this.refs.updateWindow.toggle())},render:function(){var e=this,t=this.state.superUserSet.recordSet,a=[{title:"用户名",dataIndex:"userName",key:"userName",width:140},{title:"访问类型",dataIndex:"userType",key:"userType",width:140,render:function(t,a){return v.getOptionName("用户管理","访问类型",a.userType,!1,e)}},{title:"状态",dataIndex:"status",key:"status",width:140,render:function(t,a){return v.getOptionName("common","启用状态",a.status,!1,e)}},{title:"更多操作",key:"action",width:100,render:function(t,a){return n.default.createElement("span",null,n.default.createElement(d.Button,{onClick:e.onClickUpdate.bind(e,a),style:{marginLeft:"4px",display:"0"===a.status?"block":"none"}},"启用"),n.default.createElement(d.Button,{onClick:e.onClickUpdate.bind(e,a),style:{marginLeft:"4px",display:"1"===a.status?"block":"none"}},"禁用"))}}],r=g.getGridMargin(this);return n.default.createElement("div",{className:"grid-page",style:{padding:r.padding}},n.default.createElement("div",{style:{margin:r.margin}},n.default.createElement(u.default,{ref:"mxgBox",svcList:["super-user/retrieve","super-user/remove"]}),n.default.createElement("div",{className:"toolbar-table"},n.default.createElement("div",{style:{float:"left"}},n.default.createElement(d.Button,{icon:g.iconAdd,type:"primary",title:"增加超级用户",onClick:this.handleOpenCreateWindow}),n.default.createElement(d.Button,{icon:g.iconRefresh,title:"刷新数据",onClick:this.handleQueryClick,style:{marginLeft:"4px"}})))),n.default.createElement("div",{className:"grid-body"},n.default.createElement(d.Table,{columns:a,dataSource:t,rowKey:function(e){return e.uuid},loading:this.state.loading,pagination:!1,size:"middle",bordered:g.tableBorder})),n.default.createElement(p.default,{ref:"createWindow"}),n.default.createElement(f.default,{ref:"updateWindow"}))}});e.exports=C},968:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(2),n=(r(i),a(13),a(627)),o=r(n),s=a(626),l=r(s),u=a(61),d=r(u),c=[{path:"/",component:o.default},{path:"/uman.html",component:o.default},{path:"/main/",component:l.default,childRoutes:[{path:"passwd/",component:a(38)},{path:"logout/",component:a(37)}]},a(969),{path:"*",component:d.default}];t.default=c},969:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(626),n=r(i),o=a(627),s=r(o),l=a(282),u=(r(l),a(615)),d=r(u);e.exports={path:"/uman",component:n.default,indexRoute:{component:s.default},childRoutes:[{path:"/uman/",component:a(970),indexRoute:{component:d.default},childRoutes:[{path:"CertPage/",component:a(888)},{path:"DeptPage/",component:a(615)},{path:"UserPage/",component:a(977)},{path:"SuperUserPage/",component:a(966)},{path:"CorpAppPage/",component:a(896)},{path:"UserGroupPage/",component:a(975)}]}]}},970:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(23),s=r(o),l={children:n.default.PropTypes.node},u=n.default.createClass({displayName:"AuthPageIndex",getInitialState:function(){return{navItems:[{name:"机构维护",to:"/uman/DeptPage/"},{name:"用户组管理",to:"/uman/UserGroupPage/"},{name:"用户管理",to:"/uman/UserPage/"},{name:"权限管理",to:"/uman/CorpAppPage/"},{name:"证书管理",to:"/uman/CertPage/"},{name:"特权用户",to:"/uman/SuperUserPage/"}]}},render:function(){return n.default.createElement(s.default,{navItems:this.state.navItems,activeNode:"/uman/DeptPage/",children:this.props.children})}});u.propTypes=l,e.exports=u},971:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(7)),u=r(l),d=a(4),c=a(972),p=r(c),h=a(1),f=a(6),m=(a(3),a(311)),g=a(208),v=a(93),S=a(73),y=a(158),C=a(128),w=a(406),U=a(628),E=n.default.createClass({displayName:"UserPrivPage",getInitialState:function(){return{userPrivSet:{recordSet:[],errMsg:""},loading:!1,appLoading:!1,userLoading:!1,appMap:{},appList:[],userPriv:null,action:"query",userGroup:this.props.userGroup}},mixins:[h.listenTo(m,"onServiceComplete"),h.listenTo(y,"onLoadAppComplete"),h.listenTo(v,"onLoadUserComplete"),h.listenTo(U,"onLoadUserComplete1")],onServiceComplete:function(e){this.setState({loading:!1,userPrivSet:e})},onLoadAppComplete:function(e){var t={};""===e.errMsg&&e.recordSet.map(function(e,a){t[e.uuid]=e}),this.setState({appLoading:!1,appMap:t,appList:e.recordSet})},onLoadUserComplete:function(e){},onLoadUserComplete1:function(e){this.setState({userLoading:!1,userGroup:e.userGroup})},handleQueryClick:function(e){},loadData:function(e){if(e){this.state.userGroup=e;var t=window.loginData.compUser.corpUuid;S.initUserGroup(t),w.getUserByUuid(e.uuid)}},componentDidMount:function(){this.setState({loading:!0,appLoading:!0});var e=window.loginData.compUser.corpUuid;g.initUserPriv(e),C.initFntApp()},handleAppClick:function(e){this.state.userGroup?(this.setState({userPriv:e}),this.refs.roleCheck.loadData(this.state.userGroup,e.appUuid)):f.infoMsg("请选择用户组")},render:function(){var e=this,t=[],a=this.state.userPrivSet.recordSet,r=null===this.state.userPriv?"":this.state.userPriv.appUuid;a.map(function(a,r){var i=e.state.appMap[a.appUuid];null!==i&&"undefined"!=typeof i&&(a.uuid=i.uuid,a.appCode=i.appCode,a.appName=i.appName,t.push(a))});var i={},o="",s=this.state.userGroup;s&&(void 0!==s.appAuthList&&null!==s.appAuthList&&s.appAuthList.map(function(e,t){e&&(i[e.appUuid]=e)}),o=s.groupName);var l=t.map(function(t,a){var r=i[t.uuid],o=void 0===r||null===r?null:n.default.createElement(d.Icon,{type:"check"}),s=null;return s=e.state.userPriv===t?n.default.createElement("span",{style:{color:"#49a9ee"}},t.appCode):t.appCode,n.default.createElement("div",{key:t.uuid,className:"card-div",style:{width:300}},n.default.createElement("div",{className:"ant-card ant-card-bordered",style:{width:"100%"},onClick:e.handleAppClick.bind(e,t),title:"点击修改权限信息"},n.default.createElement("div",{className:"ant-card-head"},n.default.createElement("h3",{className:"ant-card-head-title"},s)),n.default.createElement("div",{className:"ant-card-extra"},o),n.default.createElement("div",{className:"ant-card-body",style:{cursor:"pointer",height:"66px",overflow:"hidden"}},t.appName)))}),c="query"===this.state.action?"":"none",h=this.state.loading||this.state.appLoading||this.state.userLoading,m=f.getCardMargin(this),g=n.default.createElement("div",{className:"card-page",style:{padding:m.padding,display:c}},n.default.createElement("div",{style:{margin:m.margin}},n.default.createElement(u.default,{ref:"mxgBox",svcList:["user-group/retrieve","user-group/remove","appAuth/create","appAuth/retrieve","appAuth/update","appAuth/delete"]}),n.default.createElement("div",{className:"toolbar-card"},n.default.createElement("div",{style:{float:"left",width:"200px"}},n.default.createElement("div",{style:{paddingTop:"16px",paddingRight:"4px",display:"inline"}},"用户组【",o,"】的权限设置")))),h?n.default.createElement(d.Spin,{tip:"正在努力加载数据...",style:{minHeight:"200px"}},l):n.default.createElement("div",{className:"card-body"},l));return n.default.createElement("div",{style:{display:"flex",height:"100%"}},n.default.createElement("div",{className:"left-tree",style:{width:"100%",overflowY:"auto",overflowX:"hidden"}},g),n.default.createElement("div",{className:"left-tree",style:{flex:"0 0 280px",width:"280px",overflowY:"auto",overflowX:"hidden",paddingTop:"0"}},n.default.createElement(p.default,{ref:"roleCheck",appUuid:r,user:this.state.userGroup})))}});e.exports=E},972:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var n=a(2),o=r(n),s=a(8),l=(r(s),a(5)),u=(r(l),a(4)),d=a(1),c=u.Checkbox.Group,p=(a(6),a(3)),h=a(119),f=a(103),m=(a(93),a(73),a(406)),g=a(628),v=o.default.createClass({displayName:"CheckPage1",getInitialState:function(){return{roleSet:{recordSet:[],errMsg:""},userGroupUuid:"",oldAuth:null,newAuth:{},roleLoading:!1,authLoading:!1,disabled:!0,selected:!1}},mixins:[d.listenTo(h,"onServiceComplete"),d.listenTo(g,"onServiceComplete2")],onServiceComplete:function(e){"retrieve"===e.operation&&(this.state.roleSet=e,this.setState({roleLoading:!1}))},onServiceComplete2:function(e){this.state.oldAuth=e.object,e.object?(p.copyValue(e.object,this.state.newAuth),this.setState({authLoading:!1,selected:!0,disabled:!1})):this.setState({authLoading:!1,selected:!0,disabled:!0})},componentDidMount:function(){},loadData:function(e,t){t&&(this.setState({roleLoading:!0}),f.initFntAppRole(t));var a=null;if(t&&e&&e.appAuthList)for(var r=e.appAuthList.length,i=0;i<r;i++)if(e.appAuthList[i]&&e.appAuthList[i].appUuid===t){a=e.appAuthList[i];break}var n={};null===a?n={appUuid:t,roleList:""}:p.copyValue(a,n);var o=null!==e&&null!==t;this.setState({oldAuth:a,newAuth:n,userGroupUuid:e.uuid,selected:o,disabled:null===a})},onAllow:function(){this.state.disabled||(this.state.newAuth.roleList=""),this.setState({disabled:!this.state.disabled})},onChange:function(e){this.state.newAuth.roleList=e.join(","),this.setState({authLoading:this.state.authLoading})},onClickSave:function(){this.setState({authLoading:!0});var e={filter:this.state.userGroupUuid,object:{}};p.copyValue(this.state.newAuth,e.object),this.state.oldAuth?this.state.disabled?(e.object=this.state.oldAuth.appUuid,e.appUuid=this.state.oldAuth.appUuid,m.deleteAppAuth(e)):m.updateAppAuth(e):this.state.disabled?this.setState({authLoading:!1}):m.createAppAuth(e)},render:function(){var e=this,t=this.state.roleSet.recordSet,a=this.state.newAuth.roleList?this.state.newAuth.roleList.split(","):[],r=t.map(function(t,a){return o.default.createElement("div",null,o.default.createElement(u.Checkbox,{style:{marginLeft:"10px",lineHeight:"30px"},value:t.roleName,disabled:e.state.disabled||!e.state.selected},t.roleName+"("+t.roleDesc+")"))}),n=this.state.roleLoading||this.state.authLoading,s=o.default.createElement("div",null,o.default.createElement(u.Checkbox,{style:{marginLeft:"10px",lineHeight:"30px"},disabled:!this.state.selected,onChange:this.onAllow,checked:!this.state.disabled},"允许使用"),o.default.createElement("div",{style:{border:"1px solid #e2e2e2",minHeight:"300px"}},o.default.createElement(c,{onChange:this.onChange,value:a},r)));return o.default.createElement("div",{style:i({height:"100%",padding:"2px 0 0 8px",borderLeft:" 1px solid #e2e2e2"},"padding","10px")},n?o.default.createElement(u.Spin,null,s):s,o.default.createElement("div",{style:{display:"block",textAlign:"right",margin:"14px 0 0 0"}},o.default.createElement(u.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave,loading:this.state.authLoading,disabled:!this.state.selected},"保存")))}});e.exports=v},973:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=(r(s),a(7)),u=r(l),d=a(9),c=r(d),p=a(4),h=a(1),f=a(6),m=p.Form.Item,g=(p.Select.Option,a(93)),v=a(73),S=o.default.createClass({displayName:"CreateUserGroupPage",getInitialState:function(){return{userGroupSet:{operation:"",errMsg:""},loading:!1,modal:!1,userGroup:{},hints:{},validRules:[]}},mixins:[h.listenTo(g,"onServiceComplete"),(0,c.default)("userGroup")],onServiceComplete:function(e){this.state.modal&&"create"===e.operation&&(""===e.errMsg?this.setState({modal:!1}):this.setState({loading:!1,userGroupSet:e}))},componentDidMount:function(){this.state.validRules=[{id:"groupName",desc:"组名称",required:!0,max:"24"},{id:"groupDesc",desc:"组描述",required:!1,max:"512"}]},clear:function(e){this.state.hints={},this.state.userGroup.uuid="",this.state.userGroup.corpUuid=e,this.state.userGroup.groupName="",this.state.userGroup.groupDesc="",this.state.loading=!1,this.state.userGroupSet.operation="",this.state.modal||"undefined"==typeof this.refs.mxgBox||this.refs.mxgBox.clear()},onClickSave:function(){f.formValidator(this,this.state.userGroup)&&(this.state.userGroupSet.operation="",this.setState({loading:!0}),v.createUserGroup(this.state.userGroup))},render:function(){var e="horizontal",t="form-item-"+e,a={labelCol:"vertical"==e?null:{span:4},wrapperCol:"vertical"==e?null:{span:20}},r=this.state.hints;return o.default.createElement(p.Modal,{visible:this.state.modal,width:"540px",title:"增加用户组",maskClosable:!1,onOk:this.onClickSave,onCancel:this.toggle,footer:[o.default.createElement("div",{key:"footerDiv",style:{display:"block",textAlign:"right"}},o.default.createElement(u.default,{ref:"mxgBox",svcList:["user-group/create"]}),o.default.createElement(p.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave,loading:this.state.loading},"保存")," ",o.default.createElement(p.Button,{key:"btnClose",size:"large",onClick:this.toggle},"取消"))]},o.default.createElement(p.Form,{layout:e},o.default.createElement(m,i({},a,{label:"组名称",colon:!0,className:t,help:r.groupNameHint,validateStatus:r.groupNameStatus}),o.default.createElement(p.Input,{type:"text",name:"groupName",id:"groupName",value:this.state.userGroup.groupName,onChange:this.handleOnChange})),o.default.createElement(m,i({},a,{label:"组说明",colon:!0,className:t,help:r.groupDescHint,validateStatus:r.groupDescStatus}),o.default.createElement(p.Input,{type:"textarea",name:"groupDesc",id:"groupDesc",value:this.state.userGroup.groupDesc,onChange:this.handleOnChange}))))}});t.default=S},974:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},n=a(2),o=r(n),s=a(5),l=(r(s),a(7)),u=r(l),d=a(9),c=r(d),p=a(4),h=a(1),f=a(6),m=a(3),g=p.Form.Item,v=(p.Select.Option,a(93)),S=a(73),y=o.default.createClass({displayName:"UpdateUserGroupPage",getInitialState:function(){return{userGroupSet:{operation:"",errMsg:""},loading:!1,modal:!1,userGroup:{},hints:{},validRules:[]}},mixins:[h.listenTo(v,"onServiceComplete"),(0,c.default)("userGroup")],onServiceComplete:function(e){this.state.modal&&"update"===e.operation&&(""===e.errMsg?this.setState({modal:!1}):this.setState({loading:!1,userGroupSet:e}))},componentDidMount:function(){this.state.validRules=[{id:"groupName",desc:"组名称",required:!0,max:"24"},{id:"groupDesc",desc:"组描述",required:!1,max:"512"}]},initPage:function(e){this.state.hints={},m.copyValue(e,this.state.userGroup),this.state.loading=!1,this.state.userGroupSet.operation="",this.state.modal||"undefined"==typeof this.refs.mxgBox||this.refs.mxgBox.clear()},onClickSave:function(){f.formValidator(this,this.state.userGroup)&&(this.state.userGroupSet.operation="",this.setState({loading:!0}),S.updateUserGroup(this.state.userGroup))},render:function(){var e="horizontal",t="form-item-"+e,a={labelCol:"vertical"==e?null:{span:4},wrapperCol:"vertical"==e?null:{span:20}},r=this.state.hints;return o.default.createElement(p.Modal,{visible:this.state.modal,width:"540px",title:"修改用户组信息",maskClosable:!1,onOk:this.onClickSave,onCancel:this.toggle,footer:[o.default.createElement("div",{key:"footerDiv",style:{display:"block",textAlign:"right"}},o.default.createElement(u.default,{ref:"mxgBox",svcList:["user-group/update"]}),o.default.createElement(p.Button,{key:"btnOK",type:"primary",size:"large",onClick:this.onClickSave,loading:this.state.loading},"保存")," ",o.default.createElement(p.Button,{key:"btnClose",size:"large",onClick:this.toggle},"取消"))]},o.default.createElement(p.Form,{layout:e},o.default.createElement(g,i({},a,{label:"组名称",colon:!0,className:t,help:r.groupNameHint,validateStatus:r.groupNameStatus}),o.default.createElement(p.Input,{type:"text",name:"groupName",id:"groupName",value:this.state.userGroup.groupName,onChange:this.handleOnChange})),o.default.createElement(g,i({},a,{label:"组说明",colon:!0,className:t,help:r.groupDescHint,validateStatus:r.groupDescStatus}),o.default.createElement(p.Input,{type:"textarea",name:"groupDesc",id:"groupDesc",value:this.state.userGroup.groupDesc,onChange:this.handleOnChange}))))}});t.default=y},975:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var a={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(a[r]=e[r]);return a}var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},o=a(2),s=r(o),l=a(8),u=(r(l),a(5)),d=(r(u),a(7)),c=r(d),p=a(4),h=a(973),f=r(h),m=a(974),g=r(m),v=a(971),S=r(v),y=a(1),C=a(6),w=(a(3),a(93)),U=a(73),E=a(78),b="",x=s.default.createClass({displayName:"UserGroupPage",getInitialState:function(){return{userGroupSet:{recordSet:[],operation:"",errMsg:""},loading:!1,userGroup:null,selectedRowUuid:""}},mixins:[y.listenTo(w,"onServiceComplete")],onServiceComplete:function(e){this.setState({loading:!1,userGroupSet:e})},loadData:function(e){U.initUserGroup(e)},componentDidMount:function(){this.setState({loading:!0});var e=window.loginData.compUser.corpUuid;U.initUserGroup(e)},onRowClick:function(e,t){var a=window.loginData.compUser.corpUuid;this.state.groupName=e.groupName,this.setState({userGroup:e,userGroupSet:this.state.userGroupSet,selectedRowUuid:e.uuid}),U.initUserGroup(a),this.refs.AppAuthPage.loadData(e)},handleOpenCreateWindow:function(e){var t=window.loginData.compUser.corpUuid;this.refs.createWindow.clear(t),this.refs.createWindow.toggle()},onClickUpdate:function(e){null!=this.state.userGroup&&(this.refs.updateWindow.initPage(this.state.userGroup),this.refs.updateWindow.toggle())},onClickDelete:function(e){p.Modal.confirm({title:"删除确认",content:"是否删除选中的用户组【"+this.state.userGroup.groupName+"】",okText:"确定",cancelText:"取消",onOk:this.onClickDelete2.bind(this,this.state.userGroup)})},onClickDelete2:function(){this.setState({loading:!0}),this.state.userGroupSet.operation="",U.deleteUserGroup(this.state.userGroup.uuid)},onFilterRecord:function(e){b=e.target.value,this.setState({loading:this.state.loading})},render:function(){var e=(window.loginData.compUser.corpUuid,C.filter(this.state.userGroupSet.recordSet,b)),t=i(this.props,[]),a=null!==this.state.userGroup;e.map(function(e,t){e.listText=e.groupName});var r=C.getGridMargin(this),o=s.default.createElement("div",{style:{padding:"8px 0 8px 8px"}},s.default.createElement(p.Button,{icon:C.iconAdd,type:"primary",title:"增加用户组",onClick:this.handleOpenCreateWindow}),s.default.createElement(p.Button,{icon:C.iconUpdate,title:"修改用户组",disabled:!a,onClick:this.onClickUpdate,style:{marginLeft:"4px"}}),s.default.createElement(p.Button,{icon:C.iconRemove,title:"删除用户组",disabled:!a,onClick:this.onClickDelete,style:{marginLeft:"4px"}}));return s.default.createElement("div",{className:"grid-page",style:{padding:"10px"}},s.default.createElement("div",{style:{margin:r.margin,float:"left"}},s.default.createElement(c.default,{ref:"mxgBox",svcList:["user-group/retrieve","user-group/remove"]})),s.default.createElement("div",{style:{height:"100%",float:"left",width:"200px"}},this.state.loading?s.default.createElement(p.Spin,{tip:"正在努力加载数据..."},s.default.createElement(E,n({dataSource:e,style:{width:"200px",height:"100%"},rowText:"listText",activeNode:this.state.selectedRowUuid,onClick:this.onRowClick,toolbar:o},t))):s.default.createElement(E,n({dataSource:e,style:{width:"200px",height:"100%"},rowText:"listText",activeNode:this.state.selectedRowUuid,onClick:this.onRowClick,toolbar:o},t))),s.default.createElement("div",{style:{height:"100%",overflow:"hidden"}},s.default.createElement(S.default,{ref:"AppAuthPage",userGroup:this.state.userGroup})),s.default.createElement(f.default,{ref:"createWindow"}),s.default.createElement(g.default,{ref:"updateWindow"}))}});e.exports=x},977:function(e,t,a){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=a(2),n=r(i),o=a(8),s=(r(o),a(5)),l=(r(s),a(4)),u=a(7),d=r(u),c=a(411),p=r(c),h=a(629),f=(r(h),a(410)),m=r(f),g=(a(1),l.Tabs.TabPane),v=a(6),S=n.default.createClass({displayName:"UserPage",getInitialState:function(){return{viewType:"user",compUser:null}},componentDidMount:function(){},onSelectDept:function(e){null===e?this.refs.userTable.loadData("",""):this.refs.userTable.loadData(e.uuid,e.deptName)},onClickPriv:function(e){this.setState({compUser:e,viewType:"priv"})},onTabChange:function(e){"1"===e&&this.setState({viewType:"user"})},render:function(){var e=window.loginData.compUser,t=null===e?"":e.corpUuid,a="user"===this.state.viewType?"":"none",r=null;"priv"===this.state.viewType&&(r=n.default.createElement(l.Tabs,{defaultActiveKey:"2",onChange:this.onTabChange,tabBarStyle:{paddingLeft:"16px",margin:"-36px 0 0"},style:{width:"100%",height:"100%",padding:"36px 0 0"}},n.default.createElement(g,{tab:"返回",key:"1",style:{width:"100%",height:"100%"}}),n.default.createElement(g,{tab:"权限管理",key:"2",style:{width:"100%",height:"100%"}},n.default.createElement(m.default,{compUser:this.state.compUser}))));var i=v.getGridMargin(this,0);return n.default.createElement("div",{style:{width:"100%",height:"100%"}},n.default.createElement("div",{className:"grid-page",style:{padding:i.padding,display:a,overflow:"auto"}},n.default.createElement("div",{style:{margin:i.margin}},n.default.createElement(d.default,{ref:"mxgBox",svcList:["auth-user/retrieve","comp-user/retrieve","comp-user/remove"]})),n.default.createElement("div",{style:{width:"100%"}},n.default.createElement(p.default,{ref:"userTable",corpUuid:t,onSetPriv:this.onClickPriv}))),r)}});e.exports=S}});